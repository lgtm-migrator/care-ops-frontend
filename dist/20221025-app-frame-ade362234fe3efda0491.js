(globalThis.webpackChunkcare_ops_frontend=globalThis.webpackChunkcare_ops_frontend||[]).push([[345],{501:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>zr});var a=n(7198),i=n(7739),l=n.n(i),s=n(8895),o=n(8088),r=n.n(o),c=n(9203),d=n.n(c),u=n(1188),h=n(9230),m=n.n(h),p=n(6718),g=n(7201),f=n(6658);const w=e=>e&&e.replace(/(\r\n|\n|\r)/gm," ");var v=n(1441),b=n(2650),y=n(4878),_=n(5770),x=n(4500),k=n(3337),C=n(2894);const O=C.wA.extend({stateEvents:{"change:isSelected":"onStateChangeIsSelected"},viewEvents:{click:"onClick"},viewOptions(){return{tagName:"button",className:"button--checkbox js-select",template:this.getState("isSelected")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}),triggers:{click:"click"}}},onClick(e,t){this.toggleState("isSelected"),this.triggerMethod("select",t)},onStateChangeIsSelected(e,t){this.show(),this.triggerMethod("change:isSelected",t)}});var T=n(9455);const S=g.ZP.patients.shared.components.stateComponent,D=m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:1,column:105},end:{line:1,column:115}}}):l)+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+s(e.lambda(null!=(l=null!=t?r(t,"options"):t)?r(l,"color"):l,t))+'">'+s((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(o,null!=(l=null!=t?r(t,"options"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"options"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:78}}}))+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:78},end:{line:1,column:133}}}))?l:"")+"</span>"},useData:!0});let V;function P(){if(V)return V;const e=l().request("bootstrap","currentOrg");return V=e.getStates(),V}const M=[u.lO.QUEUED,u.lO.STARTED,u.lO.DONE];let E;const j=T.Z.extend({isCompact:!1,initialize(e){let{stateId:t}=e;this.lists=function(){if(E)return E;const e=P().groupBy("status");return E=(0,a.UI)(M,(t=>({collection:l().request("entities","states:collection",e[t]),headingText:S.statusLabels[t]}))),E}(),this.setSelected(t)},setSelected(e){const t=P();this.setState({selected:t.get(e)})},onChangeSelected(e){this.triggerMethod("change:state",e)},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:D,templateContext:{isCompact:e}}},picklistOptions:{headingText:S.headingText,itemTemplate:D}}),A=g.ZP.patients.shared.components.ownerComponent,N=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="owner-component__team">'+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"short"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:66},end:{line:1,column:91}}}))+"</span></div>"},useData:!0}),F=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div><span class="owner-component__title-filter-name">'+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:54},end:{line:1,column:64}}}):l)+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:71},end:{line:1,column:91}}}))+"</div>"},useData:!0});let I;function R(){if(I)return I;const e=l().request("bootstrap","currentOrg");return I=e.getActiveTeams(),I}let q={};function G(e){return q[e.id]||(q[e.id]=e.getAssignableClinicians()),q[e.id]}const L=T.Z.extend({isCompact:!1,headingText:A.headingText,placeholderText:A.placeholderText,hasTeams:!0,hasCurrentClinician:!0,popWidth(){const e=this.getOption("isCompact"),t=this.getOption("isTitleFilter");return e||t?null:this.getView().$el.outerWidth()},picklistOptions(){return{itemTemplate:N,itemTemplateContext(){if("teams"!==this.model.type)return{short:this.model.getTeam().get("short")}},isSelectlist:!0,infoText:this.getOption("infoText"),headingText:this.getOption("headingText"),placeholderText:this.getOption("placeholderText")}},viewOptions(){const e={type:"far",icon:"circle-user"},t=this.getOption("isCompact"),n=this.getOption("isTitleFilter");return t?{className:"owner-component--compact button-secondary--compact w-100",templateContext:{attr:"teams"===this.getState("selected").type?"short":"name",icon:e}}:n?{className:"owner-component__title-filter-button",template:F}:{className:"button-secondary w-100",templateContext:{attr:"name",icon:e}}},initialize(e){let{owner:t,groups:n}=e;if(this.lists=[],this.getOption("hasCurrentClinician")){const e=l().request("bootstrap","currentUser");this.lists.push({collection:new(r().Collection)([e])})}n&&this.lists.push(...n.map((e=>({collection:G(e),headingText:e.get("name")})))),this.getOption("hasTeams")&&this.lists.push({collection:R(),headingText:this.lists.length?A.teamsHeadingText:null}),this.setState({selected:t})},onDestroy(){q={}},onChangeSelected(e){this.triggerMethod("change:owner",e)}});var B=n(6677);const H=g.ZP.patients.shared.components.dueComponent,Z=m().template({1:function(e,t,n,a,i){return' class="is-overdue"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <span"+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:7},end:{line:2,column:50}}}))?l:"")+">\n    "+r((c(n,"far")||t&&c(t,"far")||o).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:27}}}))+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,null!=t?c(t,"dateFormat"):t,{name:"formatDateTime",hash:{defaultHtml:null!=t?c(t,"defaultHtml"):t,inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:3,column:27},end:{line:3,column:110}}}))+"\n  </span>\n"},useData:!0}),$=C.wA.extend({isCompact:!1,viewEvents:{click:"onClick"},onClick(){this.toggleState("isActive")},stateEvents:{"change:isActive":"onChangeIsActive","change:selected":"onChangeStateSelected"},onChangeIsActive(e,t){const n=this.getView();n.$el.toggleClass("is-active",t),t&&(n.$el.blur(),this.showDatepicker())},viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=this.getState("isDisabled");return{tagName:"button",attributes:{disabled:n},className:()=>e?"button-secondary--compact due-component":"button-secondary w-100 due-component",triggers:{click:"click"},template:Z,templateContext:{defaultHtml:e?"":`<span>${H.defaultText}</span>`,dateFormat:e?"SHORT":"LONG",date:t,isOverdue:!n&&this.getOption("isOverdue")}}},initialize(e){let{date:t}=e;this.setState({selected:t})},showDatepicker(){const e=new B.Z({uiView:this.getView(),state:{selectedDate:this.getState("selected")}});this.listenTo(e,{"change:selectedDate"(t){this.setState("selected",t),e.destroy()},destroy:this.onDatepickerDestroy}),e.show()},onDatepickerDestroy(){this.toggleState("isActive",!1)},onChangeStateSelected(e,t){this.show(),this.triggerMethod("change:due",t)}}),W=g.ZP.patients.shared.components.timeComponent,Y="HH:mm:ss",U=d()("07:00:00",Y),z=(0,a.DZ)(96,(function(e){return{id:U.add(15*e,"minutes").format(Y)}})),Q=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))},useData:!0}),X=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"id"):t,"LT",{name:"formatDateTime",hash:{defaultHtml:null!=t?r(t,"defaultHtml"):t,inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:1,column:15},end:{line:1,column:88}}}))},useData:!0}),K=T.Z.extend({collection:new(r().Collection)(z),align:"right",popWidth:192,isCompact:!1,isSelectlist:!0,getClassName(e,t){const n=e&&this.getOption("isOverdue")?"is-overdue":"";return t?`button-secondary--compact time-component ${n}`:`button-secondary time-component w-100 ${n}`},getTemplate:(e,t)=>!e&&t?Q:X,viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:this.getClassName(n,e),template:this.getTemplate(n,e),templateContext:{defaultHtml:`<span>${W.placeholderText}</span>`}}},picklistOptions:{canClear:!0,clearText:W.clear,headingText:W.headingText,placeholderText:W.placeholderText,isSelectlist:!0,itemTemplateContext(){return{text:d()(this.model.id,Y).format("LT")}}},initialize(e){let{time:t}=e;const n=this.collection.get(t);this.setState({selected:n})},onChangeSelected(e){const t=e?e.id:null;this.triggerMethod("change:time",t)}}),J=g.ZP.patients.shared.components.durationComponent,ee=(0,a.UI)((0,a.w6)(99),(function(e){return{id:e+1}})),te=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"durationComponent"))&&o(l,"defaultText"),t))+"</span>"},useData:!0}),ne=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:41},end:{line:1,column:102}}}),{name:"formatMessage",hash:{min:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:25},end:{line:1,column:111}}}))+"</span>"},useData:!0}),ae=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:77}}}),{name:"formatMessage",hash:{min:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:86}}}))},useData:!0}),ie=T.Z.extend({collection:new(r().Collection)(ee),getTemplate(){return this.getState("selected")?ne:te},viewOptions(){return{className:"button-secondary w-100",template:this.getTemplate()}},picklistOptions:{canClear:!0,clearText:J.clear,headingText:J.headingText,placeholderText:J.placeholderText,isSelectlist:!0,itemTemplate:ae},initialize(e){let{duration:t}=e;const n=this.collection.get(t);this.setState({selected:n})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(e){const t=e?e.id:0;this.triggerMethod("change:duration",t)}}),le=p.View.extend({className:"button-secondary--compact",tagName:"button",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))},useData:!0}),triggers:{click:"click"},onClick(){l().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)}}),se=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))},useData:!0}),triggers:{click:"prevent-row-click"},onRender(){const e=m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="action-tooltip__flow"><span class="action-tooltip__flow-icon">'+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:110}}}))+"</span>"+r("function"==typeof(l=null!=(l=c(n,"flowName")||(null!=t?c(t,"flowName"):t))?l:o)?l.call(s,{name:"flowName",hash:{},data:i,loc:{start:{line:2,column:117},end:{line:2,column:131}}}):l)+"</p>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n      "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:6},end:{line:2,column:142}}}))?l:"")+'\n      <p><span class="action-tooltip__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:3,column:51},end:{line:3,column:71}}}))+'</span><span class="action-tooltip__action-name">'+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:120},end:{line:3,column:130}}}):s)+'</span></p>\n      <p class="action-tooltip__action-details">'+c(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:r)===d?s.call(o,{name:"details",hash:{},data:i,loc:{start:{line:4,column:48},end:{line:4,column:61}}}):s)+"</p>\n    "},useData:!0}),t=this.model.getFlow();new k.Z({messageHtml:(0,g.SM)(e,{name:this.model.get("name"),flowName:t?t.get("name"):null,details:this._formatDetails(this.model.get("details"))}),uiView:this,ui:this.$el})},_formatDetails:e=>!e||e.length<=140?e:`${(0,v.Z)(e.slice(0,140))}...`});var oe=n(3855),re=n.n(oe),ce=n(8862),de=n.n(ce),ue=n(3948),he=n.n(ue),me=n(2266),pe=n.n(me);const{ENTER_KEY:ge}=f.Z,fe=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),we=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),ve=p.View.extend({className:"pos--relative",template:de(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==ge||e.preventDefault()},onWatchChange(e){const t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew(),isDisabled:this.getOption("isDisabled"),isAdHoc:this.model.isAdHoc()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),be=p.View.extend({className:"pos--relative",template:he(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),ye=p.View.extend({attributes(){return{disabled:!!this.getOption("isShowingForm")}},tagName:"button",className:"button-secondary w-100 action-sidebar__form",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))+"<span>"+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:48}}}):l)+"</span>"},useData:!0}),triggers:{click:"click"}}),_e=p.View.extend({className:"sidebar__dialog",triggers:{"click .js-share":"click:share","click .js-cancel":"click:cancelShare","click .js-undo-cancel":"click:undoCancelShare","click .js-response":"click:response"},template:pe(),templateContext(){const e=this.model.getPatient(),t=this.model.get("sharing"),n=function(e){switch(e){case u.q$.PENDING:case u.q$.SENT:return{iconType:"fas",icon:"circle-dot",color:"black"};case u.q$.RESPONDED:return{iconType:"fas",icon:"circle-check",color:"green"};case u.q$.CANCELED:case u.q$.ERROR_OPT_OUT:return{iconType:"far",icon:"octagon-minus",color:"orange"};default:return{iconType:"fas",icon:"circle-exclamation",color:"red"}}}(t),a=t===u.q$.PENDING,i=t===u.q$.SENT,l=t===u.q$.RESPONDED,s=t===u.q$.CANCELED;return{stateOptions:n,isWaiting:i||a,isResponded:l,isCanceled:s,isError:!(a||i||l||s),patient:e.pick("first_name","last_name"),isDone:this.model.isDone()}}}),xe=p.View.extend({childViewTriggers:{save:"save",cancel:"cancel","click:share":"click:share","click:cancelShare":"click:cancelShare","click:undoCancelShare":"click:undoCancelShare"},className:"sidebar flex-region",template:re(),regions:{name:"[data-name-region]",details:"[data-details-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]",form:"[data-form-region]",formSharing:"[data-form-sharing-region]",save:"[data-save-region]",activity:{el:"[data-activity-region]",regionClass:y.Z},timestamps:"[data-timestamps-region]",comment:"[data-comment-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:g.ZP.patients.sidebar.action.actionSidebarViews.layoutView.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"layoutView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext(){const e=this.action.get("outreach");return{outreach:e,hasOutreach:!!e,isNew:this.action.isNew(),hasForm:!!this.action.getForm()}},initialize(e){let{action:t}=e;this.action=t,this.listenTo(this.action,{"change:_state":this.onChangeActionState,"change:_owner":this.onChangeOwner,"change:due_date":this.onChangeDueDate,"change:due_time":this.onChangeDueDate,"change:duration":this.onChangeDuration,"change:sharing":this.onChangeSharing});const n=this.action.getFlow();this.listenTo(n,"change:_state",this.showAction)},isFlowDone(){const e=this.action.getFlow();return e&&e.isDone()},onChangeActionState(){this.showFormSharing(),this.action.isDone()!==l().request("entities","states:model",this.action.previous("_state")).isDone()&&this.showAction()},onChangeOwner(){this.showOwner()},onChangeDueDate(){this.showDueDay(),this.showDueTime()},onChangeDuration(){this.showDuration()},onChangeSharing(){this.showFormSharing()},onAttach(){(0,b.$)(this.el)},onRender(){this.showAction()},cloneAction(){this.clonedAction&&this.stopListening(this.clonedAction),this.clonedAction=this.action.clone()},showAction(){this.showEditForm(),this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showDuration(),this.showForm(),this.showFormSharing()},showEditForm(){this.cloneAction(),this.listenTo(this.clonedAction,"change:name change:details",this.showSave),this.action.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){const e=this.action.isDone()||this.isFlowDone();this.showChildView("name",new ve({model:this.clonedAction,action:this.action,isDisabled:e}))},showDetails(){this.showChildView("details",new be({model:this.clonedAction,action:this.action}))},showState(){const e=this.action.isNew()||this.isFlowDone(),t=new j({stateId:this.action.get("_state"),state:{isDisabled:e}});this.listenTo(t,"change:state",(e=>{this.action.saveState(e)})),this.showChildView("state",t)},showOwner(){const e=this.action.isNew()||this.action.isDone()||this.isFlowDone(),t=new L({owner:this.action.getOwner(),groups:this.action.getPatient().getGroups(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.action.saveOwner(e)})),this.showChildView("owner",t)},showDueDay(){const e=this.action.isNew()||this.action.isDone()||this.isFlowDone(),t=new $({date:this.action.get("due_date"),state:{isDisabled:e},isOverdue:this.action.isOverdue()});this.listenTo(t,"change:due",(e=>{this.action.saveDueDate(e)})),this.showChildView("dueDay",t)},showDueTime(){const e=this.action.isNew()||this.action.isDone()||this.isFlowDone()||!this.action.get("due_date"),t=new K({time:this.action.get("due_time"),isOverdue:this.action.isOverdue(),state:{isDisabled:e}});this.listenTo(t,"change:time",(e=>{this.action.saveDueTime(e)})),this.showChildView("dueTime",t)},showDuration(){const e=this.action.isNew()||this.action.isDone()||this.isFlowDone(),t=new ie({duration:this.action.get("duration"),state:{isDisabled:e}});this.listenTo(t,"change:duration",(e=>{this.action.save({duration:e})})),this.showChildView("duration",t)},showForm(){const e=this.action.getForm();if(!e||this.action.isNew())return;const t=new ye({model:e,isShowingForm:this.getOption("isShowingForm")});this.listenTo(t,"click",(()=>{this.triggerMethod("click:form",e)})),this.showChildView("form",t)},showFormSharing(){if(this.action.get("sharing")===u.q$.DISABLED)return;const e=new _e({model:this.action});this.listenTo(e,"click:response",(()=>{this.triggerMethod("click:form",this.action.getForm())})),this.showChildView("formSharing",e)},showSave(){if(!this.clonedAction.isValid())return this.showDisabledSave();this.showChildView("save",new we({model:this.clonedAction}))},showDisabledSave(){this.showChildView("save",new fe)},onSave(){this.getRegion("save").empty()},onCancel(){this.action.isNew()?this.triggerMethod("close",this):this.showEditForm()}}),ke=p.View.extend({className:"comment__actions",template:m().template({1:function(e,t,n,a,i){return"disabled"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"postBtn"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"saveBtn"),t))+"\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-margin--r-4 js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"cancelBtn"),t))+"</button>"},9:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-float--left comment__delete js-delete"><span class="u-margin--r-4">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:10,column:118},end:{line:10,column:137}}}))+"</span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"commentsViews"))&&o(l,"postCommentView"))&&o(l,"deleteBtn"),t))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-post" '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:42},end:{line:2,column:75}}}))?l:"")+">\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+"    </button>\n    "+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"shouldHideCancel"):t,{name:"unless",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:4},end:{line:9,column:172}}}))?l:"")+"\n    "+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:4},end:{line:10,column:231}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{shouldHideCancel:this.getOption("shouldHideCancel"),isDisabled:!this.model.isValid()||!this.model.hasChanged("message"),isNew:this.model.isNew()}},triggers:{"click .js-cancel":"cancel","click .js-post":"post","click .js-delete":"delete"}}),Ce=p.View.extend({behaviors:[_.Z],modelEvents:{"change:message":"showPostView"},ui:{input:".js-input",spacer:".js-spacer"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex comment__form">\n      <span class="comment__author-label">'+d(typeof(s=null!=(s=u(n,"initials")||(null!=t?u(t,"initials"):t))?s:r)===c?s.call(o,{name:"initials",hash:{},data:i,loc:{start:{line:3,column:42},end:{line:3,column:56}}}):s)+'</span>\n      <div class="flex-grow pos--relative">\n        <textarea class="input-secondary textarea-flex__input js-input" placeholder="'+d(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"commentsViews"))&&u(l,"commentFormView"))&&u(l,"placeholder"),t))+'">'+d(typeof(s=null!=(s=u(n,"message")||(null!=t?u(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:5,column:156},end:{line:5,column:169}}}):s)+'</textarea>\n        <div class="textarea-flex__container input-secondary comment__input js-spacer">'+d(typeof(s=null!=(s=u(n,"message")||(null!=t?u(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:6,column:87},end:{line:6,column:100}}}):s)+"</div>\n      </div>\n    </div>\n    <div data-post-region></div>\n  "},useData:!0}),regions:{post:"[data-post-region]"},childViewTriggers:{post:"post:comment",cancel:"cancel:comment",delete:"confirm:delete"},templateContext(){return{initials:this.model.getClinician().getInitials()}},onRender(){this.showPostView()},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("message",(0,v.Z)(e))},showPostView(){const e=this.model.isNew()&&!this.model.get("message");this.showChildView("post",new ke({model:this.model,shouldHideCancel:e}))},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:g.ZP.patients.shared.commentsViews.commentFormView.deleteModal.bodyText,headingText:g.ZP.patients.shared.commentsViews.commentFormView.deleteModal.headingText,submitText:g.ZP.patients.shared.commentsViews.commentFormView.deleteModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete:comment",this.model)}})}});var Oe=n(4861);const Te=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.created",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:79}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:105}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Se=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.clinicianAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:89}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:138}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),De=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.actionCopiedFromProgram",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:95}}}),{name:"formatHTMLMessage",hash:{program:null!=t?r(t,"program"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:139}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ve=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.detailsUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:86}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:112}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Pe=m().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.dueDateCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:86}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.dueDateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:86}}}),{name:"formatHTMLMessage",hash:{date:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"value"):t,"LONG",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:118},end:{line:5,column:147}}}),team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:149}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Me=m().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.dueTimeCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:86}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.dueTimeUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:86}}}),{name:"formatHTMLMessage",hash:{time:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"value"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:118},end:{line:5,column:168}}}),team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:170}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Ee=m().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.durationCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:87}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.durationUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:87}}}),{name:"formatHTMLMessage",hash:{duration:null!=t?o(t,"value"):t,team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:130}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),je=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.formUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:121}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ae=m().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.formResponded",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:24},end:{line:3,column:87}}}),{name:"formatHTMLMessage",hash:{form:null!=t?o(t,"form"):t,team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:4},end:{line:3,column:125}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.formRecipientResponded",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:24},end:{line:5,column:96}}}),{name:"formatHTMLMessage",hash:{form:null!=t?o(t,"form"):t,recipient:null!=t?o(t,"recipient"):t},data:i,loc:{start:{line:5,column:4},end:{line:5,column:132}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"_editor"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:9}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Ne=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.formRemoved",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:121}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Fe=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.nameUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:146}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ie=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.teamAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{to_team:null!=t?r(t,"to_team"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Re=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.stateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:130}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),qe=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.sharingCanceled",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:87}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:113}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ge=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.sharingSent",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,recipient:null!=t?r(t,"recipient"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:119}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Le=p.View.extend({className:"u-margin--b-16",ui:{edit:".js-edit"},triggers:{"click @ui.edit":"click:edit"},childViewTriggers:{"cancel:comment":"cancel:edit","post:comment":"save:comment","delete:comment":"delete:comment"},regions:{comment:"[data-comment-activity-region]"},template:m().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-edit comment__edit">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen",{name:"far",hash:{},data:i,loc:{start:{line:8,column:61},end:{line:8,column:74}}}))+" "+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"activityViews"))&&o(l,"commentView"))&&o(l,"edit"),t))+"</span>"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="comment__edited"> '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"activityViews"))&&s(l,"commentView"))&&s(l,"edited"),t))+" </span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-comment-activity-region>\n      <div class="comment__item">\n        <div class="comment__author-label">'+d(typeof(s=null!=(s=u(n,"initials")||(null!=t?u(t,"initials"):t))?s:r)===c?s.call(o,{name:"initials",hash:{},data:i,loc:{start:{line:4,column:43},end:{line:4,column:57}}}):s)+'</div>\n        <div class="comment__title">\n          <span class="comment__author-name">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:6,column:45},end:{line:6,column:55}}}):s)+'</span>\n          <span class="comment__timestamp">'+d((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:84}}}))+"</span>\n          "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"canEdit"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:10},end:{line:8,column:155}}}))?l:"")+'\n        </div>\n        <div class="comment__message">'+d(typeof(s=null!=(s=u(n,"message")||(null!=t?u(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:51}}}):s)+(null!=(l=u(n,"if").call(o,null!=t?u(t,"edited_at"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:51},end:{line:10,column:182}}}))?l:"")+"</div>\n      </div>\n    </div>\n  "},useData:!0}),templateContext(){const e=this.model.getClinician(),t=l().request("bootstrap","currentUser");return{canEdit:e.id===t.id,name:e.get("name"),initials:e.getInitials()}},onRender(){const e=this.model.get("edited_at");if(!e)return;const t=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.commentView.editTooltip",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:93}}}),{name:"formatHTMLMessage",hash:{edited:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"edited"):t,"TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:104},end:{line:1,column:134}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:137}}}))},useData:!0});new k.Z({messageHtml:(0,g.SM)(t,{edited:e}),uiView:this,ui:this.ui.edit})},onClickEdit(){this.showChildView("comment",new Ce({model:this.model.clone()}))},onSaveComment(e){let{model:t}=e;this.model.save({message:t.get("message"),edited_at:d().utc().format()}),this.render()},onCancelEdit(){this.render()},onDeleteComment(){this.model.destroy()}}),Be=p.View.extend({className:"action-sidebar__activity-item",getTemplate(){const e=this.model.get("event_type"),t={ActionClinicianAssigned:Se,ActionCreated:Te,ActionDetailsUpdated:Ve,ActionDueDateUpdated:Pe,ActionDueTimeUpdated:Me,ActionDurationUpdated:Ee,ActionFormUpdated:je,ActionFormResponded:Ae,ActionFormRemoved:Ne,ActionNameUpdated:Fe,ActionCopiedFromProgramAction:De,ActionTeamAssigned:Ie,ActionRoleAssigned:Ie,ActionStateUpdated:Re};if("ActionSharingUpdated"===e){const e=this.model.get("value");if(e===u.q$.SENT)return Ge;if(e===u.q$.CANCELED)return qe}return t[e]?t[e]:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext(){const e=this.model.getRecipient(),t=this.model.getEditor(),n=this.model.getClinician(),a=this.model.getProgram(),i=this.model.getForm();return{recipient:e?`${e.get("first_name")} ${e.get("last_name")}`:null,name:t.get("name"),team:t.getTeam().get("name"),to_clinician:n.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name"),program:a?a.get("name"):null,form:i?i.get("name"):null}}}),He=p.CollectionView.extend({childView:e=>"events"===e.type?Be:Le,viewFilter(e){let{model:t}=e;return"ActionCreated"!==t.get("event_type")||!this.model.get("_program_action")},viewComparator(e,t){return(0,Oe.XQ)("asc",this._getSortDate(e.model),this._getSortDate(t.model))},_getSortDate:e=>e.get("date")?e.get("date"):e.get("created_at")}),Ze=p.View.extend({className:"sidebar__footer flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"activityViews"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"createdAt"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:134},end:{line:2,column:172}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"activityViews"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:105},end:{line:3,column:144}}}))+"</div></div>\n  "},useData:!0}),templateContext(){return{createdAt:this.getOption("createdEvent").get("date")}}}),$e=s.Z.extend({onBeforeStart(e){let{action:t,isShowingForm:n}=e;this.action=t,this.showView(new xe({action:this.action,isShowingForm:n})),this.action.isNew()||this.getRegion("activity").startPreloader()},beforeStart(){if(!this.action.isNew())return[l().request("entities","fetch:actionEvents:collection",this.action.id),l().request("entities","fetch:comments:collection:byAction",this.action.id)]},onStart(e){let[t]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.action.isNew()||(this.activityCollection=new(r().Collection)([...t.models,...n.models]),this.showActivity(),this.showNewCommentForm())},showActivity(){this.showChildView("activity",new He({collection:this.activityCollection,model:this.action}));const e=this.activityCollection.find({event_type:"ActionCreated"});this.showChildView("timestamps",new Ze({model:this.action,createdEvent:e}))},showNewCommentForm(){const e=l().request("bootstrap","currentUser"),t=this.showChildView("comment",new Ce({model:l().request("entities","comments:model",{_action:this.action.id,_clinician:e.id})}));this.listenTo(t,{"post:comment":this.onPostNewComment,"cancel:comment":this.onCancelNewComment})},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm","click:share":"onClickShare","click:cancelShare":"onClickCancel","click:undoCancelShare":"onClickUndoCancel"},onSave(e){let{model:t}=e;t.isNew()?this.action.saveAll(t.attributes).done((()=>{l().trigger("event-router","patient:action",this.action.get("_patient"),this.action.id)})):this.action.save(t.pick("name","details"))},onDelete(){this.action.destroy({wait:!0}).done((()=>{this.stop()})).fail((e=>{let{responseJSON:t}=e;l().request("alert","show:apiError",t)}))},onStop(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),l().request("sidebar","close")},onClickForm(e){l().trigger("event-router","form:patientAction",this.action.id,e.id)},onClickShare(){this.action.save({sharing:u.q$.PENDING})},onClickCancel(){this.action.save({sharing:u.q$.CANCELED})},onClickUndoCancel(){this.action.save({sharing:u.q$.PENDING})},onPostNewComment(e){let{model:t}=e;t.set({created_at:d().utc().format()}).save(),this.activityCollection.add(t),this.showNewCommentForm()},onCancelNewComment(){this.showNewCommentForm()}}),We=g.ZP.patients.shared.flowsViews,Ye=j.extend({onPicklistSelect(e){let{model:t}=e;t.isDone()&&this.getOption("flow")?this.shouldSelectDone(t):this.setSelectedStatus(t)},shouldSelectDone(e){if(this.getOption("flow").isAllDone())return void this.setSelectedStatus(e);if(this.popRegion.empty(),l().request("bootstrap","currentOrg:setting","require_done_flow"))return void l().request("modal","show:small",{bodyText:We.requireDoneModal.bodyText,headingText:We.requireDoneModal.headingText,submitText:We.requireDoneModal.submitText,cancelText:!1,buttonClass:"button--blue"});const t=l().request("modal","show:small",{bodyText:We.doneModal.bodyText,headingText:We.doneModal.headingText,submitText:We.doneModal.submitText,onSubmit:()=>{this.setSelectedStatus(e),t.destroy()}})},setSelectedStatus(e){this.setState("selected",e),this.popRegion.empty()}});var Ue=n(2888),ze=n.n(Ue);const Qe=g.ZP.patients.sidebar.flow.flowSidebarViews,Xe=p.View.extend({className:"sidebar__footer flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+"</div></div>\n  "},useData:!0})}),Ke=p.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:ze(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",activity:{el:"[data-activity-region]",regionClass:y.Z},timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:Qe.layoutView.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"flowSidebarViews"))&&o(l,"layoutView"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},modelEvents:{"change:_state"(){this.showState(),this.showOwner()},"change:_owner":"showOwner"},onAttach(){(0,b.$)(this.el)},onRender(){this.showState(),this.showOwner(),this.showTimestamps()},showState(){const e=new Ye({flow:this.model,stateId:this.model.get("_state")});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){const e=this.model.isDone(),t=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},showTimestamps(){this.showChildView("timestamps",new Xe({model:this.model}))}}),Je=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.programStarted",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{program:null!=t?r(t,"program"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),et=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.clinicianAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:87}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:136}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),tt=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.detailsUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:110}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),nt=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.nameUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:81}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:144}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),at=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.teamAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:82}}}),{name:"formatHTMLMessage",hash:{to_team:null!=t?r(t,"to_team"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:126}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),it=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.flow.activityViews.stateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:82}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),lt=p.View.extend({className:"patient-flow-sidebar__activity-item",getTemplate(){const e=this.model.get("event_type"),t={FlowProgramStarted:Je,FlowClinicianAssigned:et,FlowDetailsUpdated:tt,FlowNameUpdated:nt,FlowTeamAssigned:at,FlowRoleAssigned:at,FlowStateUpdated:it};return t[e]?t[e]:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext(){const e=this.model.getEditor(),t=this.model.getClinician(),n=this.model.getProgram();return{name:e.get("name"),team:e.getTeam().get("name"),program:n?n.get("name"):null,to_clinician:t.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name")}}}),st=p.CollectionView.extend({childView:lt}),ot=s.Z.extend({onBeforeStart(e){let{flow:t}=e;this.flow=t,this.flow.trigger("editing",!0),this.showView(new Ke({model:this.flow})),this.getRegion("activity").startPreloader()},beforeStart(){return l().request("entities","fetch:flowEvents:collection",this.flow.id)},onStart(e,t){this.showChildView("activity",new st({collection:t,model:this.flow}))},viewEvents:{close:"stop",delete:"onDelete"},onDelete(){const e=l().request("modal","show:small",(t={onSubmit:()=>{this.flow.destroy({wait:!0}).done((()=>{l().trigger("event-router","patient:dashboard",this.flow.get("_patient"))})).fail((e=>{let{responseJSON:t}=e;l().request("alert","show:apiError",t)})),e.destroy()}},(0,a.l7)({buttonClass:"button--red"},Qe.deleteModal,t)));var t},onStop(){this.flow.trigger("editing",!1),l().request("sidebar","close")}});var rt=n(4974),ct=n.n(rt),dt=n(2476),ut=n.n(dt),ht=n(3742),mt=n.n(ht),pt=n(5070),gt=n.n(pt);const{ENTER_KEY:ft}=f.Z,wt=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"program"))&&s(l,"programsSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),vt=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),bt=p.View.extend({template:ut(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==ft||e.preventDefault()},onWatchChange(e){const t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{error:this.getOption("error"),isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),yt=p.View.extend({className:"pos--relative",template:ct(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),_t=p.View.extend({template:gt(),triggers:{"click .js-state-toggle":"click:toggle"},modelEvents:{"change:published":"render"}}),xt=p.View.extend({className:"sidebar__footer flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"program"))&&d(l,"programsSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:157},end:{line:2,column:196}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"program"))&&d(l,"programsSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:128},end:{line:3,column:167}}}))+"</div></div>\n  "},useData:!0})}),kt=p.View.extend({childViewTriggers:{save:"save",cancel:"cancel",toggle:"toggle"},className:"sidebar flex-region",template:mt(),regions:{name:"[data-name-region]",details:"[data-details-region]",state:"[data-state-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},initialize(e){let{program:t}=e;this.program=t,this.model=this.program.clone()},onAttach(){(0,b.$)(this.el)},onRender(){this.showForm(),this.showState(),this.showTimestamps()},showForm(){this.stopListening(this.model),this.model=this.program.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(e){this.showChildView("name",new bt({model:this.model,program:this.program,error:e}))},showDetails(){this.showChildView("details",new yt({model:this.model,program:this.program}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new vt({model:this.model}))},showState(){if(this.program.isNew())return;const e=new _t({model:this.program,program:this.program});this.listenTo(e,"click:toggle",(()=>{this.program.save({published:!this.program.get("published")})})),this.showChildView("state",e)},showTimestamps(){this.program.isNew()||this.showChildView("timestamps",new xt({model:this.program}))},showDisabledSave(){this.showChildView("save",new wt)},onSave(){this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty()},showErrors(e){let{name:t}=e;this.showName(t),this.showDisabledSave()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),Ct=s.Z.extend({onBeforeStart(e){let{program:t}=e;this.program=t,this.showView(new kt({program:this.program}))},viewEvents:{save:"onSave",close:"stop"},onSave(e){let{model:t}=e;const n=this.program.isNew();this.program.save(t.pick("name","details")).then((()=>{n&&l().request("sidebar","close")}),(e=>{let{responseJSON:t}=e;const n=this.program.parseErrors(t);this.getView().showErrors(n)}))},onStop(){this.program&&this.program.isNew()&&this.program.destroy(),l().request("sidebar","close")}}),Ot=g.ZP.programs.shared.components.publishedComponent,Tt=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+r("function"==typeof(l=null!=(l=c(n,"className")||(null!=t?c(t,"className"):t))?l:o)?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,null!=t?c(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"</span>"},useData:!0}),St=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+c(typeof(l=null!=(l=d(n,"className")||(null!=t?d(t,"className"):t))?l:o)===r?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+c((d(n,"far")||t&&d(t,"far")||o).call(s,null!=t?d(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"<span>"+c(typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:o)===r?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:48},end:{line:1,column:58}}}):l)+"</span></span>"},useData:!0}),Dt=[{id:u.t0.DRAFT,icon:"pen-to-square",className:"program-action--draft",name:Ot.draftText},{id:u.t0.PUBLISHED,icon:"circle-play",className:"program-action--published",name:Ot.publishedText},{id:u.t0.CONDITIONAL,icon:"circle-pause",className:"program-action--conditional",name:Ot.conditionalText}],Vt=T.Z.extend({isCompact:!1,initialize(e){this.mergeOptions(e,["status","isPublishedDisabled","isConditionalAvailable"]),this.collection=new(r().Collection)(Dt),(0,a.q6)(this,"isConditionalAvailable")||this.collection.remove(u.t0.CONDITIONAL),this.setState({selected:this.collection.get(this.status)})},isPublishDisabled:!1,isConditionalAvailable:!0,onChangeSelected(e){this.triggerMethod("change:status",e.id)},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:e?Tt:St}},picklistOptions(){const e=(0,a.q6)(this,"isPublishDisabled");return{headingText:Ot.headingText,itemClassName(){return e&&this.model.id===u.t0.PUBLISHED?"is-disabled":""},itemTemplate:St,infoText:e?Ot.flowStatusInfoText:null}}}),Pt=g.ZP.shared.components.teamComponent,Mt=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="team-component__team">'+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"short"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:65},end:{line:1,column:90}}}))+"</span></div>"},useData:!0});let Et;const jt=T.Z.extend({TeamItemTemplate:Mt,isCompact:!1,defaultText(){return this.getOption("isCompact")?null:Pt.defaultText},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},canClear:!1,picklistOptions(){return{canClear:this.getOption("canClear"),itemTemplate:this.TeamItemTemplate,isSelectlist:!0,headingText:Pt.headingText,placeholderText:Pt.placeholderText}},viewOptions(){const e={type:"far",icon:"circle-user"},t=(0,a.q6)(this,"defaultText");return this.getOption("isCompact")?{className:"button-secondary--compact",templateContext:{defaultText:t,attr:"short",icon:e}}:{className:"button-secondary w-100",templateContext:{defaultText:t,attr:"name",icon:e}}},initialize(e){let{team:t}=e;this.collection=function(){if(Et)return Et;const e=l().request("bootstrap","currentOrg");return Et=e.getTeams(),Et}(),this.setState({selected:this.collection.get(t)})},onChangeSelected(e){this.triggerMethod("change:team",e)}}),At=Vt.extend({isPublishDisabled(){return!this.getOption("flow").getActions().some({status:u.t0.PUBLISHED})},isConditionalAvailable:!1,onPicklistSelect(e){let{model:t}=e;t.id===u.t0.PUBLISHED&&this.isPublishDisabled()||(this.setState("selected",t),this.popRegion.empty())}});let Nt;const Ft=jt.extend({canClear:!0,initialize(e){let{owner:t}=e;this.collection=function(){if(Nt)return Nt;const e=l().request("bootstrap","currentOrg");return Nt=e.getTeams(),Nt}(),this.setState({selected:t})},onChangeSelected(e){this.triggerMethod("change:owner",e)}});var It=n(8698),Rt=n.n(It),qt=n(7665),Gt=n.n(qt),Lt=n(8223),Bt=n.n(Lt);const Ht=g.ZP.programs.sidebar.flow.flowSidebarViews,{ENTER_KEY:Zt}=f.Z,$t=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),Wt=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Yt=p.View.extend({className:"pos--relative",template:Gt(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==Zt||e.preventDefault()},onWatchChange(e){const t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),Ut=p.View.extend({className:"pos--relative",template:Bt(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),zt=p.View.extend({className(){return this.model.isNew()?"button-secondary w-100 is-disabled":"button-secondary w-100"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+o(s(null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"color"):l,t))+'">'+o((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+"<span>"+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"stateView"))&&r(l,"label"),t))+"</span></span>"},useData:!0}),templateContext:()=>({stateOptions:l().request("bootstrap","currentOrg").getStates().at(0).get("options")}),onRender(){this.model.isNew()||new k.Z({message:Ht.stateView.tooltip,uiView:this,ui:this.$el})}}),Qt=p.View.extend({className:"sidebar__footer flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+"</div></div>\n  "},useData:!0})}),Xt=p.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Rt(),regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",state:"[data-state-region]",owner:"[data-owner-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:g.ZP.programs.sidebar.flow.layoutView.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"layoutView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext(){return{isNew:this.model.isNew()}},initialize(e){let{flow:t}=e;this.flow=t,this.model=this.flow.clone(),this.listenTo(this.flow,{"change:status":this.onChangeFlowStatus,"change:_owner":this.onChangeOwner})},onChangeFlowStatus(){this.showPublished()},onChangeOwner(){this.showOwner()},onAttach(){(0,b.$)(this.el)},onRender(){this.showFlow(),this.showTimestamps()},showFlow(){this.showForm(),this.showPublished(),this.showState(),this.showOwner()},showForm(){this.stopListening(this.model),this.model=this.flow.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new Yt({model:this.model,flow:this.flow}))},showDetails(){this.showChildView("details",new Ut({model:this.model,flow:this.flow}))},showPublished(){const e=this.flow.isNew(),t=new At({flow:this.flow,status:this.flow.get("status"),state:{isDisabled:e}});this.listenTo(t,"change:status",(e=>{this.flow.save({status:e})})),this.showChildView("published",t)},showState(){this.showChildView("state",new zt({model:this.flow}))},showOwner(){const e=this.flow.isNew(),t=new Ft({owner:this.flow.getOwner(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.flow.saveOwner(e)})),this.showChildView("owner",t)},showTimestamps(){this.flow.isNew()||this.showChildView("timestamps",new Qt({model:this.flow}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new Wt({model:this.model}))},showDisabledSave(){this.showChildView("save",new $t)},onSave(){this.getRegion("save").empty()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),Kt=s.Z.extend({onBeforeStart(e){let{flow:t}=e;this.flow=t,this.flow.trigger("editing",!0),this.showView(new Xt({flow:this.flow}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete"},onSave(e){let{model:t}=e;t.isNew()?this.flow.saveAll(t.attributes).done((()=>{l().trigger("event-router","programFlow",this.flow.id)})):this.flow.save(t.pick("name","details"))},onDelete(){const e=l().request("modal","show:small",(t={onSubmit:()=>{this.flow.destroy({wait:!0}).done((()=>{l().trigger("event-router","program:details",this.flow.get("_program"))})).fail((e=>{let{responseJSON:t}=e;l().request("alert","show:apiError",t)})),e.destroy()}},(0,a.l7)({buttonClass:"button--red"},Ht.deleteModal,t)));var t},onStop(){this.flow&&this.flow.isNew()&&this.flow.destroy(),this.flow.trigger("editing",!1),l().request("sidebar","close")}}),Jt=g.ZP.programs.shared.components.formComponent,en=m().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary button__group flex-grow" '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:69},end:{line:2,column:102}}}))?l:"")+">\n    "+c((d(n,"far")||t&&d(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:42},end:{line:3,column:52}}}):s)+'</span>\n  </button><button class="js-click-form button button__group form-component__form-button" '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:90},end:{line:4,column:123}}}))?l:"")+">"+c((d(n,"far")||t&&d(t,"far")||r).call(o,"up-right-and-down-left-from-center",{name:"far",hash:{},data:i,loc:{start:{line:4,column:124},end:{line:4,column:168}}}))+"</button>\n"},useData:!0}),tn=m().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary w-100" '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:51},end:{line:2,column:84}}}))?l:"")+">\n    "+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"shared"))&&r(l,"components"))&&r(l,"formComponent"))&&r(l,"defaultText"),t))+"</span>\n  </button>\n"},useData:!0});let nn;const an=T.Z.extend({viewOptions(){return{className:"flex",template:this.getState("selected")?en:tn,templateContext(){return{isDisabled:this.getOption("state").isDisabled}},tagName:"div",triggers:{"click .js-button":"click","focus .js-button":"focus","click .js-click-form":"click:form"}}},viewEvents:{click:"onClick","click:form":"onViewClickForm"},onViewClickForm(){this.triggerMethod("click:form",this.getState("selected"))},picklistOptions:{canClear:!0,headingText:Jt.headingText,placeholderText:Jt.placeholderText,noResultsText:Jt.noResultsText,isSelectlist:!0,itemTemplateContext:{icon:{type:"far",icon:"square-poll-horizontal"}},attr:"name"},initialize(e){let{form:t}=e;this.collection=function(){if(nn)return nn;const e=l().request("bootstrap","currentOrg");nn=e.getForms();const t=nn.reject({published_at:null});return nn.reset(t),nn}(),this.setState({selected:t})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(e){this.triggerMethod("change:form",e)}}),ln=g.ZP.programs.shared.components.dueDayComponent,sn=(0,a.UI)((0,a.w6)(366),(function(e){return{id:e}})),on=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dueDayComponent"))&&o(l,"sameDay"),t))+"</span>"},useData:!0}),rn=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))},useData:!0}),cn=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dueDayComponent"))&&o(l,"defaultText"),t))+"</span>"},useData:!0}),dn=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:101}}}),{name:"formatMessage",hash:{day:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:25},end:{line:1,column:110}}}))+"</span>"},useData:!0}),un=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:76}}}),{name:"formatMessage",hash:{day:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:85}}}))},useData:!0}),hn=T.Z.extend({collection:new(r().Collection)(sn),isCompact:!1,getTemplate:(e,t)=>0===e?on:!e&&t?rn:e?dn:cn,viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:e?"button-secondary--compact":"button-secondary w-100",template:this.getTemplate(n,e)}},picklistOptions:{canClear:!0,headingText:ln.headingText,placeholderText:ln.placeholderText,isSelectlist:!0,itemTemplate:un},initialize(e){let{day:t}=e;const n=this.collection.get(t);this.setState({selected:n})},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},onChangeSelected(e){const t=e?e.id:null;this.triggerMethod("change:day",t)}});let mn;const pn=jt.extend({canClear:!0,initialize(e){let{owner:t,isFromFlow:n}=e;this.collection=function(){if(mn)return mn;const e=l().request("bootstrap","currentOrg");return mn=e.getTeams(),mn}(),n&&(this.defaultText=g.ZP.programs.shared.actionsView.ownerComponent.defaultText),this.setState({selected:t})},onChangeSelected(e){this.triggerMethod("change:owner",e)}});var gn=n(9271),fn=n.n(gn),wn=n(7160),vn=n.n(wn),bn=n(5487),yn=n.n(bn);const{ENTER_KEY:_n}=f.Z,xn=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),kn=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Cn=p.View.extend({className:"pos--relative",template:vn(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==_n||e.preventDefault()},onWatchChange(e){const t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),On=p.View.extend({className:"pos--relative",template:yn(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),Tn=p.View.extend({className(){return this.model.isNew()?"button-secondary w-100 is-disabled":"button-secondary w-100"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+o(s(null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"color"):l,t))+'">'+o((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+"<span>"+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"stateView"))&&r(l,"label"),t))+"</span></span>"},useData:!0}),templateContext:()=>({stateOptions:l().request("bootstrap","currentOrg").getStates().at(0).get("options")}),onRender(){this.model.isNew()||new k.Z({message:g.ZP.programs.sidebar.action.actionSidebarViews.stateView.tooltip,uiView:this,ui:this.$el})}}),Sn=p.View.extend({className:"sidebar__footer flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:154},end:{line:2,column:193}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:125},end:{line:3,column:164}}}))+"</div></div>\n  "},useData:!0})}),Dn=p.View.extend({getTemplate(){return this.model.hasOutreach()?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"headingView"))&&s(l,"headingOutreachText"),t))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"headingView"))&&s(l,"headingText"),t))},useData:!0})}}),Vn=p.View.extend({tagName:"button",className:"button--blue w-100 u-text-align--center",attributes(){return{disabled:this.getOption("isDisabled")}},triggers:{click:"click"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"share-from-square",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+" "+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"formSharingButtonView"))&&o(l,"buttonText"),t))},useData:!0})}),Pn=p.View.extend({className:"sidebar__dialog",triggers:{"click .js-disable":"click"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <h3 class="sidebar__heading flex-grow">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:i,loc:{start:{line:3,column:45},end:{line:3,column:96}}}))+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"label"),t))+'</h3>\n      <button class="button--link js-disable">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"disableButtonText"),t))+'</button>\n    </div>\n    <div class="flex u-margin--t-16">\n      <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"recipientLabel"),t))+'</h4>\n      <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"user-plus",{name:"far",hash:{},data:i,loc:{start:{line:8,column:77},end:{line:8,column:96}}}))+" "+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"recipientDefault"),t))+'</button></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"whenLabel"),t))+'</h4>\n      <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:12,column:77},end:{line:12,column:96}}}))+" "+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"whenDefault"),t))+"</button></div>\n    </div>\n  "},useData:!0})}),Mn=p.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:fn(),regions:{heading:"[data-heading-region]",name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",state:"[data-state-region]",owner:"[data-owner-region]",due:"[data-due-region]",form:"[data-form-region]",formSharing:"[data-form-sharing-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:g.ZP.programs.sidebar.action.layoutView.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"layoutView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext(){return{isNew:this.model.isNew()}},initialize(e){let{action:t}=e;this.action=t,this.model=this.action.clone(),this.listenTo(this.action,{"change:_form change:outreach":this.showHeading,"change:status":this.onChangeActionStatus,"change:_owner":this.onChangeOwner,"change:days_until_due":this.onChangeDueDay})},onChangeActionStatus(){this.showPublished()},onChangeOwner(){this.showOwner()},onChangeDueDay(){this.showDueDay()},onAttach(){(0,b.$)(this.el)},onRender(){this.showHeading(),this.showAction(),this.showTimestamps()},showHeading(){this.showChildView("heading",new Dn({model:this.action}))},showAction(){this.showEditForm(),this.showPublished(),this.showState(),this.showOwner(),this.showDueDay(),this.showForm()},showEditForm(){this.stopListening(this.model),this.model=this.action.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new Cn({model:this.model,action:this.action}))},showDetails(){this.showChildView("details",new On({model:this.model,action:this.action}))},showPublished(){const e=this.action.isNew(),t=!!this.action.get("_program_flow"),n=new Vt({isConditionalAvailable:t,status:this.action.get("status"),state:{isDisabled:e}});this.listenTo(n,"change:status",(e=>{this.action.save({status:e})})),this.showChildView("published",n)},showState(){this.showChildView("state",new Tn({model:this.action}))},showOwner(){const e=this.action.isNew(),t=!!this.action.get("_program_flow"),n=new pn({owner:this.action.getOwner(),isFromFlow:t,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.action.saveOwner(e)})),this.showChildView("owner",n)},showDueDay(){const e=this.action.isNew(),t=new hn({day:this.action.get("days_until_due"),state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.action.save({days_until_due:e})})),this.showChildView("due",t)},showForm(){const e=this.action.isNew(),t=new an({form:this.action.getForm(),state:{isDisabled:e}});this.listenTo(t,{"change:form"(e){this.action.saveForm(e)},"click:form"(e){this.triggerMethod("click:form",e)}}),this.showChildView("form",t)},showTimestamps(){this.action.isNew()||this.showChildView("timestamps",new Sn({model:this.action}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new kn({model:this.model}))},showDisabledSave(){this.showChildView("save",new xn)},onSave(){this.getRegion("save").empty()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showEditForm()}}),En=s.Z.extend({onBeforeStart(e){let{action:t}=e;this.action=t,this.showView(new Mn({action:this.action}))},onStart(){this.showFormSharing(),this.listenTo(this.action,"change:_form change:outreach",this.showFormSharing)},showFormSharing(){if(!l().request("bootstrap","currentOrg:setting","care_team_outreach"))return;if(!this.action.getForm())return void this.showChildView("formSharing",new Vn({isDisabled:!0}));if(!this.action.hasOutreach()){const e=new Vn;return this.listenTo(e,"click",(()=>{this.action.save({outreach:"patient"})})),void this.showChildView("formSharing",e)}const e=new Pn;this.listenTo(e,"click",(()=>{this.action.save({outreach:u.Ww.DISABLED})})),this.showChildView("formSharing",e)},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm"},onSave(e){let{model:t}=e;t.isNew()?this.action.saveAll(t.attributes).done((()=>{const e=this.action.get("_program_flow");e?l().trigger("event-router","programFlow:action",e,this.action.id):l().trigger("event-router","program:action",this.action.get("_program"),this.action.id)})):this.action.save(t.pick("name","details"))},onDelete(){this.action.destroy({wait:!0}).done((()=>{this.stop()})).fail((e=>{let{responseJSON:t}=e;l().request("alert","show:apiError",t)}))},onStop(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),l().request("sidebar","close")},onClickForm(e){l().trigger("event-router","form:preview",e.id)}}),jn=g.ZP.clinicians.shared.components.roleComponent,An=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div><div>"+c(typeof(l=null!=(l=d(n,"label")||(null!=t?d(t,"label"):t))?l:o)===r?l.call(s,{name:"label",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:21}}}):l)+'</div><div class="role-component__details">'+c(typeof(l=null!=(l=d(n,"description")||(null!=t?d(t,"description"):t))?l:o)===r?l.call(s,{name:"description",hash:{},data:i,loc:{start:{line:1,column:64},end:{line:1,column:81}}}):l)+"</div></div>"},useData:!0}),Nn=T.Z.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:{headingText:jn.headingText,itemTemplate:An},viewOptions(){return{className:this.getOption("isCompact")?"button-secondary":"button-secondary w-100",templateContext:{attr:"label",defaultText:jn.defaultText,icon:{type:"far",icon:"shield"}}}},initialize(e){let{role:t}=e;this.collection=l().request("bootstrap","currentOrg:roles"),this.setState({selected:t})},onChangeSelected(e){this.triggerMethod("change:role",e)}}),Fn=p.View.extend({tagName:"li",className(){return this.getOption("isDisabled")?"groups-manager__item is-disabled":"groups-manager__item"},template:m().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--icon groups-manager__remove js-remove">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:1,column:120},end:{line:1,column:139}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((d(n,"far")||t&&d(t,"far")||r).call(o,"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:29}}}):s)+"</span>"+(null!=(l=d(n,"unless").call(o,null!=t?d(t,"isDisabled"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:36},end:{line:1,column:159}}}))?l:"")},useData:!0}),templateContext(){return{isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-remove":"remove"}}),In=p.CollectionView.extend({tagName:"ul",childView:Fn,childViewOptions(){return{isDisabled:this.getOption("isDisabled")}},childViewTriggers:{remove:"remove"},onRemove(e){this.triggerMethod("remove:member",e.model)}}),Rn=T.Z.extend({initialize(){this.listenTo(this.collection,"update",this.show)},popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary groups-manager__droplist",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"groupsManager"))&&o(l,"groupsDroplist"))&&o(l,"addGroup"),t))+"</span>"},useData:!0})},picklistOptions:{attr:"name"},onShow(){const e=this.getOption("isDisabled");this.setState({isDisabled:e||0===this.collection.length})},onPicklistSelect(e){let{model:t}=e;this.triggerMethod("add:member",t),this.popRegion.empty()}}),qn=p.View.extend({className:"groups-manager__wrapper",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"\n    <div data-groups-region></div>\n    <div data-droplist-region></div>\n  "},useData:!0}),regions:{groups:"[data-groups-region]",droplist:"[data-droplist-region]"},initialize(e){let{member:t}=e;this.currentClinician=l().request("bootstrap","currentUser"),this.member=t,this.memberGroups=this.member.getGroups(),this.groups=this.currentClinician.getGroups(),this.groups.remove(this.memberGroups.models)},onRender(){this.showGroups(),this.showDroplist()},showGroups(){const e=this.showChildView("groups",new In({collection:this.memberGroups,isDisabled:this.getOption("isDisabled")}));this.listenTo(e,"remove:member",this.removeMemberGroup)},showDroplist(){if(this.getOption("isDisabled"))return;const e=this.showChildView("droplist",new Rn({collection:this.groups,...this.getOption("droplistOptions")}));this.listenTo(e,"add:member",this.addMemberGroup)},addMemberGroup(e){this.memberGroups.add(e),this.groups.remove(e),this.triggerMethod("add:member",this.member,e)},removeMemberGroup(e){this.memberGroups.remove(e),this.groups.add(e),this.triggerMethod("remove:member",this.member,e)}}),Gn=g.ZP.clinicians.shared.clinicianViews,Ln=qn.extend({removeMemberGroup(e){if(this.member.isNew())return this.memberGroups.remove(e),void this.triggerMethod("remove:member",this.member,e);const t=l().request("modal","show:small",{bodyText:(0,g.SM)(m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"clinicians.shared.clinicianViews.groupsComponent.removeModal.bodyText",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:97}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"team"):t,group:null!=t?o(t,"group"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:121}}}))},useData:!0}),{group:e.get("name"),team:this.member.getTeam().get("name")}),headingText:Gn.groupsComponent.removeModal.headingText,submitText:Gn.groupsComponent.removeModal.submitText,buttonClass:"button--red",onSubmit:()=>{t.destroy(),this.memberGroups.remove(e),this.groups.add(e),this.triggerMethod("remove:member",this.member,e)}})}}),Bn={id:"enabled",state:"active",icon:{type:"fas",icon:"circle-check"},name:Gn.stateComponent.active},Hn={id:"enabled",state:"pending",icon:{type:"fas",icon:"circle-half-stroke"},name:Gn.stateComponent.pending},Zn={id:"disabled",state:"disabled",icon:{type:"far",icon:"circle-minus"},name:Gn.stateComponent.disabled},$n=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state--'+c("function"==typeof(s=null!=(s=d(n,"state")||(null!=t?d(t,"state"):t))?s:r)?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):s)+'">'+c((d(n,"fa")||t&&d(t,"fa")||r).call(o,null!=(l=null!=t?d(t,"icon"):t)?d(l,"type"):l,null!=(l=null!=t?d(t,"icon"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"</span>"},useData:!0}),Wn=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state--'+d(typeof(s=null!=(s=u(n,"state")||(null!=t?u(t,"state"):t))?s:r)===c?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):s)+'">'+d((u(n,"fa")||t&&u(t,"fa")||r).call(o,null!=(l=null!=t?u(t,"icon"):t)?u(l,"type"):l,null!=(l=null!=t?u(t,"icon"):t)?u(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"<span>"+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:75},end:{line:1,column:85}}}):s)+"</span></span>"},useData:!0}),Yn=T.Z.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:()=>({itemTemplate:Wn,headingText:Gn.stateComponent.headingText}),viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:e?$n:Wn}},initialize(e){let{selectedId:t,isActive:n}=e;this.collection=new(r().Collection)([n?Bn:Hn,Zn]),this.setState("selected",this.collection.get(t))}});var Un=n(6467),zn=n.n(Un);const Qn=p.View.extend({className:"pos--relative",template:m().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"clinicians"))&&u(l,"sidebar"))&&u(l,"clinicianSidebarViews"))&&u(l,"nameView"))&&u(l,"placeholder"),t))+'" value="'+r(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:c)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:173},end:{line:2,column:183}}}):s)+'" '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:185},end:{line:2,column:223}}}))?l:"")+" />"+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:c)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:226},end:{line:2,column:251}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(e){this.model.set("name",e.target.value)}}),Xn=p.View.extend({className:"pos--relative",template:m().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"clinicians"))&&u(l,"sidebar"))&&u(l,"clinicianSidebarViews"))&&u(l,"emailView"))&&u(l,"placeholder"),t))+'" value="'+r(typeof(s=null!=(s=u(n,"email")||(null!=t?u(t,"email"):t))?s:c)===d?s.call(o,{name:"email",hash:{},data:i,loc:{start:{line:2,column:174},end:{line:2,column:185}}}):s)+'" '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:187},end:{line:2,column:225}}}))?l:"")+" />"+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:c)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:228},end:{line:2,column:253}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(e){this.model.set("email",e.target.value)}}),Kn=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Jn=p.View.extend({className:"u-margin--t-8 sidebar__save",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"sidebar"))&&s(l,"clinicianSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),ea=p.View.extend({className:"sidebar__info",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-info",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:4},end:{line:2,column:25}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"clinicians"))&&o(l,"sidebar"))&&o(l,"clinicianSidebarViews"))&&o(l,"infoView"))&&o(l,"groupTeamInfo"),t))+"\n  "},useData:!0})}),ta=p.View.extend({className:"sidebar flex-region",template:zn(),triggers:{"click .js-close":"close"},childViewTriggers:{save:"save",cancel:"cancel"},regions:{name:"[data-name-region]",email:"[data-email-region]",save:"[data-save-region]",team:"[data-team-region]",groups:"[data-groups-region]",info:"[data-info-region]",role:"[data-role-region]",state:"[data-state-region]"},initialize(e){let{clinician:t}=e;this.clinician=t,this.listenTo(this.clinician,{"change:enabled":this.onChangeEnabled,"change:_team":this.showInfo,"change:_groups":this.showInfo})},onAttach(){(0,b.$)(this.el)},onChangeEnabled(){this.showState(),this.showRole(),this.showTeam(),this.showGroups()},onRender(){this.showForm(),this.showState(),this.showRole(),this.showTeam(),this.showGroups(),this.showInfo()},cloneClinician(){this.clonedClinician&&this.stopListening(this.clonedClinician),this.clonedClinician=this.clinician.clone()},showName(e){this.showChildView("name",new Qn({model:this.clonedClinician,error:e}))},showEmail(e){this.showChildView("email",new Xn({model:this.clonedClinician,error:e}))},showState(){const e=this.clinician.isActive(),t=this.clinician.get("enabled")?"enabled":"disabled",n=new Yn({isActive:e,selectedId:t});this.listenTo(n,"change:selected",(e=>{this.clinician.save({enabled:"disabled"!==e.id})})),this.showChildView("state",n)},showRole(){const e=!this.clinician.get("enabled"),t=new Nn({role:this.clinician.getRole(),state:{isDisabled:e}});this.listenTo(t,"change:role",(e=>{this.clinician.saveRole(e)})),this.showChildView("role",t)},showTeam(){const e=!this.clinician.get("enabled"),t=new jt({team:this.clinician.get("_team"),state:{isDisabled:e}});this.listenTo(t,"change:team",(e=>{this.clinician.saveTeam(e)})),this.showChildView("team",t)},showGroups(){const e=this.showChildView("groups",new Ln({member:this.clinician,droplistOptions:{isDisabled:!this.clinician.get("enabled")}}));this.listenTo(e,{"add:member"(e,t){t.addClinician(e)},"remove:member"(e,t){t.removeClinician(e)}})},showSave(){this.clonedClinician.isValid()?this.showChildView("save",new Kn({model:this.clonedClinician})):this.showDisabledSave()},showDisabledSave(){this.showChildView("save",new Jn)},showForm(){this.cloneClinician(),this.listenTo(this.clonedClinician,"change:name change:email",this.showSave),this.getRegion("save").empty(),this.showName(),this.showEmail()},showInfo(){this.clinician.hasTeam()&&0!==this.clinician.getGroups().length?this.getRegion("info").empty():this.showChildView("info",new ea)},showErrors(e){let{name:t,email:n}=e;this.showName(t),this.showEmail(n),this.showDisabledSave()},onSave(){this.getRegion("save").empty()},onCancel(){this.showForm()}}),na=s.Z.extend({onBeforeStart(e){let{clinician:t}=e;this.clinician=t,this.showView(new ta({clinician:t}))},viewEvents:{save:"onSave",close:"stop"},onSave(e){let{model:t}=e;this.clinician.save(t.attributes).then((()=>{l().trigger("event-router","clinician",this.clinician.id)}),(e=>{let{responseJSON:t}=e;const n=this.clinician.parseErrors(t);this.getView().showErrors(n)}))},onStop(){this.clinician.trigger("editing",!1),l().request("sidebar","close"),l().trigger("event-router","clinicians:all")}});var aa=n(4059),ia=n.n(aa),la=n(6031);const sa={propertyOf:a.MN,escape:a.YU},oa=/{{\s*fields.([\w\-.]+?)\s*}}/g,ra=/{{\s*patient.([\w\-.]+?)\s*}}/g,ca=/({{\s*value\s*}})/g,da=/{{\s*value(?:\.([\w\-.]+?))?\s*}}/g,ua=/{{\s*widget.([\w\-.]+?)\s*}}/g,ha={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ma=/\\|'|\r|\n|\u2028|\u2029/g;function pa(e){return`\\${ha[e]}`}function ga(e){return`'+\n((__t=(${e}))==null?'':escape(__t))+\n'`}function fa(e,t){let n="";return(0,a.S6)(t.split("."),(e=>{n+=`'${e}',`})),ga(`propertyOf(data.${e})([${n}])`)}function wa(e,t,n,i){return(0,a.mf)(e)?new e((0,a.l7)({model:t},i,n.get("definition"))):new p.View((0,a.l7)({model:t},i,n.get("definition"),e))}function va(e,t){return t.length?(0,a.MN)(e)(t):e}function ba(e){let{fields:t,name:n,key:a,childValue:i}=e;const l=a&&a.split(".")||[];if(i)return va(i,l);l.length&&!n&&(n=l.shift());const s=t.find({name:n});return s?va(s.getValue(),l):void 0}const ya={dob:{modelEvents:{"change:birth_date":"render"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.widgets.widgets.dob",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:60}}}),{name:"formatHTMLMessage",hash:{age:null!=t?o(t,"age"):t,dob:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"dob"):t,"LONG",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:1,column:65},end:{line:1,column:117}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:127}}}))},useData:!0}),templateContext(){const e=this.model.get("birth_date");return{dob:e,age:d()().diff(d()(e,"YYYY-MM-DD"),"years")}}},sex:{modelEvents:{"change:sex":"render"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.widgets.widgets.sex",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:56}}}),{name:"formatMessage",hash:{sex:null!=t?o(t,"sex"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:66}}}))},useData:!0})},status:{modelEvents:{"change:status":"render"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="widgets__status-'+r("function"==typeof(l=null!=(l=c(n,"status")||(null!=t?c(t,"status"):t))?l:o)?l.call(s,{name:"status",hash:{},data:i,loc:{start:{line:1,column:29},end:{line:1,column:41}}}):l)+'">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.widgets.widgets.status",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:59},end:{line:1,column:102}}}),{name:"formatMessage",hash:{status:null!=t?c(t,"status"):t},data:i,loc:{start:{line:1,column:43},end:{line:1,column:118}}}))+"</span>"},useData:!0})},divider:{template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="widgets__divider"></div>'},useData:!0})},groups:{modelEvents:{"change:_groups":"render"},template:m().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"groups"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:51}}}))?l:""},useData:!0}),templateContext(){return{groups:(0,a.UI)(this.model.getGroups().models,"attributes")}}},patientIdentifiers:{className:"widgets-value",template:m().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=this.model.get("identifiers"),n=this.getOption("identifier_type"),i=(0,a.sE)(t,{type:n});return{displayValue:i&&i.value,defaultHtml:e}}},optionsWidget:{className:"widgets-value",template:m().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=ba({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});return{displayValue:this.getOption("display_options")[t]||t,defaultHtml:e}}},phoneWidget:{className:"widgets-value",template:m().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=ba({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});if(!t)return{defaultHtml:e};const n=(0,la._)(t,"US");return{displayValue:n?n.formatNational():null,defaultHtml:e}}},fieldWidget:{className:"widgets-value",template:m().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html");return{displayValue:ba({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")}),defaultHtml:e}}},templateWidget:p.View.extend({className:"widgets-value",initialize(){this.childValue=this.getOption("childValue"),this.template=function(e,t){let n=0,i="";const l=[],s=[],o=RegExp(`${[oa.source,ra.source,ca.source,da.source,ua.source].join("|")}|$`,"g");e.replace(o,(function(t,o,r,c,d,u,h){return i+=e.slice(n,h).replace(ma,pa),n=h+t.length,c&&(i+=ga("data.value")),d&&(i+=fa("value",d)),o&&(l.push((0,a.Ps)(o.split("."))),i+=fa("fields",o)),r&&(i+=fa("patient",r)),u&&(s.push(u),i+=`<span data-${u}-region></span>`),t})),i=`var __t;\nreturn '${i}';\n`;const r=new Function("data","{ propertyOf, escape }",i),c=function(e){const n=e.getFields(),i=(0,a.u4)(l,((e,t)=>{const a=n.find({name:t});return a?(e[t]=a.get("value"),e):e}),{}),s={patient:e.attributes,fields:i,value:t};return r.call(this,s,sa)};return c.widgetNames=s,c}(this.template,this.childValue),this.nestedWidgets=this.template.widgetNames;const e=(0,a.u4)(this.nestedWidgets,((e,t)=>(e[t]=`[data-${t}-region]`,e)),{});this.addRegions(e)},serializeData(){return this.model},onRender(){(0,a.S6)(this.nestedWidgets,(e=>{const t=l().request("entities","widgets:model",e),n=ya[t.get("widget_type")];this.showChildView(e,wa(n,this.model,t,{tagName:"span",childValue:this.childValue}))}))}}),arrayWidget:p.CollectionView.extend({className:"widgets-value",childWidget:{widget_type:"fieldWidget",definition:{}},getArrayValue(e){const t=this.getOption("filter_value");t&&(e=(0,a.hX)(e,t));const n=this.getOption("reject_value");return n&&(e=(0,a.d1)(e,n)),e},initialize(e){let{child_widget:t,field_name:n,key:i,childValue:s}=e;const o=ba({fields:this.model.getFields(),name:n,key:i,childValue:s});(0,a.S6)(this.getArrayValue(o),(e=>{const n=l().request("entities","widgets:model",t||this.childWidget),a=ya[n.get("widget_type")];this.addChildView(wa(a,this.model,n,{childValue:e}))}))},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"defaultHtml")||(null!=t?s(t,"defaultHtml"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}):l)},useData:!0}),templateContext(){return{defaultHtml:this.getOption("default_html")}}}),formWidget:p.View.extend({className:"button-primary widgets__form-widget",tagName:"button",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))+" "+r("function"==typeof(l=null!=(l=c(n,"formName")||(null!=t?c(t,"formName"):t))?l:o)?l.call(s,{name:"formName",hash:{},data:i,loc:{start:{line:1,column:33},end:{line:1,column:45}}}):l)+" "+r((c(n,"far")||t&&c(t,"far")||o).call(s,"up-right-and-down-left-from-center",{name:"far",hash:{},data:i,loc:{start:{line:1,column:46},end:{line:1,column:90}}}))},useData:!0}),templateContext(){return{formName:this.getOption("form_name")}},triggers:{click:"click"},onClick(){if(this.getOption("is_modal")){const e=l().request("entities","forms:model",this.getOption("form_id"));l().request("modal","show:form",this.model,this.getOption("form_name"),e,this.getOption("modal_size"))}else l().trigger("event-router","form:patient",this.model.id,this.getOption("form_id"))}}),dateTimeWidget:{template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"dateTime"):t,null!=t?l(t,"format"):t,{name:"formatDateTime",hash:{defaultHtml:null!=t?l(t,"defaultHtml"):t,inputFormat:null!=t?l(t,"inputFormat"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:82}}}))},useData:!0}),templateContext(){const e=ba({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});return{format:this.getOption("format")||"TIME_OR_DAY",inputFormat:this.getOption("input_format"),dateTime:e,defaultHtml:this.getOption("default_html")}}}},_a=ya,xa=p.View.extend({className(){return this.getOption("itemClassName")},template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="widgets__heading">'+e.escapeExpression(e.lambda(null!=(l=null!=t?s(t,"definition"):t)?s(l,"display_name"):l,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=t?s(t,"definition"):t)?s(l,"display_name"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:103}}}))?l:"")+'<div class="widgets__item" data-content-region></div>'},useData:!0}),regions:{content:"[data-content-region]"},onRender(){const e=this.getOption("widget"),t=this.getOption("patient");this.showChildView("content",wa(e,t,this.model))}}),ka=p.CollectionView.extend({childView:xa,childViewOptions(e){const t=_a[e.get("widget_type")];return{itemClassName:this.getOption("itemClassName"),widget:t,model:e,patient:this.model}},viewFilter(e){let{model:t}=e;return t.get("widget_type")},viewComparator:!1}),Ca=ka.extend({itemClassName:"patient-sidebar__section"}),Oa=p.View.extend({className:"sidebar sidebar--small flex-region",template:ia(),regions:{widgets:{el:"[data-widgets-region]",regionClass:y.Z}},triggers:{"click .js-close":"close","click .js-patient":"click:patient"},onAttach(){(0,b.$)(this.el)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.id)}}),Ta=s.Z.extend({onBeforeStart(e){let{patient:t}=e;this.showView(new Oa({model:t})),this.getRegion("widgets").startPreloader()},beforeStart(e){let{patient:t}=e;return[l().request("entities","fetch:patients:model",t.id),...(0,a.UI)(l().request("bootstrap","sidebarWidgets:fields"),(e=>l().request("entities","fetch:patientFields:model",t.id,e)))]},onStart(e){let{patient:t}=e;const n=l().request("bootstrap","sidebarWidgets");this.showChildView("widgets",new Ca({model:t,collection:n}))},viewEvents:{close:"stop"},onStop(){l().request("sidebar","close")}});var Sa=n(8327),Da=n.n(Sa);const Va=g.ZP.patients.sidebar.filters.filtersSidebarViews.groupLabelView,Pa=T.Z.extend({popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)},useData:!0})},picklistOptions:{attr:"name"}}),Ma=p.View.extend({className:"flex flex-align-center u-margin--b-8",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h4 class="sidebar__label">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:41}}}):l)+'</h4>\n    <div class="flex-grow" data-filter-button></div>\n  '},useData:!0}),regions:{filterButton:"[data-filter-button]"},initialize(e){let{state:t}=e;this.state=t,this.slug=this.model.get("slug"),this.listenTo(t,`change:${this.slug}`,this.render)},onRender(){const e=this.getOptions(),t=e.get(this.state.get(this.slug))||e.at(0),n=new Pa({collection:e,state:{selected:t}});this.listenTo(n.getState(),"change:selected",((e,t)=>{let{id:n}=t;this.state.set(this.slug,n)})),this.showChildView("filterButton",n)},getOptions(){const e=this.model.getOptions().clone();return e.unshift({id:null,name:g.ZP.patients.sidebar.filters.filtersSidebarViews.customFilterView.defaultText}),e}}),Ea=p.CollectionView.extend({childView:Ma,childViewOptions(){return{state:this.getOption("state")}}}),ja=p.View.extend({tagName:"span",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:1,column:1},end:{line:1,column:17}}}):l)+")"},useData:!0}),templateContext(){return{filtersCount:this.getOption("filtersCount")}}}),Aa=p.View.extend({className:"sidebar flex-region",template:Da(),modelEvents:{change:"showFiltersCountView"},regions:{customFilters:"[data-custom-filters-region]",count:{el:"[data-count-region]",replaceElement:!0}},triggers:{"click .js-close":"close","click .js-clear-filters":"click:clearFilters"},onAttach(){(0,b.$)(this.el)},onRender(){this.showFiltersCountView()},showFiltersCountView(){const e=(0,a.dp)(this.model.omit(a.Ft));e?this.showChildView("count",new ja({filtersCount:e})):this.getRegion("count").empty()}}),Na=s.Z.extend({onStart(){this.currentClinician=l().request("bootstrap","currentUser"),this.directories=l().request("bootstrap","currentOrg:directories"),this.showView(new Aa({model:this.getState()})),this.showCustomFiltersView()},viewEvents:{close:"stop","click:clearFilters":"onClearFilters"},showCustomFiltersView(){const e=this.directories.clone(),t=this.currentClinician.getGroups();t.length>1&&(e.unshift({name:Va,slug:"groupId"}).options=t);const n=new Ea({collection:e,state:this.getState()});this.showChildView("customFilters",n)},onClearFilters(){this.getState().clear()},onStop(){l().request("sidebar","close")}}),Fa=s.Z.extend({channelName:"sidebar",radioRequests:{close:"closeSidebar",start:"startSidebarApp"},childApps:{action:$e,flow:ot,program:Ct,programFlow:Kt,programAction:En,clinician:na,patient:Ta,filters:Na},startSidebarApp(e,t){if(this.isStarting)return;this.isStarting=!0,this.stopSidebarApp();const n=(0,a.l7)({region:this.getRegion()},t);return this.currentApp=this.startChildApp(e,n),this.isStarting=!1,this.getChannel().trigger("show",this.currentApp),this.currentApp},closeSidebar(){const e=this.currentApp;this.stopSidebarApp(),this.getRegion().empty(),this.getChannel().trigger("close",e)},stopSidebarApp(){this.currentApp&&(this.currentApp.stop(),delete this.currentApp)}});var Ia=n(6125),Ra=n(5251),qa=n(6807);const Ga=m().template({1:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="u-margin--t-8 qa-search-option">\n        <span class="patient-search__search-by-label">'+o(s(null!=t?r(t,"label"):t,t))+"</span>\n        "+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"emptyView"))&&r(l,"exampleId"),t))+" "+o(s(null!=t?r(t,"example"):t,t))+"\n      </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="patient-search__tip">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"searchTip"),t))+'</div>\n  <div class="patient-search__search-by">\n    <div class="patient-search__search-by-title">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"searchBy"),t))+'</div>\n    <div class="u-margin--t-8 qa-search-option">\n      <span class="patient-search__search-by-label">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"exampleDobLabel"),t))+"</span>\n      "+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"exampleDob"),t))+"\n    </div>\n"+(null!=(l=c(n,"each").call(r,null!=(l=null!=t?c(t,"settings"):t)?c(l,"identifiers"):l,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:4},end:{line:14,column:13}}}))?l:"")+'  </div>\n  <div class="patient-search__shortcut">'+o((c(n,"fas")||t&&c(t,"fas")||e.hooks.helperMissing).call(r,"keyboard",{name:"fas",hash:{},data:i,loc:{start:{line:16,column:40},end:{line:16,column:58}}}))+'<strong class="u-margin--l-8">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"shortcut"),t))+"</strong></div>\n"},useData:!0}),La=p.View.extend({collectionEvents:{search:"render"},tagName:"li",className:"patient-search__no-results",initialize(e){let{state:t}=e;this.state=t,this.listenTo(this.state,"change:search",this.render)},templateContext:()=>({settings:l().request("bootstrap","currentOrg:setting","patient_search")}),getTemplate(){const e=this.state.get("search");return!e||e.length<3?Ga:this.collection.isSearching?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"emptyView"))&&s(l,"searching"),t))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"emptyView"))&&s(l,"noResults"),t))},useData:!0})}}),Ba=p.View.extend({tagName:"li",className:"js-picklist-item patient-search__picklist-item",initialize(e){let{state:t}=e;this.state=t,this.listenTo(this.state,"change:search",this.render)},triggers:{click:"select"},onSelect(){this.state.set({selected:this.model})},template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="patient-search__picklist-item-identifier u-text--overflow">\n          '+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?s(t,"identifiers"):t)?s(l,"0"):l)?s(l,"value"):l,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i,loc:{start:{line:11,column:10},end:{line:11,column:99}}}))?l:"")+"\n        </div>\n"},2:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"matchText")||t&&s(t,"matchText")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?s(t,"identifiers"):t)?s(l,"0"):l)?s(l,"value"):l,null!=t?s(t,"search"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:11,column:37},end:{line:11,column:77}}}))},4:function(e,t,n,a,i){return"&ndash;"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="patient-search__picklist-item-name u-text--overflow">\n      <span>'+c((d(n,"matchText")||t&&d(t,"matchText")||r).call(o,null!=t?d(t,"name"):t,null!=t?d(t,"search"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:3,column:12},end:{line:3,column:37}}}))+c("function"==typeof(s=null!=(s=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?s:r)?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:62}}}):s)+'</span>\n    </div>\n    <div class="patient-search__picklist-item-meta">\n      <div class="patient-search__picklist-item-dob u-text--overflow">\n        '+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(o,null!=t?d(t,"birth_date"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:8},end:{line:7,column:50}}}))+"\n      </div>\n"+(null!=(l=d(n,"if").call(o,null!=t?d(t,"hasIdentifiers"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{name:`${this.model.get("first_name")} ${this.model.get("last_name")}`,search:this.state.get("search"),hasIdentifiers:this.collection.hasIdentifiers()}}}),Ha=p.CollectionView.extend({tagName:"ul",serializeCollection:a.ZT,childView:Ba,childViewOptions(){return{collection:this.collection,state:this.model}},onRenderChildren(){this.$(".js-picklist-item").removeClass("is-highlighted"),this.model.get("search")&&this.$(".js-picklist-item").first().addClass("is-highlighted")},emptyView:La}),Za=p.View.extend({className:"patient-search__picklist-header",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="patient-search__picklist-header-identifier">\n        '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"headerView"))&&s(l,"id"),t))+"\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="patient-search__picklist-header-name">\n      '+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"headerView"))&&r(l,"patient"),t))+'\n    </div>\n    <div class="patient-search__picklist-header-meta">\n      <div class="patient-search__picklist-header-dob">\n        '+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"headerView"))&&r(l,"dob"),t))+"\n      </div>\n"+(null!=(l=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasIdentifiers"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{hasIdentifiers:this.collection.hasIdentifiers()}}}),$a=p.View.extend({className:"patient-search__picklist",collectionEvents:{search:"showHeader"},modelEvents:{"change:search":"showHeader"},behaviors:[{behaviorClass:Ra.Z,selector:".js-input"},_.Z,qa.Z],triggers:{"focus @ui.input":"focus"},ui:{input:".js-input"},regionClass:p.Region.extend({replaceElement:!0}),regions:{header:"[data-header-region]",list:"[data-list-region]"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="modal__header patient-search__header">\n      <span class="modal__header-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(o,"magnifying-glass",{name:"far",hash:{},data:i,loc:{start:{line:3,column:39},end:{line:3,column:65}}}))+'</span>\n      <input type="text" class="js-input patient-search__input" placeholder="'+c(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"globals"))&&d(l,"search"))&&d(l,"patientSearchViews"))&&d(l,"dialogView"))&&d(l,"placeholderText"),t))+'" value="'+c("function"==typeof(s=null!=(s=d(n,"search")||(null!=t?d(t,"search"):t))?s:r)?s.call(o,{name:"search",hash:{},data:i,loc:{start:{line:4,column:158},end:{line:4,column:170}}}):s)+'">\n    </div>\n    <div class="flex-region picklist__scroll js-picklist-scroll">\n      <div data-header-region></div>\n      <div data-list-region></div>\n    </div>\n  '},useData:!0}),onRender(){this.showHeader(),this.showChildView("list",new Ha({collection:this.collection,model:this.model}))},showHeader(){this.collection.length?this.showChildView("header",new Za({collection:this.collection})):this.getRegion("header").empty()}}),Wa=Ia.Z.extend({initialize:function(e){this.mergeOptions(e,["collection"])},viewOptions(){return{model:this.getState(),collection:this.collection}},ViewClass:$a,viewEvents:{"watch:change":"onWatchChange"},onWatchChange(e){this.setState("search",e)}}),Ya=p.View.extend({className:"modal",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a href="#" class="button--icon patient-search__close js-close">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"far",hash:{},data:i,loc:{start:{line:2,column:68},end:{line:2,column:83}}}))+"</a>\n    <div data-picklist-region></div>\n  "},useData:!0}),triggers:{"click .js-close":"close"},regions:{picklist:{el:"[data-picklist-region]",replaceElement:!0}},serializeCollection:a.ZT,onRender(){const e=this.collection,t=this.getOption("prefillText"),n=new Wa({collection:e,state:{search:t}});this.listenTo(n.getState(),{"change:search":this.onChangeSearch,"change:selected":this.onChangeSelected}),this.showChildView("picklist",n),t&&this.collection.search(t),this.listenTo(n.getView(),"close",this.destroy)},onChangeSearch(e,t){this.collection.search(t)},onChangeSelected(e,t){this.triggerMethod("search:select",t)},onClose(){this.destroy()}}),Ua=s.Z.extend({onStart(e){let{prefillText:t}=e;const n=new Ya({collection:l().request("entities","searchPatients:collection"),prefillText:t});this.listenTo(n,{"search:select"(e){l().trigger("event-router","patient:dashboard",e.get("_patient")),n.destroy()},destroy(){this.stop()}}),l().request("modal","show:custom",n)}}),za=g.ZP.globals.appNav.appNavViews,Qa=T.Z.extend({popWidth:"248px",viewOptions:{tagName:"div",className:"app-nav__header",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n      <div>\n        <h2 class="app-nav__header-title u-text--overflow">'+c(typeof(l=null!=(l=d(n,"orgName")||(null!=t?d(t,"orgName"):t))?l:o)===r?l.call(s,{name:"orgName",hash:{},data:i,loc:{start:{line:3,column:59},end:{line:3,column:72}}}):l)+'</h2>\n        <span class="app-nav__header-arrow">'+c((d(n,"far")||t&&d(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:4,column:44},end:{line:4,column:64}}}))+'</span>\n      </div>\n      <div class="u-text--overflow">'+c(typeof(l=null!=(l=d(n,"userName")||(null!=t?d(t,"userName"):t))?l:o)===r?l.call(s,{name:"userName",hash:{},data:i,loc:{start:{line:6,column:36},end:{line:6,column:50}}}):l)+"</div>\n    "},useData:!0}),templateContext(){const e=l().request("bootstrap","currentUser"),t=l().request("bootstrap","currentOrg");return{userName:e.get("name"),orgName:t.get("name")}}},picklistOptions(){return{className:"picklist app-nav__picklist",headingText:l().request("bootstrap","currentOrg").get("name"),lists:[{collection:this.collection,itemTemplate:m().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"arrow-up-right-from-square",{name:"far",hash:{},data:i,loc:{start:{line:5,column:12},end:{line:5,column:48}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n          "+r((c(n,"fa")||t&&c(t,"fa")||o).call(s,null!=(l=null!=t?c(t,"icon"):t)?c(l,"type"):l,null!=(l=null!=t?c(t,"icon"):t)?c(l,"icon"):l,{name:"fa",hash:{classes:null!=(l=null!=t?c(t,"icon"):t)?c(l,"classes"):l},data:i,loc:{start:{line:2,column:10},end:{line:2,column:58}}}))+"<span>"+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,null!=t?c(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:3,column:16},end:{line:3,column:38}}}))+"</span>"+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isExternalLink"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:10},end:{line:6,column:17}}}))?l:"")+"        "},useData:!0})}]}},picklistEvents:{"picklist:item:select":"onSelect"},onSelect(e){let{model:t}=e;t.get("onSelect")()}}),Xa=p.View.extend({className:"app-nav",regions:{navMain:{el:"[data-nav-main-region]",replaceElement:!0},navContent:"[data-nav-content-region]"},triggers:{"click .js-add-patient":"click:addPatient"},template:m().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="app-nav__bottom-button app-nav__link js-add-patient">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:4,column:93},end:{line:4,column:114}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"appNav"))&&o(l,"appNavViews"))&&o(l,"appNavView"))&&o(l,"addPatient"),t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-nav-main-region></div>\n    <div class="overflow-y" data-nav-content-region></div>\n    '+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"canPatientCreate"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:187}}}))?l:"")+"\n  "},useData:!0}),templateContext(){const e=l().request("bootstrap","currentUser");return{canPatientCreate:l().request("bootstrap","currentOrg:setting","manual_patient_creation")&&e.can("patients:manage")}},removeSelected(){this.$(".is-selected").removeClass("is-selected")}}),Ka=p.View.extend({className(){const e="app-nav__link";return this.model.get("className")?`${e} ${this.model.get("className")}`:e},tagName:"a",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatMessage")||t&&l(t,"formatMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}),triggers:{click:"click"},modelEvents:{selected:"onSelected"},onClick(){l().trigger("event-router",this.model.get("event"),...this.model.get("eventArgs"))},onSelected(){this.$el.addClass("is-selected")}}),Ja=p.CollectionView.extend({childView:Ka}),ei=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h3 class="app-nav__search app-nav__link js-search">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"magnifying-glass",{name:"far",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:82}}}))+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"appNav"))&&r(l,"appNavViews"))&&r(l,"patientsAppNav"))&&r(l,"searchTitle"),t))+'</h3>\n    <h3 class="app-nav__title">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"appNav"))&&r(l,"appNavViews"))&&r(l,"patientsAppNav"))&&r(l,"worklistsTitle"),t))+"</h3>\n    <div data-worklists-region></div>\n  "},useData:!0}),regions:{worklists:"[data-worklists-region]"},triggers:{"click @ui.search":"search"},ui:{search:".js-search"},onSearchActive(e){this.isDestroyed()||this.ui.search.toggleClass("is-active",e)}});var ti=n(8381),ni=n(5616),ai=n.n(ni);const ii=g.ZP.globals.patientModal.patientModalViews,li=p.View.extend({behaviors(){if(this.getOption("shouldFocus"))return[{behaviorClass:Ra.Z,selector:".js-input"}]},className:"pos--relative",template:m().template({1:function(e,t,n,a,i){return"has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient-modal__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:78}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasError"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:47},end:{line:2,column:79}}}))?l:"")+'" placeholder="'+d(typeof(s=null!=(s=u(n,"placeholder")||(null!=t?u(t,"placeholder"):t))?s:r)===c?s.call(o,{name:"placeholder",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:111}}}):s)+'" value="'+d(typeof(s=null!=(s=u(n,"value")||(null!=t?u(t,"value"):t))?s:r)===c?s.call(o,{name:"value",hash:{},data:i,loc:{start:{line:2,column:120},end:{line:2,column:131}}}):s)+'" '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:133},end:{line:2,column:171}}}))?l:"")+" />\n    "+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:96}}}))?l:"")+"\n  "},useData:!0}),templateContext(){const e=this.getOption("state").get("errors");return{hasError:e&&e[this.getOption("errorField")],placeholder:this.getOption("placeholder"),value:this.model.get(this.getOption("attr")),canEdit:this.model.canEdit()}},ui:{input:".js-input"},events:{"input @ui.input":"onChange"},initialize(e){let{state:t}=e;this.listenTo(t,"change:errors",this.render)},onChange(){const e=this.ui.input.val();this.model.set(this.getOption("attr"),(0,v.Z)(e))},onDomRefresh(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),si=T.Z.extend({initialize(e){let{model:t}=e;const n=t.get("sex");this.collection=new(r().Collection)([{text:ii.sexDroplist.male,value:"m"},{text:ii.sexDroplist.female,value:"f"},{text:ii.sexDroplist.other,value:"u"}]),this.setState("selected",this.collection.find({value:n}))},viewOptions:{className:"button-secondary modal__form-component",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"patientModal"))&&s(l,"patientModalViews"))&&s(l,"sexDroplist"))&&s(l,"defaultText"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((d(n,"far")||t&&d(t,"far")||r).call(o,"user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:14}}}))+c("function"==typeof(s=null!=(s=d(n,"text")||(null!=t?d(t,"text"):t))?s:r)?s.call(o,{name:"text",hash:{},data:i,loc:{start:{line:1,column:14},end:{line:1,column:24}}}):s)+(null!=(l=d(n,"unless").call(o,null!=t?d(t,"text"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:24},end:{line:1,column:125}}}))?l:"")},useData:!0})}}),oi=p.View.extend({className:"modal__form-component",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"<div data-date-select-region></div>"},useData:!0}),regions:{dateSelect:{el:"[data-date-select-region]",replaceElement:!0}},onChangeDate(e,t){e.set("hasError",t&&t.isAfter()),this.triggerMethod("change:selected",t)},onRender(){const e=new ti.Z({state:{selectedDate:this.model.get("birth_date"),isDisabled:!this.model.canEdit()},viewOptions:{className:"flex"}});this.listenTo(e,"change:date",this.onChangeDate),this.showChildView("dateSelect",e)}}),ri=p.View.extend({className:"modal__footer-info modal__error",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <a class="u-margin--l-8 u-text-link js-search">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"patientModal"))&&s(l,"patientModalViews"))&&s(l,"errorView"))&&s(l,"searchBtn"),t))+"</a>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"error")||(null!=t?r(t,"error"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"error",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:11}}}):s)+(null!=(l=r(n,"if").call(o,null!=t?r(t,"hasSearch"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:11},end:{line:1,column:155}}}))?l:"")},useData:!0}),templateContext(){return{error:this.getOption("error")||ii.errorView.errors[this.getOption("errorCode")],hasSearch:this.getOption("hasSearch")}},triggers:{"click .js-search":"click:search"}}),ci=p.View.extend({className:"modal__content",regions:{firstName:"[data-first-name-region]",lastName:"[data-last-name-region]",dob:"[data-dob-region]",sex:"[data-sex-region]",groups:"[data-groups-region]"},modelEvents:{change:"onChange"},template:ai(),templateContext(){return{isNew:this.model.isNew(),canEdit:this.model.canEdit()}},initialize(e){let{state:t}=e;this.initState({state:t})},onRender(){this.showFirstNameView(),this.showLastNameView(),this.showSexDroplist(),this.showBirthDatePicker(),this.showGroupsComponent()},showFirstNameView(){this.showChildView("firstName",new li({model:this.model,state:this.getState(),attr:"first_name",placeholder:ii.patientModal.firstName,errorField:"name",shouldFocus:!0}))},showLastNameView(){this.showChildView("lastName",new li({model:this.model,state:this.getState(),attr:"last_name",placeholder:ii.patientModal.lastName,errorField:"name"}))},showSexDroplist(){const e=this.showChildView("sex",new si({model:this.model,state:{isDisabled:!this.model.canEdit()}}));this.listenTo(e,{"change:selected"(e){this.model.set("sex",e.get("value"))}})},showBirthDatePicker(){const e=this.showChildView("dob",new oi({model:this.model,state:this.getState()}));this.listenTo(e,{"change:selected"(e){this.model.set("birth_date",e?e.format("YYYY-MM-DD"):null)}})},showGroupsComponent(){const e=this.showChildView("groups",new qn({member:this.model,isDisabled:!this.model.canEdit()}));this.listenTo(e,{"add:member"(e,t){this.model.addGroup(t)},"remove:member"(e,t){this.model.removeGroup(t)}})}});(0,C.j_)(ci);const di=new(r().Collection)([{onSelect(){l().trigger("event-router","default")},id:"PatientsApp",icon:{type:"far",icon:"window"},text:za.mainNav.patients},{onSelect(){l().trigger("event-router","dashboards:all")},id:"DashboardsApp",text:za.mainNav.dashboards,icon:{type:"far",icon:"gauge"}},{onSelect(){l().trigger("event-router","programs:all")},id:"ProgramsApp",text:za.mainNav.programs,icon:{type:"far",icon:"screwdriver-wrench"}},{onSelect(){l().trigger("event-router","clinicians:all")},id:"CliniciansApp",text:za.mainNav.clinicians,icon:{type:"far",icon:"users-gear"}},{onSelect(){window.open("https://help.roundingwell.com/")},text:za.mainNav.help,isExternalLink:!0,icon:{type:"far",icon:"life-ring"}},{onSelect(){l().request("auth","logout")},hasDivider:!0,text:za.mainNav.signOut,icon:{type:"fas",icon:"right-from-bracket"}}]),ui=new(r().Collection)([{text:za.patientsAppNav.ownedBy,event:"worklist",eventArgs:["owned-by"]},{text:za.patientsAppNav.schedule,event:"schedule",eventArgs:[],className:"app-nav__spacer"},{text:za.patientsAppNav.sharedBy,event:"worklist",eventArgs:["shared-by"],className:"app-nav__spacer"},{text:za.patientsAppNav.newPastDay,event:"worklist",eventArgs:["new-past-day"]},{text:za.patientsAppNav.updatedPastThree,event:"worklist",eventArgs:["updated-past-three-days"]},{text:za.patientsAppNav.doneLastThirty,event:"worklist",eventArgs:["done-last-thirty-days"]}]),hi=s.Z.extend({startAfterInitialized:!0,channelName:"nav",radioRequests:{search:"showSearch",patient:"showPatientModal",select:"selectNav"},stateEvents:{"change:currentApp":"onChangeCurrentApp"},viewEvents:{"click:addPatient":"onClickAddPatient"},childApps:{search:Ua},selectNav(e,t,n){this.setState("currentApp",e);const i=this.getNavMatch(e,t,(0,a.oA)(n));i&&(this.getView().removeSelected(),i.trigger("selected"))},onChangeCurrentApp(e,t){this.setMainNav(t),this.getView().removeSelected()},getNavMatch(e,t,n){return this._navMatch(ui,t,n)},_navMatch:(e,t,n)=>e.find((e=>e.get("event")===t&&(0,a.Xy)(e.get("eventArgs"),n))),onStart(){const e=l().request("bootstrap","currentUser");e.can("dashboards:view")||di.remove("DashboardsApp"),e.can("clinicians:manage")||di.remove("CliniciansApp"),e.can("programs:manage")||di.remove("ProgramsApp"),3===di.length&&di.remove("PatientsApp"),e.can("app:schedule:reduced")&&ui.reset(ui.filter({event:"schedule"})),this.setView(new Xa),this.mainNav=new Qa({collection:di}),this.showChildView("navMain",this.mainNav),this.showNav(),this.showView()},setMainNav(e){const t=di.get(e);t&&this.mainNav.setState("selected",t)},showNav(){const e=new ei,t=new Ja({collection:ui});e.showChildView("worklists",t),this.listenTo(e,"search",(()=>{this.showSearch()}));const n=l().channel("hotkey");e.listenTo(n,"search",(e=>{e.preventDefault(),this.showSearch()})),this.showChildView("navContent",e)},showSearch(e){const t=this.getChildView("navContent"),n=this.startChildApp("search",{prefillText:e});this.listenTo(n,"stop",(()=>{t.triggerMethod("search:active",!1)})),t.triggerMethod("search:active",!0)},onClickAddPatient(){this.showPatientModal()},getNewPatient(){const e=l().request("bootstrap","currentUser").getGroups();return 1===e.length?l().request("entities","patients:model",{_groups:[{id:e.first().id}]}):l().request("entities","patients:model")},showPatientModal(e){const t=(e=e||this.getNewPatient()).clone(),n=l().request("modal","show",function(e){const t=e.patient,n=new ci({model:t});if(t.canEdit()){const i=t.isNew()?"add":"edit";return(0,a.l7)({bodyView:n,headerIcon:"address-card"},ii.patientModal[i],e)}return(0,a.l7)({bodyView:n,cancelText:!1,headerIcon:"address-card",infoText:ii.patientModal.patientAccountManaged},ii.patientModal.view,e)}({patient:t,onSubmit:()=>{e.canEdit()?(n.disableSubmit(),e.saveAll(t.attributes).then((e=>{let{data:t}=e;l().trigger("event-router","patient:dashboard",t.id),n.destroy()})).fail((e=>{let{responseJSON:a}=e;const i=a.errors[0].detail;n.getChildView("body").setState({errors:{name:i}});const l=new ri({hasSearch:!0,error:i});n.listenTo(l,"click:search",(()=>{const e=`${t.get("first_name")} ${t.get("last_name")}`;this.showSearch(e)})),n.showChildView("info",l)}))):n.destroy()}}));n.disableSubmit(e.canEdit()),n.listenTo(t,{change(){n.getRegion("info").empty(),n.disableSubmit(!t.isValid())},invalid(e,t){const a=t.birth_date;"invalidDate"===a&&n.showChildView("info",new ri({errorCode:a}))}})}});var mi=n(2909),pi=n(7529),gi=n.n(pi);const fi=g.ZP.patients.patient.sidebar.sidebarViews,wi=p.View.extend({tagName:"h1",className:"patient-sidebar__name",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c(typeof(l=null!=(l=d(n,"first_name")||(null!=t?d(t,"first_name"):t))?l:o)===r?l.call(s,{name:"first_name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}):l)+" "+c(typeof(l=null!=(l=d(n,"last_name")||(null!=t?d(t,"last_name"):t))?l:o)===r?l.call(s,{name:"last_name",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:32}}}):l)},useData:!0}),modelEvents:{change:"render"}}),vi=p.View.extend({className:"patient-sidebar flex-region",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-name-region></div>\n    <span class="patient-sidebar__icon">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:3,column:40},end:{line:3,column:62}}}))+'</span>\n    <button class="button--icon patient-sidebar__menu js-menu">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:4,column:63},end:{line:4,column:81}}}))+'</button>\n    <div class="patient-sidebar__widgets" data-widgets-region></div>\n  '},useData:!0}),regions:{name:"[data-name-region]",widgets:{el:"[data-widgets-region]",regionClass:y.Z}},onRender(){this.showChildView("name",new wi({model:this.model})),this.showChildView("widgets",new ka({model:this.model,collection:this.collection,itemClassName:"patient-sidebar__section"}))},triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.model.canEdit(),t=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,e?"click:patientEdit":"click:patientView")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:fi.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"text")||(null!=t?s(t,"text"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)},useData:!0}),itemTemplateContext:{text:e?fi.menuOptions.edit:fi.menuOptions.view},lists:[{collection:t}],align:"right",popWidth:248}).show()}}),bi=s.Z.extend({viewEvents:{"click:patientEdit":"showPatientModal","click:patientView":"showPatientModal"},onBeforeStart(e){let{patient:t}=e;this.showView(new vi({model:t})),this.getRegion("widgets").startPreloader()},beforeStart(e){let{patient:t}=e;return(0,a.UI)(l().request("bootstrap","sidebarWidgets:fields"),(e=>l().request("entities","fetch:patientFields:model",t.id,e)))},onStart(e){let{patient:t}=e;this.patient=t;const n=l().request("bootstrap","sidebarWidgets");this.showView(new vi({model:this.patient,collection:n}))},showPatientModal(){l().request("nav","patient",this.patient)}}),yi=p.View.extend({className:"form-widgets flex",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"<div data-widgets-region></div>"},useData:!0}),regions:{widgets:"[data-widgets-region]"},onRender(e){let{model:t,collection:n}=e;this.showChildView("widgets",new ka({model:t,collection:n,className:"flex flex-wrap",itemClassName:"form-widgets__section"}))}}),_i=s.Z.extend({beforeStart(e){let{patient:t,form:n}=e;return(0,a.UI)(n.getWidgetFields(),(e=>l().request("entities","fetch:patientFields:model",t.id,e)))},onStart(e){let{patient:t,form:n}=e;const a=n.getWidgets();a.length&&this.showView(new yi({model:t,collection:a}))}});var xi=n(121),ki=n(7885);const Ci=g.ZP.forms.form.formViews,Oi=p.View.extend({className:"form__context-trail",actionTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="js-back form__context-link">'+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:61}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formViews"))&&o(l,"contextTrailView"))&&o(l,"backBtn"),t))+"</a>"},useData:!0}),patientTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="js-dashboard form__context-link">'+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:66}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formViews"))&&o(l,"contextTrailView"))&&o(l,"backDashboard"),t))+"</a>"},useData:!0}),getTemplate(){return this.action?this.actionTemplate:this.patientTemplate},initialize(e){let{patient:t,action:n}=e;this.patient=t,this.action=n},triggers:{"click .js-back":"click:back","click .js-dashboard":"click:dashboard"},onClickBack(){l().request("history","go:back")},onClickDashboard(){l().trigger("event-router","patient:dashboard",this.patient.id)}}),Ti=p.View.extend({className:"form__actions",template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="js-history-button form__actions-icon'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"shouldShowHistory"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:73},end:{line:2,column:117}}}))?l:"")+'">'+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"clock-rotate-left",{name:"far",hash:{},data:i,loc:{start:{line:2,column:119},end:{line:2,column:146}}}))+"</button>"},2:function(e,t,n,a,i){return" is-selected"},4:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"down-left-and-up-right-to-center",{name:"far",hash:{},data:i,loc:{start:{line:3,column:74},end:{line:3,column:116}}}))},6:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"up-right-and-down-left-from-center",{name:"far",hash:{},data:i,loc:{start:{line:3,column:124},end:{line:3,column:168}}}))},8:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="js-sidebar-button form__actions-icon'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isActionShown"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:72},end:{line:4,column:112}}}))?l:"")+'">'+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:4,column:114},end:{line:4,column:134}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasHistory"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:2,column:162}}}))?l:"")+'\n    <button class="js-expand-button form__actions-icon">'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isExpanded"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:3,column:56},end:{line:3,column:175}}}))?l:"")+"</button>\n    "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasAction"):t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:150}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{isActionShown:this.isActionShown(),hasHistory:this.responses&&!!this.responses.length,hasAction:!!this.action}},onRender(){this.renderSidebarTooltip(),this.renderExpandTooltip(),this.renderHistoryTooltip()},initialize(e){let{action:t,responses:n}=e;this.action=t,this.responses=n,this.listenTo(this.responses,"update",this.render)},modelEvents:{"change:isExpanded":"render","change:isActionSidebar":"render","change:shouldShowHistory":"render"},ui:{sidebarButton:".js-sidebar-button",expandButton:".js-expand-button",historyButton:".js-history-button"},triggers:{"click @ui.sidebarButton":"click:sidebarButton","click @ui.expandButton":"click:expandButton","click @ui.historyButton":"click:historyButton"},isActionShown(){return this.model.get("isActionSidebar")&&!this.model.get("isExpanded")},renderSidebarTooltip(){const e=this.isActionShown()?Ci.formActionsView.hideActionSidebar:Ci.formActionsView.showActionSidebar;new k.Z({message:e,uiView:this,ui:this.ui.sidebarButton})},renderExpandTooltip(){const e=this.model.get("isExpanded")?Ci.formActionsView.decreaseWidth:Ci.formActionsView.increaseWidth;new k.Z({message:e,uiView:this,ui:this.ui.expandButton})},renderHistoryTooltip(){const e=this.model.get("shouldShowHistory")?Ci.formActionsView.currentVersion:Ci.formActionsView.responseHistory;new k.Z({message:e,uiView:this,ui:this.ui.historyButton})}}),Si=p.View.extend({className:"form__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__layout">\n      <div class="flex">\n        <div class="overflow--hidden flex-grow">\n          <div data-context-trail-region></div>\n          <div class="form__title u-text--overflow"><span class="form__title-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:6,column:83},end:{line:6,column:115}}}))+"</span>"+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+" — "+c("function"==typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:6,column:169},end:{line:6,column:179}}}):s)+'</div>\n        </div>\n        <div class="flex-grow">\n          <div data-status-region>&nbsp;</div>\n          <div class="form__controls">\n            <div data-actions-region></div>\n            <div><div data-form-action-region></div></div>\n          </div>\n        </div>\n      </div>\n      <div data-widgets-header-region></div>\n      <div data-form-region></div>\n    </div>\n    <div class="form__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regionClass:p.Region.extend({replaceElement:!0}),regions:{actions:"[data-actions-region]",contextTrail:"[data-context-trail-region]",form:"[data-form-region]",formAction:"[data-form-action-region]",sidebar:{el:"[data-sidebar-region]",replaceElement:!1},status:"[data-status-region]",widgets:"[data-widgets-header-region]"},templateContext(){return{patient:this.getOption("patient").pick("first_name","last_name")}},onRender(){this.showChildView("contextTrail",new Oi({patient:this.getOption("patient"),action:this.getOption("action")}))}}),Di=p.View.extend({behaviors:[ki.Z],className:"form__content",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"responseId")||(null!=t?s(t,"responseId"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"responseId",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:56}}}):l)},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe src="/formapp/'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"responseId"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:22},end:{line:1,column:63}}}))?l:"")+'"></iframe>'},useData:!0}),templateContext(){return{responseId:this.getOption("responseId")}}}),Vi=p.View.extend({className:"form__content",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__prompt">\n      <h2 class="form__prompt-title">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"title"),t))+'</h2>\n      <div class="form__prompt-dialog">\n        <div class="flex-shrink">\n          <button class="button--blue button--large js-submit">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"submitButton"),t))+'</button>\n          <div class="u-margin--t-16">'+o((d(n,"formatHTMLMessage")||t&&d(t,"formatHTMLMessage")||c).call(r,(d(n,"intlGet")||t&&d(t,"intlGet")||c).call(r,"forms.form.formViews.storedSubmissionView.updated",{name:"intlGet",hash:{},data:i,loc:{start:{line:7,column:58},end:{line:7,column:119}}}),{name:"formatHTMLMessage",hash:{updated:(d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:128},end:{line:7,column:162}}})},data:i,loc:{start:{line:7,column:38},end:{line:7,column:164}}}))+'</div>\n        </div>\n        <div class="flex-shrink">\n          <button class="button-secondary button--large form__discard-button js-cancel" style="color:red">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"cancelButton"),t))+"</button>\n        </div>\n      </div>\n    </div>\n  "},useData:!0}),templateContext(){return{updated:this.getOption("updated")}},triggers:{"click .js-submit":"submit","click .js-cancel":"cancel"}}),Pi=p.View.extend({behaviors:[ki.Z],className:"form__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__layout">\n      <div class="form__context-trail">\n        <a class="js-back form__context-link">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:46},end:{line:4,column:68}}}))+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"forms"))&&u(l,"form"))&&u(l,"formViews"))&&u(l,"previewView"))&&u(l,"backBtn"),t))+"</a>"+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:8},end:{line:5,column:32}}}))+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"forms"))&&u(l,"form"))&&u(l,"formViews"))&&u(l,"previewView"))&&u(l,"title"),t))+'\n      </div>\n      <div class="form__title"><span class="form__title-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:7,column:62},end:{line:7,column:94}}}))+"</span>"+c("function"==typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:7,column:101},end:{line:7,column:111}}}):s)+'</div>\n      <div class="form__content">\n        <iframe src="/formapp/preview"></iframe>\n      </div>\n    </div>\n  '},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().request("history","go:back")}}),Mi=p.View.extend({className:"u-text-align--right",getTemplate(){return this.model?this.getOption("isEditing")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n      <span class="form__alert-text">'+s(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"forms"))&&c(l,"form"))&&c(l,"formViews"))&&c(l,"statusView"))&&c(l,"notSaved"),t))+'</span>\n      <span class="u-margin--l-4 u-margin--r-4">&bull;</span>\n      '+s((c(n,"formatHTMLMessage")||t&&c(t,"formatHTMLMessage")||r).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(o,"forms.form.formViews.statusView.label",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:26},end:{line:4,column:75}}}),{name:"formatHTMLMessage",hash:{date:(c(n,"formatDateTime")||t&&c(t,"formatDateTime")||r).call(o,null!=t?c(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:4,column:81},end:{line:4,column:119}}})},data:i,loc:{start:{line:4,column:6},end:{line:4,column:121}}}))+"\n      "},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"forms.form.formViews.statusView.label",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:69}}}),{name:"formatHTMLMessage",hash:{date:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:75},end:{line:1,column:113}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:115}}}))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="form__alert-text">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"statusView"))&&s(l,"notSaved"),t))+"</span>"},useData:!0})}}),Ei=p.View.extend({tagName:"button",className:"button--grey",attributes:{disabled:!0},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"readOnlyView"))&&s(l,"buttonText"),t))},useData:!0})}),ji=T.Z.extend({align:"right",initialize(e){let{model:t}=e;this.collection=new(r().Collection)([{text:Ci.saveView.save.droplistItemText,value:"save"},{text:Ci.saveView.saveAndGoBack.droplistItemText,value:"saveAndGoBack"}]);const n=t.get("saveButtonType");this.setState("selected",this.collection.find({value:n}))},viewOptions:{className:"button--green button__drop-list-select",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"caret-down",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))},useData:!0})},picklistOptions:()=>({headingText:Ci.saveView.droplistLabel,isCheckable:!0})}),Ai=p.View.extend({className:"flex",regions:{saveType:{el:"[data-save-type-region]",replaceElement:!0}},modelEvents:{"change:saveButtonType":"render"},templateContext(){const e=this.model.get("saveButtonType");return{isDisabled:this.getOption("isDisabled"),showSaveButton:"save"===e,showSaveGoBackButton:"saveAndGoBack"===e}},template:m().template({1:function(e,t,n,a,i){return"disabled"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"saveView"))&&s(l,"save"))&&s(l,"buttonText"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"saveView"))&&s(l,"saveAndGoBack"))&&s(l,"buttonText"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green button__drop-list-action js-save-button" '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:74},end:{line:2,column:107}}}))?l:"")+">\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"showSaveButton"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))?l:"")+(null!=(l=o(n,"if").call(s,null!=t?o(t,"showSaveGoBackButton"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:6},end:{line:8,column:13}}}))?l:"")+"    </button>\n    <button data-save-type-region></button>\n  "},useData:!0}),triggers:{"click .js-save-button":"click:save"},onRender(){const e=this.showChildView("saveType",new ji({model:this.model,state:{isDisabled:this.getOption("isDisabled")}}));this.listenTo(e,{"change:selected"(e){this.triggerMethod("select:button:type",e.get("value"))}})}}),Ni=p.View.extend({tagName:"button",className:"button--green",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"updateView"))&&s(l,"buttonText"),t))},useData:!0}),triggers:{click:"click"}}),Fi=T.Z.extend({viewOptions:{className:"button-filter",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"clock-rotate-left",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:27},end:{line:1,column:67}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:67},end:{line:1,column:87}}}))},useData:!0})},picklistOptions:{itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:40}}}))},useData:!0})}}),Ii=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-versions-region></div>\n    <button class="button--blue js-current u-margin--l-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"historyView"))&&s(l,"currentVersionButton"),t))+"</button>\n  "},useData:!0}),regions:{versions:{el:"[data-versions-region]",replaceElement:!0}},triggers:{"click .js-current":"click:current"},initialize(e){let{selected:t,collection:n}=e;const a=this.showChildView("versions",new Fi({collection:n,state:{selected:t}}));this.listenTo(a,{"change:selected"(e){this.triggerMethod("change:response",e)}})}}),Ri=s.Z.extend({childApps:{patient:{AppClass:bi,regionName:"sidebar",getOptions:["patient"]},widgetHeader:{AppClass:_i,regionName:"widgets",getOptions:["patient","form"]}},initFormState(){const e=gi().get(`form-state_${this.currentUser.id}`);this.setState((0,a.l7)({isActionSidebar:!0,isExpanded:!0,shouldShowHistory:!1,saveButtonType:"save"},e))},onBeforeStart(){this.getRegion().startPreloader(),this.currentUser=l().request("bootstrap","currentUser"),this.initFormState()},beforeStart(e){let{patientActionId:t}=e;return[l().request("entities","fetch:actions:model",t),l().request("entities","fetch:patients:model:byAction",t)]},onFail(){l().request("alert","show:error",g.ZP.forms.form.formApp.notFound),l().trigger("event-router","default")},onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t,n){let[a]=t,[i]=n;this.patient=i,this.action=a,this.responses=a.getFormResponses(),this.form=this.action.getForm(),this.isReadOnly=this.form.isReadOnly(),this.listenTo(a,"destroy",(function(){l().request("alert","show:success",g.ZP.forms.form.formApp.deleteSuccess),l().trigger("event-router","default")})),this.startFormService(),this.setView(new Si({model:this.form,patient:i,action:a})),this.setState({responseId:!!this.responses.length&&this.responses.first().id}),this.showFormStatus(),this.showFormAction(),this.showActions(),this.startChildApp("widgetHeader"),this.showSidebar(),this.showView()},startFormService(){const e=this.addChildApp("formsService",xi.Z,{patient:this.patient,action:this.action,form:this.form,responses:this.responses});this.listenTo(e,{success(e){e.set({_created_at:d()().format()}),this.responses.unshift(e),this.setState({responseId:e.id}),"saveAndGoBack"!==this.getState("saveButtonType")?(this.showFormStatus(),this.showFormUpdate()):l().request("history","go:back")},ready(){this.showFormSave()},error(){this.showFormSave()}})},stateEvents:{change:"onChangeState","change:shouldShowHistory":"showFormAction","change:responseId":"onChangeResponseId","change:saveButtonType":"onChangeSaveButtonType"},onChangeState(e){(e.hasChanged("isExpanded")||e.hasChanged("isActionSidebar"))&&(this.showSidebar(),gi().set(`form-state_${this.currentUser.id}`,{isExpanded:this.getState("isExpanded"),saveButtonType:this.getState("saveButtonType")}))},onChangeResponseId(){this.showContent(),this.showFormStatus()},onChangeSaveButtonType(){gi().set(`form-state_${this.currentUser.id}`,{isExpanded:this.getState("isExpanded"),saveButtonType:this.getState("saveButtonType")})},showFormStatus(){this.isReadOnly||this.showChildView("status",new Mi({model:this.responses.first(),isEditing:!this.getState("responseId")}))},showActions(){const e=new Ti({model:this.getState(),action:this.action,responses:this.responses});this.listenTo(e,{"click:sidebarButton":this.onClickSidebarButton,"click:expandButton":this.onClickExpandButton,"click:historyButton":this.onClickHistoryButton}),this.showChildView("actions",e)},onClickSidebarButton(){this.getState("isExpanded")?this.setState({isActionSidebar:!0,isExpanded:!1}):this.toggleState("isActionSidebar")},onClickExpandButton(){this.toggleState("isExpanded")},onClickHistoryButton(){this.setState({responseId:this.responses.first().id,shouldShowHistory:!this.getState("shouldShowHistory")})},showContent(){const e=this.getState("responseId"),{updated:t}=l().request(`form${this.form.id}`,"get:storedSubmission");if(this.isReadOnly||e||!t)this.showForm();else{const e=this.showChildView("form",new Vi({updated:t}));this.listenTo(e,{submit(){this.showForm()},cancel(){l().request(`form${this.form.id}`,"clear:storedSubmission"),this.showForm()}})}},showForm(){this.showChildView("form",new Di({model:this.form,responseId:this.getState("responseId")}))},showSidebar(){const e=this.getState("isActionSidebar"),t=this.getState("isExpanded");if(e&&!t||l().request("sidebar","close"),t)return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();e&&this.showActionSidebar(),this.startChildApp("patient")},showActionSidebar(){const e=l().request("sidebar","start","action",{action:this.action,isShowingForm:!0});this.listenTo(e,"stop",(()=>{this.getState("isExpanded")||this.setState("isActionSidebar",!1)}))},showFormAction(){this.isReadOnly?this.showReadOnly():this.getState("responseId")?this.getState("shouldShowHistory")?this.showFormHistory():this.showFormUpdate():this.showFormSaveDisabled()},showReadOnly(){this.showChildView("formAction",new Ei)},showFormSaveDisabled(){this.showChildView("formAction",new Ai({isDisabled:!0,model:this.getState()}))},showFormSave(){if(this.isReadOnly)return;const e=this.showChildView("formAction",new Ai({model:this.getState()}));this.listenTo(e,{"click:save"(){l().request(`form${this.form.id}`,"send","form:submit"),this.showFormSaveDisabled()},"select:button:type"(e){this.setState({saveButtonType:e})}})},showFormUpdate(){const e=this.showChildView("formAction",new Ni);this.listenTo(e,"click",(()=>{this.setState({responseId:null})}))},showFormHistory(){const e=this.responses.get(this.getState("responseId")),t=this.showChildView("formAction",new Ii({selected:e,collection:this.responses}));this.listenTo(t,{"change:response"(e){this.setState({responseId:e.id})},"click:current"(){this.setState({responseId:this.responses.first().id,shouldShowHistory:!1})}})}}),qi=s.Z.extend({childApps:{patient:{AppClass:bi,regionName:"sidebar",getOptions:["patient"]},widgetHeader:{AppClass:_i,regionName:"widgets",getOptions:["patient","form"]}},initFormState(){const e=gi().get(`form-state_${this.currentUser.id}`);this.setState((0,a.l7)({isExpanded:!0,saveButtonType:"save"},e))},onBeforeStart(){this.getRegion().startPreloader(),this.currentUser=l().request("bootstrap","currentUser"),this.initFormState()},beforeStart(e){let{formId:t,patientId:n}=e;return[l().request("entities","fetch:patients:model",n),l().request("entities","forms:model",t)]},onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t,n){let[a]=t;this.patient=a,this.form=n,this.isReadOnly=this.form.isReadOnly(),this.startFormService(),this.showView(new Si({model:this.form,patient:a})),this.showContent(),this.showFormStatus(),this.showFormSaveDisabled(),this.showActions(),this.startChildApp("widgetHeader"),this.showSidebar()},startFormService(){const e=this.addChildApp("formsService",xi.Z,{patient:this.patient,form:this.form});this.listenTo(e,{success(e){e.set({_created_at:d()().format()}),"saveAndGoBack"!==this.getState("saveButtonType")?(this.showForm(e.id),this.showFormStatus(e)):l().request("history","go:back")},ready(){this.showFormSave()},error(){this.showFormSave()}})},stateEvents:{change:"onChangeState","change:saveButtonType":"onChangeSaveButtonType"},onChangeState(){const e=this.getState("isExpanded"),t=this.getState("saveButtonType");gi().set(`form-state_${this.currentUser.id}`,{isExpanded:e,saveButtonType:t}),this.showSidebar()},showFormStatus(e){this.isReadOnly||this.showChildView("status",new Mi({model:e}))},showActions(){const e=new Ti({model:this.getState(),patient:this.patient});this.listenTo(e,{"click:expandButton":this.onClickExpandButton}),this.showChildView("actions",e)},onClickExpandButton(){this.toggleState("isExpanded")},showContent(){const{updated:e}=l().request(`form${this.form.id}`,"get:storedSubmission");if(this.isReadOnly||!e)this.showForm();else{const t=this.showChildView("form",new Vi({updated:e}));this.listenTo(t,{submit(){this.showForm()},cancel(){l().request(`form${this.form.id}`,"clear:storedSubmission"),this.showForm()}})}},showForm(e){this.showChildView("form",new Di({model:this.form,responseId:e}))},showSidebar(){if(this.getState("isExpanded"))return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();this.startChildApp("patient")},showFormSaveDisabled(){this.isReadOnly?this.showChildView("formAction",new Ei):this.showChildView("formAction",new Ai({isDisabled:!0,model:this.getState()}))},showFormSave(){if(this.isReadOnly)return;const e=this.showChildView("formAction",new Ai({model:this.getState()}));this.listenTo(e,{"click:save"(){l().request(`form${this.form.id}`,"send","form:submit"),this.showFormSaveDisabled()},"select:button:type"(e){this.setState({saveButtonType:e})}})}}),Gi=s.Z.extend({beforeStart(e){let{formId:t}=e;return l().request("entities","forms:model",t)},onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t){this.addChildApp("formsService",xi.Z,{form:t}),this.showView(new Pi({model:t}))}}),Li=mi.Z.extend({routerAppName:"FormsApp",childApps:{form:Ri,formPreview:Gi,patientForm:qi},eventRoutes:{"form:patient":{action:"showFormPatient",route:"patient/:id/form/:id"},"form:patientAction":{action:"showFormAction",route:"patient-action/:id/form/:id"},"form:preview":{action:"showFormPreview",route:"form/:id/preview"}},showFormAction(e,t){this.startCurrent("form",{formId:t,patientActionId:e})},showFormPatient(e,t){this.startCurrent("patientForm",{formId:t,patientId:e})},showFormPreview(e){this.startCurrent("formPreview",{formId:e})}}),Bi=s.Z.extend({constructor:function(){this._current=null,this.initRouter(),this.on("before:stop",this.stopCurrent),s.Z.apply(this,arguments)},initRouter(){const e=(0,a.q6)(this,"eventRoutes",{});this._eventRoutes=(0,p.normalizeMethods)(this,e)},startRoute(e){let{event:t,eventArgs:n}=e;const a=this._eventRoutes[t];a&&a.apply(this,n)},mixinOptions(e){const t=(0,a.q6)(this,"currentAppOptions");return(0,a.l7)({},t,e)},startCurrent(e,t){this.stopCurrent();const n=this.startChildApp(e,this.mixinOptions(t));return this._current=n,n},getCurrent(){return this._current},stopCurrent(){this._current&&(this._current.stop(),this._current=null)}}),Hi=r().Model.extend({defaults:()=>({actionBeingEdited:null,selectedActions:{}}),isBeingEdited(e){return this.get("actionBeingEdited")===e.id},getSelectedList(){return this.get("selectedActions")},toggleSelected(e,t){this.set("selectedActions",(0,a.l7)({},this.get("selectedActions"),{[e.id]:t}))},isSelected(e){return!!this.getSelectedList()[e.id]},getSelected(e){const t=this.getSelectedList(),n=(0,a.u4)((0,a.XP)(t),((n,a)=>(t[a]&&e.get(a)&&n.push({id:a}),n)),[]);return l().request("entities","actions:collection",n)},clearSelected(){this.set("selectedActions",{}),this.trigger("select:none")},selectAll(e){const t=e.reduce(((e,t)=>(e[t.id]=!0,e)),{});this.set("selectedActions",t),this.trigger("select:all")}}),Zi=s.Z.extend({beforeStart(e){let{actionId:t,patientId:n}=e;if(!t){const e=l().request("bootstrap","currentUser"),t=l().request("bootstrap","currentOrg").getStates();return l().request("entities","actions:model",{_patient:n,_state:t.at(0).id,_owner:{type:"clinicians",id:e.id},outreach:u.Ww.DISABLED,sharing:u.q$.DISABLED,duration:0,due_date:null,due_time:null,updated_at:d()().format()})}return l().request("entities","fetch:actions:model",t)},onFail(){l().request("alert","show:error",g.ZP.patients.patient.actionApp.notFound),this.stop()},onStart(e,t){const n=l().request("sidebar","start","action",{action:t});this.listenTo(n,"stop",this.stop)}});var $i=n(9584),Wi=n.n($i),Yi=n(330),Ui=n.n(Yi);const zi=g.ZP.patients.shared.bulkEdit.bulkEditViews;function Qi(e,t){if(!e)return!1;const n=d()(t?`${e} ${t}`:e);return n.isBefore(d()(),"day")||n.isBefore(d()(),"minute")}const Xi=j.extend({onPicklistSelect(e){let{model:t}=e;t.isDone()&&this.getOption("flows")?this.shouldSelectDone(t):this.setSelectedStatus(t)},shouldSelectDone(e){const t=this.getOption("flows");if(!(0,a.G)(t.invoke("isAllDone"),(e=>!e)))return void this.setSelectedStatus(e);if(this.popRegion.empty(),l().request("bootstrap","currentOrg:setting","require_done_flow"))return void l().request("modal","show:small",{bodyText:zi.flowsStateComponent.requireDoneModal.bodyText,headingText:zi.flowsStateComponent.requireDoneModal.headingText,submitText:zi.flowsStateComponent.requireDoneModal.submitText,cancelText:!1,buttonClass:"button--blue"});const n=l().request("modal","show:small",{bodyText:zi.flowsStateComponent.doneModal.bodyText,headingText:zi.flowsStateComponent.doneModal.headingText,submitText:zi.flowsStateComponent.doneModal.submitText,onSubmit:()=>{this.setSelectedStatus(e),n.destroy()}})},setSelectedStatus(e){this.setState("selected",e),this.popRegion.empty()}}),Ki=p.View.extend({template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editFlows",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:25},end:{line:4,column:104}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:4,column:8},end:{line:4,column:129}}}))+"\n"},3:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editActions",{name:"intlGet",hash:{},data:i,loc:{start:{line:6,column:25},end:{line:6,column:106}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:6,column:8},end:{line:6,column:131}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n   <button class="button--blue js-bulk-edit">\n'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+'    </button>\n    <span class="button--text js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkEditButtonView"))&&s(l,"cancel"),t))+"</span>\n  "},useData:!0}),templateContext(){return{isFlowList:this.getOption("isFlowType")}},triggers:{"click .js-cancel":"click:cancel","click .js-bulk-edit":"click:edit"}}),Ji=p.View.extend({className:"modal__header--sidebar",template:m().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--icon u-margin--r-8 js-menu">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:76},end:{line:7,column:94}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:52},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?c(t,"items"):t)?c(l,"length"):l},data:i,loc:{start:{line:4,column:35},end:{line:4,column:165}}}))+"</h3>\n      </div>\n      <div>\n        "+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDevelop"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:8},end:{line:7,column:110}}}))?l:"")+'\n        <button class="button--icon js-close">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"xmark",{name:"far",hash:{},data:i,loc:{start:{line:8,column:46},end:{line:8,column:61}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0}),templateContext:()=>({isDevelop:!1}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.collection.length,t=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"confirm:delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:zi.bulkEditActionsHeaderView.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:73},end:{line:1,column:168}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:56},end:{line:1,column:190}}}))+"</span>"},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:zi.confirmDeleteActionsModal.bodyText,headingText:zi.confirmDeleteActionsModal.headingText,submitText:zi.confirmDeleteActionsModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete",this.collection)}})}}),el=p.View.extend({className:"modal__header--sidebar",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n        <h3 class="sidebar__heading">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:54},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?c(t,"items"):t)?c(l,"length"):l},data:i,loc:{start:{line:4,column:37},end:{line:4,column:165}}}))+'</h3>\n      </div>\n      <div>\n        <button class="button--icon u-margin--r-8 js-menu">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:59},end:{line:7,column:77}}}))+'</button>\n        <button class="button--icon js-close">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"xmark",{name:"far",hash:{},data:i,loc:{start:{line:8,column:46},end:{line:8,column:61}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.collection.length,t=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"confirm:delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:zi.bulkEditFlowsHeaderView.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:73},end:{line:1,column:166}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:56},end:{line:1,column:188}}}))+"</span>"},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:zi.confirmDeleteFlowsModal.bodyText,headingText:zi.confirmDeleteFlowsModal.headingText,submitText:zi.confirmDeleteFlowsModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete",this.collection)}})}}),tl=p.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner","change:dateMulti":"showDueDateTime","change:date":"showDueDateTime","change:timeMulti":"showDueTime","change:durationMulti":"showDuration"},className:"modal__content--sidebar",template:Wi(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]"},onRender(){this.showState(),this.showOwner(),this.showDueDateTime(),this.showDuration()},getStateComponent(){return this.model.get("stateMulti")?new j({viewOptions:{className:"button-secondary w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-dot",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new j({stateId:this.model.get("stateId")})},getOwnerComponent(){const e=this.model.someComplete(),t=this.model.getGroups(),n=t.length?null:zi.bulkOwnerInfoText;return this.model.get("ownerMulti")?new L({groups:t,viewOptions:{attributes:{disabled:e},className:"button-secondary w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})},infoText:n}):new L({owner:this.model.get("owner"),state:{isDisabled:e},groups:t,infoText:n})},getDueDateComponent(){const e=this.model.someComplete();if(this.model.get("dateMulti"))return new $({state:{isDisabled:e},viewOptions:{attributes:{disabled:e},tagName:"button",className:"button-secondary w-100 due-component",triggers:{click:"click"},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:23}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDueDateDefaultText"),t))+"</span>"},useData:!0})}});const t=Qi(this.model.get("date"));return new $({date:this.model.get("date"),state:{isDisabled:e},isOverdue:t})},getDueTimeComponent(){if(this.model.get("timeMulti"))return new K({viewOptions:{attributes:{disabled:this.model.get("dateMulti")||this.model.someComplete()},className:"button-secondary time-component w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+' <span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDueTimeDefaultText"),t))+"</span>"},useData:!0})}});const e=this.model.get("time"),t=this.model.get("dateMulti")&&!e||!this.model.get("date")||this.model.someComplete(),n=Qi(this.model.get("date"),e);return new K({time:e,state:{isDisabled:t},isOverdue:n})},getDurationComponent(){const e=this.model.someComplete();return this.model.get("durationMulti")?new ie({viewOptions:{className:"button-secondary w-100",attributes:{disabled:e},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDurationDefaultText"),t))+"</span>"},useData:!0})}}):new ie({duration:this.model.get("duration"),state:{isDisabled:e}})},showState(){const e=this.getStateComponent();this.listenTo(e,"change:state",(e=>{this.model.setState(e)})),this.showChildView("state",e)},showOwner(){const e=this.getOwnerComponent();this.listenTo(e,"change:owner",(e=>{this.model.setOwner(e)})),this.showChildView("owner",e)},showDueDateTime(){this.showDueDate(),this.showDueTime()},showDueDate(){const e=this.getDueDateComponent();this.listenTo(e,"change:due",(e=>{this.model.setDueDate(e)})),this.showChildView("dueDate",e)},showDueTime(){const e=this.getDueTimeComponent();this.listenTo(e,"change:time",(e=>{this.model.setDueTime(e)})),this.showChildView("dueTime",e)},showDuration(){const e=this.getDurationComponent();this.listenTo(e,"change:duration",(e=>{this.model.setDuration(e)})),this.showChildView("duration",e)}}),nl=p.View.extend({modelEvents:{"change:applyOwner":"render","change:ownerMulti":"render"},className:"u-margin--t-4 u-margin--l-16",template:m().template({1:function(e,t,n,a,i){return" disabled"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:24},end:{line:3,column:46}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:3,column:54},end:{line:3,column:70}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--checkbox js-apply-owner"'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"ownerMulti"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:51},end:{line:2,column:85}}}))?l:"")+">\n      "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"applyOwner"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:6},end:{line:3,column:78}}}))?l:"")+"<span>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkEditFlowBodyTemplate"))&&o(l,"applyOwnerLabel"),t))+"</span>\n    </button>"},useData:!0}),triggers:{"click .js-apply-owner":"click:select"},onClickSelect(){this.model.set("applyOwner",!this.model.get("applyOwner"))}}),al=p.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner"},className:"modal__content--sidebar",template:Ui(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",applyOwner:"[data-apply-owner-region]"},onRender(){this.showState(),this.showOwner(),this.showApplyOwner()},getStateComponent(){return this.model.get("stateMulti")?new Xi({flows:this.collection,viewOptions:{className:"button-secondary w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-dot",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new Xi({flows:this.collection,stateId:this.model.get("stateId")})},getOwnerComponent(){const e=this.model.someComplete(),t=this.model.getGroups(),n=t.length?null:zi.bulkOwnerInfoText;return this.model.get("ownerMulti")?new L({groups:t,viewOptions:{className:"button-secondary w-100",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})},infoText:n,state:{isDisabled:e}}):new L({owner:this.model.get("owner"),groups:t,infoText:n,state:{isDisabled:e}})},showState(){const e=this.getStateComponent();this.listenTo(e,"change:state",(e=>{this.model.setState(e)})),this.showChildView("state",e)},showOwner(){const e=this.getOwnerComponent();this.listenTo(e,"change:owner",(e=>{this.model.setOwner(e)})),this.showChildView("owner",e)},showApplyOwner(){this.showChildView("applyOwner",new nl({model:this.model}))}}),il=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:88}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:110}}}))},useData:!0}),ll=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),sl=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),ol=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:92}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))},useData:!0}),rl=r().Model.extend({initialize(e){let{collection:t}=e;const n=t.at(0);this.initBulkState(t,n),this.initBulkOwner(t,n),this.initBulkDueDate(t,n),this.initBulkDueTime(t,n),this.initBulkDuration(t,n)},initBulkState(e,t){const n=t.getState().id,a=e.some((e=>e.getState().id!==n));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner(e,t){const n=t.getOwner(),a=e.some((e=>e.getOwner().id!==n.id));this.set({ownerMulti:a,owner:a?null:n})},initBulkDueDate(e,t){const n=t.get("due_date"),a=e.some((e=>e.get("due_date")!==n));this.set({dateMulti:a,date:a?null:n})},initBulkDueTime(e,t){const n=t.get("due_time"),a=e.some((e=>e.get("due_time")!==n));this.set({timeMulti:a,time:a?null:n})},initBulkDuration(e,t){const n=t.get("duration"),a=e.some((e=>e.get("duration")!==n));this.set({durationMulti:a,duration:a?null:n})},setState(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},setDueDate(e){return e?this.set({date:e.format("YYYY-MM-DD"),dateMulti:!1,dateChanged:!0}):this.set({date:null,time:null,dateMulti:!1,timeMulti:!1})},setDueTime(e){return this.set({time:e||null,timeMulti:!1,timeChanged:!0})},setDuration(e){return this.set({duration:e,durationMulti:!1,durationChanged:!0})},getGroups(){return this.get("collection").getPatients().getSharedGroups()},someComplete(){return this.get("collection").some((e=>e.isDone()))},getData(){const{stateChanged:e,stateId:t,ownerChanged:n,owner:i,dateChanged:l,date:s,timeChanged:o,time:r,durationChanged:c,duration:d}=this.attributes,u={};return e&&(u._state=t),n&&(u._owner=(0,a.ei)(i,"id","type")),l&&(u.due_date=s),o&&(u.due_time=r),c&&(u.duration=d),u}}),cl=s.Z.extend({StateModel:rl,onStart(){const e=new Ji({collection:this.getState("collection")}),t=new tl({model:this.getState(),collection:this.getState("collection")});this.modal=l().request("modal","show:sidebar",{headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,a.r$)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit(){this.modal.disableSubmit(),this.triggerMethod("save",this.getState().getData())},onStop(){this.modal.destroy()}});var dl=n(4486),ul=n.n(dl),hl=n(3754),ml=n.n(hl);const pl=p.View.extend({initialize(){this.patient=this.model.getPatient()},className:"patient-flow__context-trail",template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-patient patient-flow__context-link">'+d(typeof(s=null!=(s=u(n,"firstName")||(null!=t?u(t,"firstName"):t))?s:r)===c?s.call(o,{name:"firstName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:68}}}):s)+" "+d(typeof(s=null!=(s=u(n,"lastName")||(null!=t?u(t,"lastName"):t))?s:r)===c?s.call(o,{name:"lastName",hash:{},data:i,loc:{start:{line:8,column:69},end:{line:8,column:83}}}):s)+"</a>"+d((u(n,"fas")||t&&u(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:87},end:{line:8,column:110}}}))+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:8,column:110},end:{line:8,column:120}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-patient":"click:patient"},onClickBack(){l().request("history","go:latestList")},onClickPatient(){l().trigger("event-router","patient:dashboard",this.patient.id)},templateContext(){return{hasLatestList:l().request("history","has:latestList"),firstName:this.patient.get("first_name"),lastName:this.patient.get("last_name")}}}),gl=p.View.extend({className:"patient-flow__header",modelEvents:{editing:"onEditing",change:"render","change:_progress":"onChangeFlowProgress"},onEditing(e){this.$el.toggleClass("is-selected",e)},template:ul(),regions:{state:"[data-state-region]",owner:"[data-owner-region]"},triggers:{click:"edit"},ui:{progress:".js-progress"},onRender(){this.showState(),this.showOwner()},showState(){const e=new Ye({flow:this.model,stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){const e=this.model.isDone(),t=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},onChangeFlowProgress(){const e=this.model.get("_progress");this.ui.progress.attr({value:e.complete,max:e.total})}}),fl=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"flowViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),wl=p.View.extend({className:"table-list__item",modelEvents:{change:"render",editing:"onEditing"},initialize(e){let{state:t}=e;this.state=t,this.listenTo(t,{"select:all":this.showCheck,"select:none":this.showCheck}),this.flow=this.model.getFlow(),this.listenTo(this.flow,{"change:_state":this.render})},template:ml(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},tagName:"tr",regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","flow:action",this.model.get("_flow"),this.model.id)},onEditing(e){this.state.isSelected(this.model)||this.$el.toggleClass("is-selected",e)},onRender(){this.showCheck(),this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},toggleSelected(e){this.state.isBeingEdited(this.model)||this.$el.toggleClass("is-selected",e)},showCheck(){const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new O({state:{isSelected:e}});this.listenTo(t,{select(e){this.state.toggleSelected(this.model,!this.state.isSelected(this.model))},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){const e=this.flow.isDone();this.stateComponent=new j({stateId:this.model.get("_state"),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.stateComponent,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",this.stateComponent)},showOwner(){const e=this.model.isDone()||this.flow.isDone();this.ownerComponent=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)},showDueDay(){const e=this.model.isDone()||this.flow.isDone();this.dueDayComponent=new $({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueDayComponent,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDay",this.dueDayComponent)},showDueTime(){const e=this.model.isDone()||this.flow.isDone()||!this.model.get("due_date");this.dueTimeComponent=new K({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueTimeComponent,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",this.dueTimeComponent)},showForm(){this.model.getForm()&&this.showChildView("form",new le({model:this.model}))}}),vl=p.CollectionView.extend({className:"table-list patient-flow__list",tagName:"table",childView:wl,childViewOptions(){return{state:this.getOption("state")}},emptyView:fl,viewComparator(e){let{model:t}=e;return t.get("sequence")}}),bl=p.View.extend({className:"patient-flow__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div class="patient-flow__actions">\n        <div data-select-all-region></div>\n        <div data-tools-region></div>\n      </div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="patient-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:y.Z,replaceElement:!0},tools:{el:"[data-tools-region]",replaceElement:!0},selectAll:{el:"[data-select-all-region]",replaceElement:!0}}}),yl=p.View.extend({tagName:"button",className:"button--checkbox u-margin--r-16",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),_l=g.ZP.patients.shared.addWorkflow.addWorkflowViews,xl=x.Z.extend({popWidth:248,isSelectlist:!0,placeholderText:_l.addWorkflowOptlist.placeholderText,itemTemplateContext(){const e="program-actions"===this.model.get("itemType"),t=this.model.get("hasOutreach")?"share-from-square":"file-lines";return{icon:{icon:e?t:"folder",type:e?"far":"fas",classes:"add-workflow__picklist-icon"}}}}),kl=p.View.extend({tagName:"button",className:"button-primary",headingText:_l.addWorkflowOptlist.headingText,template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+"<span>"+r(e.lambda((l=(l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"shared"))&&c(l,"addWorkflow"))&&c(l,"addWorkflowViews"))&&c(l,"addButtonView"))&&c(l,"label"),t))+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:110},end:{line:1,column:130}}}))},useData:!0}),triggers:{click:"click"},onClick(){new xl({headingText:this.getOption("headingText"),ui:this.$el,uiView:this,lists:this.getOption("lists"),onNew:this.getOption("onNew")}).show()}}),Cl=Bi.extend({StateModel:Hi,routerAppName:"FlowApp",childApps:{action:Zi,patient:bi,bulkEditActions:cl},eventRoutes:{"flow:action":"showActionSidebar"},stateEvents:{"change:selectedActions":"onChangeSelected"},onChangeSelected(){this.toggleBulkSelect()},onBeforeStart(){this.resetStateDefaults(),this.showView(new bl)},beforeStart(e){let{flowId:t}=e;return[l().request("entities","fetch:flows:model",t),l().request("entities","fetch:actions:collection:byFlow",t),l().request("entities","fetch:patients:model:byFlow",t)]},onFail(){l().trigger("event-router","notFound"),this.stop()},onStart(e,t,n,a){let{currentRoute:i}=e,[l]=t,[s]=n,[o]=a;this.flow=l,this.actions=s,this.patient=o,this.addOpts=this.getAddOpts(this.flow.getProgramFlow()),this.showChildView("contextTrail",new pl({model:this.flow})),this.showHeader(),this.toggleBulkSelect(),this.showActionList(),this.showSidebar(),this.listenTo(this.actions,{"change:_state":this.onActionChangeState,destroy:this.onActionDestroy}),this.listenTo(this.flow,"change:_owner",this.onFlowChangeOwner),this.startRoute(i)},onActionChangeState(e){const{complete:t,total:n}=this.flow.get("_progress"),a=e.isDone();l().request("entities","states:model",e.previous("_state")).isDone()!==a&&this.flow.set({_progress:{complete:t+(a?1:-1),total:n}})},onActionDestroy(e){const{complete:t,total:n}=this.flow.get("_progress"),a=e.isDone();this.flow.set({_progress:{complete:t-(a?1:0),total:n-1}})},onFlowChangeOwner(e,t){if("teams"===t.type)return;const n=e.getOwner().getTeam();this.actions.each((e=>{e.isDone()||e.getOwner()!==n||e.set({_owner:t})}))},showHeader(){const e=new gl({model:this.flow});this.listenTo(e,{edit:this.onEditFlow}),this.showChildView("header",e)},getAddOpts(e){return e.getActions().map((e=>({text:e.get("name"),itemType:e.type,hasOutreach:e.hasOutreach(),onSelect:(0,a.ak)(this.triggerMethod,this,"add:programAction",e)})))},showAdd(){this.showChildView("tools",new kl({headingText:_l.addActionHeadingText,lists:[{collection:new(r().Collection)(this.addOpts)}]}))},toggleBulkSelect(){this.selected=this.getState().getSelected(this.actions),this.showSelectAll(),this.selected.length?this.showBulkEditButtonView():this.showAdd()},showBulkEditButtonView(){const e=this.showChildView("tools",new Ki({tagName:"span",collection:this.selected}));this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit})},onClickBulkCancel(){this.getState().clearSelected()},onClickBulkEdit(){const e=this.startChildApp("bulkEditActions",{state:{collection:this.selected}});this.listenTo(e,{save(t){this.selected.save(t).done((()=>{this.showUpdateSuccess(this.selected.length),e.stop(),this.getState().clearSelected()})).fail((()=>{l().request("alert","show:error",g.ZP.patients.worklist.worklistApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const t=this.selected.length;this.selected.destroy().then((()=>{this.showDeleteSuccess(t),e.stop(),this.getState().clearSelected()}))}})},showDeleteSuccess(e){l().request("alert","show:success",(0,g.SM)(ol,{itemCount:e}))},showUpdateSuccess(e){l().request("alert","show:success",(0,g.SM)(ll,{itemCount:e}))},showDisabledSelectAll(){this.showChildView("selectAll",new yl({isDisabled:!0}))},showSelectAll(){if(!this.actions.length)return void this.showDisabledSelectAll();const e=this.selected.length===this.actions.length,t=!this.selected.length,n=new yl({isSelectAll:e,isSelectNone:t});this.listenTo(n,"click",this.onClickBulkSelect),this.showChildView("selectAll",n)},onClickBulkSelect(){this.selected.length!==this.actions.length?this.getState().selectAll(this.actions):this.getState().clearSelected()},onAddProgramAction(e){const t=e.getAction({flowId:this.flow.id});t.saveAll().done((()=>{this.actions.push(t),l().trigger("event-router","flow:action",this.flow.id,t.id)}))},showActionList(){this.showChildView("actionList",new vl({collection:this.actions,state:this.getState()}))},showSidebar(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})},showActionSidebar(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.setState("actionBeingEdited",t.id),t.trigger("editing",!0)},stop(){this.setState("actionBeingEdited",null)}}),this.startChildApp("action",{actionId:t})},onEditFlow(){l().request("sidebar","start","flow",{flow:this.flow})}}),Ol={"program-actions":"add:programAction","program-flows":"add:programFlow",new:"add:newAction"},Tl=s.Z.extend({beforeStart:()=>[l().request("entities","fetch:programs:collection"),l().request("entities","fetch:programActions:collection"),l().request("entities","fetch:programFlows:collection")],onStart(e,t){let[n]=t;n.comparator="name",n.reset(n.filter({published:!0})),this.showView(new kl({lists:this.getLists(n)}))},getLists(e){const t=this.getProgramsOpts(e),n={itemType:"program-actions",text:_l.newActionText,onSelect:(0,a.ak)(this.triggerMethod,this,Ol.new)};return t.unshift({collection:new(r().Collection)([n]),itemClassName:"u-text--italic"}),t},getProgramsOpts(e){return e.map((e=>{const t=e.get("name"),n=e.getPublished(),i={itemType:"program-actions",text:_l.noResultsText};if(!n.length)return{itemClassName:"picklist--no-results",headingText:t,collection:new(r().Collection)([i]),getItemSearchText:a.ZT};const l=this.getProgramItemsOpts(n);return{headingText:t,collection:new(r().Collection)(l)}}))},getProgramItemsOpts(e){return e.map((e=>({text:e.get("name"),itemType:e.type,hasOutreach:"program-actions"===e.type&&e.hasOutreach(),onSelect:(0,a.ak)(this.triggerMethod,this,Ol[e.type],e)})))}});var Sl=n(2681),Dl=n(947),Vl=n.n(Dl),Pl=n(7405),Ml=n.n(Pl),El=n(1412),jl=n.n(El);const Al=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Nl=p.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)},onInitialize(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),Fl=p.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState(){this.view.model.isDone()?(0,Sl.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:()=>{this.view.triggerMethod("change:visible")}}):(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible"))}}),Il=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Nl,Fl],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:Vl(),templateContext(){return{icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},triggers:{click:"click"},onClick(){l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender(){this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState(){const e=this.model.isNew(),t=new j({stateId:this.model.get("_state"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",t)},showOwner(){const e=this.model.isNew(),t=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},showDueDay(){const e=this.model.isNew(),t=new $({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()});this.listenTo(t,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDay",t)},showDueTime(){const e=this.model.isNew()||!this.model.get("due_date"),t=new K({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()});this.listenTo(t,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",t)},showForm(){this.model.getForm()&&this.showChildView("form",new le({model:this.model}))}}),Rl=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Nl],regions:{owner:"[data-owner-region]"},template:Ml(),templateContext(){return{stateOptions:this.model.getState().get("options")}},triggers:{click:"click"},onClick(){l().trigger("event-router","flow",this.model.id)},onRender(){this.showOwner()},showOwner(){const e=this.model.isNew(),t=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)}}),ql=p.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:e=>"flows"===e.type?Rl:Il,emptyView:Al,viewComparator:(e,t)=>(0,Oe.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at")),viewFilter(e){let{model:t}=e;return!t.isDone()}}),Gl=p.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0},addWorkflow:"[data-add-workflow-region]"},ui:{loading:".js-loading"},template:jl(),triggers:{"click .js-archive":"click:archive"},onClickArchive(){l().trigger("event-router","patient:archive",this.model.id)},onRender(){(0,Sl.Z)({targets:this.ui.loading[0],opacity:.5,loop:!0,easing:"easeInOutSine",duration:400,direction:"alternate"})}}),Ll=s.Z.extend({childApps:{addWorkflow:Tl},onBeforeStart(e){let{patient:t}=e;this.patient=t,this.showView(new Gl({model:t})),this.getRegion("content").startPreloader()},beforeStart(e){let{patient:t}=e;const n={status:[u.lO.QUEUED,u.lO.STARTED].join(",")};return[l().request("entities","fetch:actions:collection:byPatient",{patientId:t.id,filter:n}),l().request("entities","fetch:flows:collection:byPatient",{patientId:t.id,filter:n})]},onStart(e,t,n){let{patient:a}=e,[i]=t,[l]=n;this.collection=new(r().Collection)([...i.models,...l.models]),this.showChildView("content",new ql({collection:this.collection}));const s=this.startChildApp("addWorkflow",{region:this.getRegion("addWorkflow"),patient:a});this.listenTo(s,{"add:newAction":this.onAddNewAction,"add:programAction":this.onAddProgramAction,"add:programFlow":this.onAddProgramFlow})},onAddNewAction(){l().trigger("event-router","patient:action:new",this.patient.id)},onAddProgramAction(e){const t=e.getAction({patientId:this.patient.id});t.saveAll().done((()=>{this.collection.unshift(t),l().trigger("event-router","patient:action",this.patient.id,t.id)}))},onAddProgramFlow(e){const t=e.getFlow(this.patient.id);t.saveAll().done((()=>{l().trigger("event-router","flow",t.id)}))},onEditAction(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}});var Bl=n(1184),Hl=n.n(Bl),Zl=n(2337),$l=n.n(Zl);const Wl=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"archive"))&&s(l,"archiveViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Yl=p.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)}}),Ul=p.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState(){this.view.model.isDone()?(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible")):(0,Sl.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:()=>{this.view.triggerMethod("change:visible")}})}}),zl=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Yl,Ul],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:Hl(),templateContext(){return{icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},triggers:{click:"click"},onClick(){l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender(){this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState(){const e=new j({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){const e=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)},showDueDay(){const e=new $({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueDay",e)},showDueTime(){const e=new K({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueTime",e)},showForm(){this.model.getForm()&&this.showChildView("form",new le({model:this.model}))}}),Ql=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Yl,Ul],regions:{state:"[data-state-region]",owner:"[data-owner-region]"},template:$l(),triggers:{click:"click"},onClick(){l().trigger("event-router","flow",this.model.id)},onRender(){this.showState(),this.showOwner()},showState(){const e=new j({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){const e=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)}}),Xl=p.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:e=>"flows"===e.type?Ql:zl,emptyView:Wl,viewComparator(e,t){let{model:n}=e,{model:a}=t;return(0,Oe.XQ)("desc",n.get("updated_at"),a.get("updated_at"))},viewFilter(e){let{model:t}=e;return"patient-events"===t.type||t.isDone()}}),Kl=p.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div>\n      <button class="patient__tab js-dashboard">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"archive"))&&r(l,"archiveViews"))&&r(l,"dashboardBtn"),t))+'</button>\n      <span class="patient__tab--selected">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"archive"))&&r(l,"archiveViews"))&&r(l,"archiveBtn"),t))+"</span>\n    </div>\n    <div data-content-region></div>\n  "},useData:!0}),triggers:{"click .js-dashboard":"click:dashboard"},onClickDashboard(){l().trigger("event-router","patient:dashboard",this.model.id)}}),Jl=s.Z.extend({onBeforeStart(e){let{patient:t}=e;this.showView(new Kl({model:t})),this.getRegion("content").startPreloader()},beforeStart(e){let{patient:t}=e;const n={status:u.lO.DONE};return[l().request("entities","fetch:actions:collection:byPatient",{patientId:t.id,filter:n}),l().request("entities","fetch:flows:collection:byPatient",{patientId:t.id,filter:n})]},onStart(e,t,n){let{patient:a}=e,[i]=t,[l]=n;this.collection=new(r().Collection)([...i.models,...l.models]),this.showChildView("content",new Xl({collection:this.collection}))},onEditAction(e){e.trigger("editing",!0)}}),es=p.View.extend({className:"patient__context-trail",template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"patientViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+d(typeof(s=null!=(s=u(n,"first_name")||(null!=t?u(t,"first_name"):t))?s:r)===c?s.call(o,{name:"first_name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:27}}}):s)+" "+d(typeof(s=null!=(s=u(n,"last_name")||(null!=t?u(t,"last_name"):t))?s:r)===c?s.call(o,{name:"last_name",hash:{},data:i,loc:{start:{line:7,column:28},end:{line:7,column:43}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},modelEvents:{"change:first_name change:last_name":"render"},onClickBack(){l().request("history","go:latestList")},templateContext:()=>({hasLatestList:l().request("history","has:latestList")})}),ts=p.View.extend({className:"patient__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="patient__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},onRender(){this.showChildView("contextTrail",new es({model:this.model}))}}),ns=Bi.extend({eventRoutes(){return{"patient:dashboard":(0,a.r$)(this.startCurrent,"dashboard"),"patient:archive":(0,a.r$)(this.startCurrent,"archive"),"patient:action":this.startPatientAction,"patient:action:new":this.startPatientAction}},childApps:{dashboard:Ll,archive:Jl,action:Zi,patient:bi},currentAppOptions(){return{region:this.getRegion("content"),patient:this.getOption("patient")}},onBeforeStart(){this.getRegion().startPreloader()},beforeStart(e){let{patientId:t}=e;return l().request("entities","fetch:patients:model",t)},onStart(e,t){let{currentRoute:n}=e;this.patient=t,this.setView(new ts({model:t})),this.showSidebar(),this.startRoute(n),this.showView()},startPatientAction(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editActionList(t)},fail(){this.startCurrent("dashboard")}}),this.startChildApp("action",{actionId:t,patientId:e})},startActionList(e){return e.isDone()?this.startCurrent("archive"):this.startCurrent("dashboard")},editActionList(e){const t=this.getCurrent()||this.startActionList(e);t.isRunning()?t.triggerMethod("edit:action",e):this.listenToOnce(t,"start",(()=>{t.triggerMethod("edit:action",e)}))},showSidebar(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})}});var as=n(7948);const is=new(r().Collection)(u.cB),ls=r().Model.extend({defaults(){return{actionsSortId:"sortCreatedDesc",flowsSortId:"sortCreatedDesc",actionsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},flowsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},isFiltering:!1,filters:{},clinicianId:this.currentClinician.id,teamId:this.currentClinician.getTeam().id,noOwner:!1,lastSelectedIndex:null,selectedActions:{},selectedFlows:{},searchQuery:"",listType:"flows"}},preinitialize(){this.currentClinician=l().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups()},initialize(){this.on("change",this.onChange)},onChange(){gi().set(`${this.id}_${this.currentClinician.id}-v3`,(0,a.CE)(this.attributes,"searchQuery","isFiltering"))},setDateFilters(e){return this.set(`${this.getType()}DateFilters`,(0,a.d9)(e))},getDateFilters(){return(0,a.d9)(this.get(`${this.getType()}DateFilters`))},getFilters(){return(0,a.d9)(this.get("filters"))},getType(){return this.get("listType")},isFlowType(){return"flows"===this.getType()},getSort(){return this.get(`${this.getType()}SortId`)},setSort(e){this.set(`${this.getType()}SortId`,e)},formatDateRange:(e,t,n)=>`${d()(e).startOf(t).format(n)},${d()(e).endOf(t).format(n)}`,getEntityDateFilter(){const{dateType:e,selectedDate:t,selectedMonth:n,selectedWeek:a,relativeDate:i}=this.getDateFilters(),l="due_date"===e?"YYYY-MM-DD":"";if(t)return{[e]:this.formatDateRange(t,"day",l)};if(n)return{[e]:this.formatDateRange(n,"month",l)};if(a)return{[e]:this.formatDateRange(a,"week",l)};const{prev:s,unit:o}=is.get(i||"thismonth").pick("prev","unit"),r=d()().subtract(s,o);return{[e]:this.formatDateRange(r,o,l)}},getEntityFilter(){const e=this.getFilters(),t=this.get("clinicianId"),n=this.get("teamId"),i=this.get("noOwner"),s=(0,a.CE)(e,"groupId"),o=[u.lO.QUEUED,u.lO.STARTED].join(","),r=this.getEntityDateFilter(),c={"owned-by":(0,a.l7)({status:o},r),"shared-by":(0,a.l7)({status:o},r),"new-past-day":{created_at:d()().subtract(24,"hours").format(),status:o},"updated-past-three-days":{updated_at:d()().startOf("day").subtract(3,"days").format(),status:o},"done-last-thirty-days":{updated_at:d()().startOf("day").subtract(30,"days").format(),status:u.lO.DONE}};if(this.groups.length&&(c[this.id].group=e.groupId||this.groups.pluck("id").join(",")),"shared-by"!==this.id&&t)c[this.id].clinician=t;else{const e=l().request("bootstrap","currentUser").can("app:worklist:clinician_filter");c[this.id].team=n,!i&&e||(c[this.id].clinician=as.Z)}return(0,a.S6)(s,((e,t)=>{null!==e&&(c[this.id][`@${t}`]=e)})),c[this.id]},getSelectedList(){return this.isFlowType()?this.get("selectedFlows"):this.get("selectedActions")},toggleSelected(e,t,n){const i=this.isFlowType()?"selectedFlows":"selectedActions",l=(0,a.d9)(this.get(i)),s=(0,a.l7)(l,{[e.id]:t});this.set({[i]:s,lastSelectedIndex:t?n:null})},isSelected(e){return!!this.getSelectedList()[e.id]},getSelected(e){const t=this.getSelectedList(),n=(0,a.u4)((0,a.XP)(t),((n,a)=>(t[a]&&e.get(a)&&n.push({id:a}),n)),[]);return l().request("entities",`${this.getType()}:collection`,n)},clearSelected(){const e=this.isFlowType()?"selectedFlows":"selectedActions";this.set({[e]:{},lastSelectedIndex:null}),this.trigger("select:none")},selectMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.isFlowType()?"selectedFlows":"selectedActions",i=this.get(n),l=e.reduce(((e,t)=>(e[t]=!0,e)),(0,a.d9)(i));this.set({[n]:l,lastSelectedIndex:t}),this.trigger("select:multiple")}}),ss=p.View.extend({className:"worklist-list__filters",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="worklist-list__all-filters" data-all-filters-region></div>\n    <div class="worklist-list__filter" data-group-filter-region></div>\n    <div class="worklist-list__filter" data-owner-toggle-region></div>\n  '},useData:!0}),regions:{allFilters:"[data-all-filters-region]",group:"[data-group-filter-region]",ownerToggle:"[data-owner-toggle-region]"}}),os=p.View.extend({modelEvents:{change:"render"},className:"button--link-large",tagName:"button",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:1,column:111},end:{line:1,column:127}}}):l)+")"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"worklist"))&&r(l,"filtersViews"))&&r(l,"allFiltersButton"),t))+"</span> "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"filtersCount"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:90},end:{line:1,column:135}}}))?l:"")},useData:!0}),triggers:{click:"click"},templateContext(){return{filtersCount:(0,a.dp)(this.model.omit(a.Ft))}}}),rs=T.Z.extend({viewOptions:{className:"button-filter",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:30}}}))},useData:!0})},picklistOptions:{attr:"name"}}),cs=g.ZP.patients.worklist.filtersApp,ds=s.Z.extend({childApps:{allFilters:Na},stateEvents:{"change:groupId":"showGroupsFilterView"},onStart(){const e=l().request("bootstrap","currentUser");this.canViewAssignedActions=e.can("app:worklist:clinician_filter"),this.groups=e.getGroups(),this.showView(new ss),this.showFilters()},showFilters(){this.showAllFiltersButtonView(),this.showGroupsFilterView()},showAllFiltersButtonView(){if(!l().request("bootstrap","currentOrg:directories").length)return;const e=this.showChildView("allFilters",new os({model:this.getState()}));this.listenTo(e,"click",this.showFiltersSidebar)},showFiltersSidebar(){if(this.isFiltering)return;this.isFiltering=!0,this.trigger("toggle:filtersSidebar",!0);const e=this.getState(),t=l().request("sidebar","start","filters",{state:e.attributes}),n=t.getState();t.listenTo(n,"change",((t,a)=>{let{unset:i}=a;i?e.clear():e.set(n.attributes)})),t.listenTo(e,"change",(()=>{n.set(e.attributes)})),this.listenTo(t,"stop",(()=>{this.isFiltering=!1,this.trigger("toggle:filtersSidebar",!1)}))},showGroupsFilterView(){if(this.groups.length<2)return;const e=this._getGroups(),t=e.get(this.getState("groupId"))||e.at(0),n=new rs({collection:e,state:{selected:t}});this.listenTo(n.getState(),"change:selected",((e,t)=>{let{id:n}=t;this.setState("groupId",n)})),this.showChildView("group",n)},_getGroups(){const e=this.groups.clone();return e.unshift({id:null,name:cs.allGroupsName}),e}}),us=r().Model.extend({initialize(e){let{collection:t}=e;const n=t.at(0);this.initBulkState(t,n),this.initBulkOwner(t,n)},initBulkState(e,t){const n=t.getState().id,a=e.some((e=>e.getState().id!==n));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner(e,t){const n=t.getOwner(),a=e.some((e=>e.getOwner().id!==n.id));this.set({ownerMulti:a,owner:a?null:n})},setState(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},getGroups(){return this.get("collection").getPatients().getSharedGroups()},someComplete(){return this.get("collection").some((e=>e.isDone()))},getData(){const{stateChanged:e,stateId:t,ownerChanged:n,owner:i}=this.attributes,l={};return e&&(l._state=t),n&&(l._owner=(0,a.ei)(i,"id","type")),l}}),hs=s.Z.extend({StateModel:us,onStart(){const e=new el({collection:this.getState("collection")}),t=new al({model:this.getState(),collection:this.getState("collection")});this.modal=l().request("modal","show:sidebar",{headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,a.r$)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit(){this.modal.disableSubmit(),!!this.getState("applyOwner")&&this.triggerMethod("applyOwner",this.getState("owner")),this.triggerMethod("save",this.getState().getData())},onStop(){this.modal.destroy()}});var ms=n(1962),ps=n(2908);const gs=new(r().Collection)(u.cB),fs=p.View.extend({tagName:"button",className:"button-filter button__group flex-grow",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:84}}}),{name:"formatMessage",hash:{type:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:95}}}))},useData:!0}),onRender(){this.$el.toggleClass("button--blue",this.getOption("selected")===this.model.id)},triggers:{click:"click"}}),ws=p.CollectionView.extend({modelEvents:{"change:dateType":"render"},className:"flex",childView:fs,childViewTriggers:{click:"click"},onClick(e){let{model:t}=e;this.model.set("dateType",t.id)},childViewOptions(){return{selected:this.model.get("dateType")}}}),vs=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedDate"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:44}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:44},end:{line:1,column:64}}}))},useData:!0}),bs=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedMonth"):t,"MMM YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:43}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:63}}}))},useData:!0}),ys=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedWeek"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:44}}}))+" - "+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedEndWeek"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:94}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:94},end:{line:1,column:114}}}))},useData:!0}),_s=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.components.dateFilterComponent.relativeDate",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:87}}}),{name:"formatMessage",hash:{relativeTo:null!=t?r(t,"relativeDate"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:114},end:{line:1,column:134}}}))},useData:!0}),xs=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dateFilterComponent"))&&o(l,"dateFilterViews"))&&o(l,"defaultTemplate"))&&o(l,"thisMonth"),t))+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:100},end:{line:1,column:120}}}))},useData:!0}),ks=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-secondary--compact u-margin--r-8 js-prev">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"angle-left",{name:"far",hash:{},data:i,loc:{start:{line:2,column:68},end:{line:2,column:88}}}))+"</button>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:97},end:{line:2,column:122}}}):l)+'<button class="button-filter js-date">\n      '+r((d(n,"far")||t&&d(t,"far")||o).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:4,column:6},end:{line:4,column:29}}}))+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:29},end:{line:4,column:54}}}):l)+r((d(n,"formatMessage")||t&&d(t,"formatMessage")||o).call(s,(d(n,"intlGet")||t&&d(t,"intlGet")||o).call(s,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:90}}}),{name:"formatMessage",hash:{type:null!=t?d(t,"dateType"):t},data:i,loc:{start:{line:5,column:6},end:{line:5,column:107}}}))+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:107},end:{line:5,column:132}}}):l)+":\n      <span data-date-picker-label-region></span>\n    </button>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:13},end:{line:7,column:38}}}):l)+'<button class="button-secondary--compact u-margin--l-8 js-next">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"angle-right",{name:"far",hash:{},data:i,loc:{start:{line:8,column:68},end:{line:8,column:89}}}))+"</button>\n  "},useData:!0}),regions:{datepicker:{el:"[data-date-picker-label-region]",replaceElement:!0}},ui:{next:".js-next",prev:".js-prev",date:".js-date"},triggers:{"click @ui.prev":"click:prev","click @ui.next":"click:next","click @ui.date":"click:date"},getLabelTemplate(){return this.model.get("selectedDate")?vs:this.model.get("selectedMonth")?bs:this.model.get("selectedWeek")?ys:this.model.get("relativeDate")?_s:xs},onRender(){this.showChildView("datepicker",{tagName:"span",model:this.model,template:this.getLabelTemplate(),templateContext(){return this.model.get("selectedWeek")?{selectedEndWeek:this.model.dayjs("selectedWeek").endOf("week")}:{}}}),this.getTooltips()},getTooltips(){const e=this.getTooltipMessages();new k.Z({message:e.prevMessage,uiView:this,ui:this.ui.prev}),new k.Z({message:e.nextMessage,uiView:this,ui:this.ui.next})},getTooltipMessages(){if(this.model.get("selectedDate"))return this._getTooltipDayMessage(this.model.dayjs("selectedDate"));if(this.model.get("selectedMonth"))return this._getTooltipMonthMessage(this.model.dayjs("selectedMonth"));if(this.model.get("selectedWeek"))return this._getTooltipWeekMessage(this.model.dayjs("selectedWeek"));const e=this.model.get("relativeDate"),{prev:t,unit:n}=gs.get(e||"thismonth").pick("prev","unit");return this[{day:"_getTooltipDayMessage",month:"_getTooltipMonthMessage",week:"_getTooltipWeekMessage"}[n]].call(this,d()().subtract(t,n).startOf(n))},_getTooltipDayMessage:e=>({prevMessage:d()(e).subtract(1,"day").format("MM/DD/YYYY"),nextMessage:d()(e).add(1,"day").format("MM/DD/YYYY")}),_getTooltipMonthMessage:e=>({prevMessage:d()(e).subtract(1,"month").format("MMM YYYY"),nextMessage:d()(e).add(1,"month").format("MMM YYYY")}),_getTooltipWeekMessage(e){const t=d()(e).subtract(1,"week"),n=d()(e).add(1,"week");return{prevMessage:`${t.format("MM/DD/YYYY")} - ${t.endOf("week").format("MM/DD/YYYY")}`,nextMessage:`${n.format("MM/DD/YYYY")} - ${n.endOf("week").format("MM/DD/YYYY")}`}}}),Cs=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="datepicker__button js-today">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"components"))&&h(l,"dateFilterComponent"))&&h(l,"dateFilterViews"))&&h(l,"actionView"))&&h(l,"today"),t))+"</button>"+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:d)===u?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:148},end:{line:2,column:173}}}):s)+'<button class="datepicker__button js-current-week">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"components"))&&h(l,"dateFilterComponent"))&&h(l,"dateFilterViews"))&&h(l,"actionView"))&&h(l,"week"),t))+"</button>"+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:d)===u?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:154},end:{line:3,column:179}}}):s)+'<button class="datepicker__button js-current-month">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"components"))&&h(l,"dateFilterComponent"))&&h(l,"dateFilterViews"))&&h(l,"actionView"))&&h(l,"month"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-current-week":"click:currentWeek","click .js-today":"click:today","click .js-current-month":"click:currentMonth"}}),Os=p.View.extend({className:"date-filter",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="date-filter__label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"dateFilterComponent"))&&s(l,"dateFilterViews"))&&s(l,"layoutView"))&&s(l,"dateLabel"),t))+'</div>\n    <div class="date-filter__toggle" data-date-type-region></div>\n    <div data-component-region></div>\n  '},useData:!0}),regions:{dateType:"[data-date-type-region]",component:"[data-component-region]"}}),Ts=ps.Z.extend({className:"date-filter__ranges",itemTemplate:m().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:121},end:{line:1,column:136}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.components.dateFilterComponent.relativeDate",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:87}}}),{name:"formatMessage",hash:{relativeTo:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:103}}}))+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:103},end:{line:1,column:143}}}))?l:"")},useData:!0}),itemTemplateContext(){return{isSelected:this.model===this.state.get("selected")}},viewEvents:{"picklist:item:select":"onItemSelect"},onItemSelect(e){let{model:t}=e;this.triggerMethod("select",t.id)}}),Ss=new(r().Collection)(u.cB),Ds={day:"setDate",week:"setWeek",month:"setMonth"},Vs=r().Model.extend({setRelativeDate(e,t){this.set({relativeDate:e,selectedDate:null,selectedWeek:null,selectedMonth:null,dateType:t})},setMonth(e,t){this.set({relativeDate:null,selectedDate:null,selectedWeek:null,selectedMonth:e,dateType:t||this.get("dateType")})},setWeek(e,t){this.set({relativeDate:null,selectedDate:null,selectedWeek:e,selectedMonth:null,dateType:t||this.get("dateType")})},setDate(e,t){this.set({relativeDate:null,selectedDate:e,selectedWeek:null,selectedMonth:null,dateType:t||this.get("dateType")})},incrementBackward(){if(this.dayjs("selectedDate"))return void this.setDate(this.dayjs("selectedDate").subtract(1,"day"));if(this.dayjs("selectedMonth"))return void this.setMonth(this.dayjs("selectedMonth").subtract(1,"month").startOf("month"));if(this.dayjs("selectedWeek"))return void this.setWeek(this.dayjs("selectedWeek").subtract(1,"week").startOf("week"));const e=this.get("relativeDate")||"thismonth",{prev:t,unit:n}=Ss.get(e).pick("prev","unit");this[Ds[n]].call(this,d()().subtract(t+1,n).startOf(n))},incrementForward(){if(this.dayjs("selectedDate"))return void this.setDate(this.dayjs("selectedDate").add(1,"day"));if(this.dayjs("selectedMonth"))return void this.setMonth(this.dayjs("selectedMonth").add(1,"month").startOf("month"));if(this.dayjs("selectedWeek"))return void this.setWeek(this.dayjs("selectedWeek").add(1,"week").startOf("week"));const e=this.get("relativeDate")||"thismonth",{prev:t,unit:n}=Ss.get(e).pick("prev","unit");this[Ds[n]].call(this,d()().add(1-t,n).startOf(n))}}),Ps=new(r().Collection)([...u.cB,{id:"calendar"}]),Ms=B.Z.extend({stateEvents:{change:"show","change:selectedDate":"onChangeStateSelectedDate","change:selectedMonth":"onChangeStateSelectedMonth"},getActionsView(){const e=new Cs;return this.listenTo(e,{"click:today":this.onClickToday,"click:currentWeek":this.onClickCurrentWeek,"click:currentMonth":this.onClickCurrentMonth}),e},onClickToday(){this.triggerMethod("select:today")},onClickCurrentWeek(){this.triggerMethod("select:currentWeek")},onClickCurrentMonth(){this.triggerMethod("select:currentMonth")},onSelectToday:a.ZT,regionOptions:a.ZT}),Es=Ia.Z.extend({dateTypes:["create_at","updated_at","due_date"],StateModel:Vs,stateEvents:{change:"foo"},ViewClass:ks,viewOptions(){return{model:this.getState()}},viewEvents:{"click:date"(){this.showPop()},"click:prev"(){this.getState().incrementBackward()},"click:next"(){this.getState().incrementForward()}},initialize(){this.dateTypes=new(r().Collection)((0,ms.Z)(this.getOption("dateTypes"),"id")),this.dateTypeState=new(r().Model)({dateType:this.getState("dateType")})},showPop(){const e=this.getView().getBounds(this.getView().$el);this.popView=new Os,this.popView.listenTo(this,"destroy",this.popView.destroy),this.listenTo(this.popView,"destroy",(()=>{this.setState("dateType",this.dateTypeState.get("dateType"))})),this.showRanges(),this.showDateTypes(),l().request("app","show:pop",this.popView,{popWidth:256,...e})},showDateTypes(){this.popView.showChildView("dateType",new ws({collection:this.dateTypes,model:this.dateTypeState}))},showRanges(){const e=this.getState(),{selectedDate:t,selectedMonth:n,selectedWeek:a,relativeDate:i}=e.pick("selectedDate","selectedMonth","selectedWeek","relativeDate"),l=Ps.get(i||!t&&!n&&!a&&"thismonth"),s=new Ts({lists:[{collection:Ps}],state:{selected:l}});this.listenTo(s,"select",(t=>{"calendar"!==t?e.setRelativeDate(t,this.dateTypeState.get("dateType")):this.showDatePicker()})),this.popView.showChildView("component",s)},showDatePicker(){const e=this.getState(),t=new Ms({state:e.pick("selectedDate","selectedMonth"),canSelectMonth:!0});this.listenTo(t,{"select:currentWeek"(){e.setRelativeDate("thisweek",this.dateTypeState.get("dateType")),this.popView.destroy()},"select:today"(){e.setRelativeDate("today",this.dateTypeState.get("dateType")),this.popView.destroy()},"select:currentMonth"(){e.setRelativeDate("thismonth",this.dateTypeState.get("dateType")),this.popView.destroy()},"change:selectedDate"(t){e.setDate(t,this.dateTypeState.get("dateType")),this.popView.destroy()},"change:selectedMonth"(t){e.setMonth(t,this.dateTypeState.get("dateType")),this.popView.destroy()}}),t.showIn(this.popView.getRegion("component"))}}),js=m().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <span class="list-search__search-icon">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"magnifying-glass",{name:"far",hash:{},data:i,loc:{start:{line:2,column:41},end:{line:2,column:67}}}))+'</span>\n  <input class="list-search__input input-primary--small js-input w-100" type="text" '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:84},end:{line:3,column:117}}}))?l:"")+' placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"shared"))&&c(l,"components"))&&c(l,"listSearch"))&&c(l,"listSearchViews"))&&c(l,"placeholder"),t))+'"/>\n  <span class="list-search__clear-icon js-clear is-hidden">'+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"circle-xmark",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:59},end:{line:4,column:81}}}))+"</span>\n"},useData:!0}),As=p.View.extend({behaviors:{InputWatcherBehavior:_.Z},className:"list-search__container",template:js,templateContext(){return{isDisabled:this.getOption("state").isDisabled,query:this.getOption("state").query}},ui:{input:".js-input",clear:".js-clear"},triggers:{"click @ui.clear":"clear"},onWatchChange(e){this.ui.clear.toggleClass("is-hidden",!e.length)},onClear(){this.ui.input.val(""),this.ui.clear.addClass("is-hidden")},onRender(){this.$el.toggleClass("is-disabled",this.getOption("state").isDisabled)}}),Ns=r().Model.extend({defaults:{query:""}}),Fs=Ia.Z.extend({StateModel:Ns,ViewClass:As,viewEvents:{"watch:change":"onViewWatchChange",clear:"onViewClear"},onViewClear(){this.setState("query","")},onViewWatchChange(e){this.setState("query",e)}});var Is=n(9386),Rs=n(2889);const qs=e=>{const t=(0,a.UI)((0,Rs.Z)(e),RegExp.escape);return(0,a.UI)(t,(function(e){return new RegExp(`\\b${e}`,"i")}))};var Gs=n(9565),Ls=n.n(Gs);const Bs=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.actionViews.actionListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:76}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"team"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:105}}}))},useData:!0}),Hs=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"actionViews"))&&s(l,"actionEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Zs=p.View.extend({className:"table-list__item work-list__item",tagName:"tr",template:Ls(),regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]",details:"[data-details-region]"},templateContext(){return{flowName:this.flow&&this.flow.get("name"),patient:this.model.getPatient().attributes,owner:this.model.getOwner().get("name"),state:this.model.getState().get("name"),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},initialize(e){let{state:t}=e;this.state=t,this.flow=this.model.getFlow(),this.listenTo(t,{"select:multiple":this.showCheck,"select:none":this.showCheck})},modelEvents:{change:"render"},triggers:{click:"click","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient","click .js-no-click":"prevent-row-click"},onClick(){this.flow?l().trigger("event-router","flow:action",this.flow.id,this.model.id):l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onRender(){this.showCheck(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showForm(),this.showDetailsTooltip()},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new O({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){this.stateComponent=new j({stateId:this.model.get("_state"),isCompact:!0}),this.listenTo(this.stateComponent,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",this.stateComponent)},showOwner(){const e=this.model.isDone();this.ownerComponent=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)},showDueDate(){const e=this.model.isDone();this.dueDateComponent=new $({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueDateComponent,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDate",this.dueDateComponent)},showDueTime(){const e=this.model.isDone()||!this.model.get("due_date");this.dueTimeComponent=new K({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueTimeComponent,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",this.dueTimeComponent)},showForm(){this.model.getForm()&&this.showChildView("form",new le({model:this.model}))},showDetailsTooltip(){this.model.get("details")&&this.showChildView("details",new se({model:this.model}))}});var $s=n(178),Ws=n.n($s);const Ys=m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.flowViews.flowListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:72}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"team"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:101}}}))},useData:!0}),Us=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"flowViews"))&&s(l,"flowEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),zs=p.View.extend({tagName:"span",className:"worklist-list__flow-status",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+o(e.lambda(null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"color"):l,t))+'">'+o((d(n,"fa")||t&&d(t,"fa")||c).call(r,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"iconType"):l,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+"</span>"+o("function"==typeof(s=null!=(s=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?s:c)?s.call(r,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:1,column:100},end:{line:1,column:125}}}):s)},useData:!0}),templateContext(){return{stateOptions:this.model.getState().get("options")}}}),Qs=p.View.extend({className:"table-list__item work-list__item",tagName:"tr",template:Ws(),regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]"},templateContext(){return{patient:this.model.getPatient().attributes,owner:this.model.getOwner().get("name"),state:this.model.getState().get("name")}},modelEvents:{change:"render"},triggers:{click:"click","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient","click .js-no-click":"prevent-row-click"},initialize(e){let{state:t}=e;this.state=t,this.listenTo(t,{"select:multiple":this.showCheck,"select:none":this.showCheck})},onClick(){l().trigger("event-router","flow",this.model.id)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onRender(){this.showCheck(),this.showState(),this.showOwner()},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new O({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){if(!this.model.isDone()){const e=new zs({model:this.model});return void this.showChildView("state",e)}const e=new Ye({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){const e=this.model.isDone();this.ownerComponent=new L({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)}});var Xs=n(2855),Ks=n.n(Xs),Js=n(2016),eo=n.n(Js);const to=g.ZP.patients.worklist.worklistViews,no=p.View.extend({className:"flex-region",template:Ks(),regions:{dateFilter:"[data-date-filter-region]",filters:"[data-filters-region]",toggle:"[data-toggle-region]",sort:"[data-sort-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:y.Z},selectAll:"[data-select-all-region]",title:{el:"[data-title-region]",replaceElement:!0},search:"[data-search-region]"},childViewEvents:{"update:listDom":"fixWidth"},triggers:{"click @ui.select":"click:select"},ui:{listHeader:".js-list-header",list:".js-list",select:".js-select"},initialize(){const e=l().channel("user-activity");this.listenTo(e,"window:resize",this.fixWidth)},fixWidth(){if(!this.isRendered())return;const e=this.ui.listHeader.width(),t=this.ui.list.contents().width(),n=parseInt(this.ui.list.css("paddingRight"),10),a=e-t;this.ui.list.css({paddingRight:n-a+"px"})}}),ao=p.View.extend({tagName:"button",className:"button--checkbox",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),io=p.View.extend({template:m().template({1:function(e,t,n,a,i){return"button--blue"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="'+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"isFlowList"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:19},end:{line:2,column:64}}}))?l:"")+' button-filter button__group js-toggle-actions">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:2,column:112},end:{line:2,column:132}}}))+"<span>"+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"worklist"))&&u(l,"worklistViews"))&&u(l,"typeToggleView"))&&u(l,"actionsButton"),t))+"</span></button>"+c("function"==typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:226},end:{line:2,column:251}}}):s)+'<button class="'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:19},end:{line:3,column:56}}}))?l:"")+' button-filter button__group js-toggle-flows">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:102},end:{line:3,column:118}}}))+"<span>"+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"worklist"))&&u(l,"worklistViews"))&&u(l,"typeToggleView"))&&u(l,"flowsButton"),t))+"</span></button>\n  "},useData:!0}),templateContext(){return{isFlowList:this.getOption("isFlowList")}},triggers:{"click .js-toggle-actions":"click:toggleActions","click .js-toggle-flows":"click:toggleFlows"},ui:{buttons:"button"},onClickToggleActions(){this.triggerMethod("toggle:listType","actions")},onClickToggleFlows(){this.triggerMethod("toggle:listType","flows")}}),lo=p.View.extend({template:m().template({1:function(e,t,n,a,i){return"button--blue"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"far",hash:{},data:i,loc:{start:{line:3,column:89},end:{line:3,column:104}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-filter-toggle '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"noOwner"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:40},end:{line:2,column:74}}}))?l:"")+'">\n      '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"filtersViews"))&&o(l,"noOwnerToggleView"))&&o(l,"noOwner"),t))+(null!=(l=o(n,"if").call(s,null!=t?o(t,"noOwner"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:74},end:{line:3,column:111}}}))?l:"")+"\n    </button>\n  "},useData:!0}),modelEvents:{"change:noOwner":"render"},triggers:{click:"click"}}),so=p.View.extend({regions:{owner:"[data-owner-filter-region]",ownerToggle:"[data-owner-toggle-region]"},className:"flex list-page__title-filter",template:m().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="u-text--nowrap">\n        '+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.worklistViews.listTitleView.listLabels",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:24},end:{line:5,column:92}}}),{name:"formatMessage",hash:{title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:5,column:8},end:{line:5,column:111}}}))+"\n      </div>\n      <div data-owner-filter-region></div>\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.worklistViews.listTitleView.listTitles",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:22},end:{line:9,column:90}}}),{name:"formatMessage",hash:{owner:null!=t?o(t,"owner"):t,team:null!=t?o(t,"team"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:9,column:6},end:{line:9,column:131}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="list-page__title-icon">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"list",{name:"far",hash:{},data:i,loc:{start:{line:2,column:40},end:{line:2,column:54}}}))+"</span>\n"+(null!=(l=c(n,"if").call(s,null!=t?c(t,"showOwnerDroplist"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:4},end:{line:10,column:11}}}))?l:"")+'    <span class="list-page__header-icon js-title-info">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:11,column:55},end:{line:11,column:76}}}))+'</span>\n    <div class="u-margin--l-24" data-owner-toggle-region></div>\n    '},useData:!0}),ui:{tooltip:".js-title-info"},templateContext(){return{team:this.getOption("team").get("name"),owner:this.getOption("owner").get("name"),worklistId:(0,Is.Z)(this.getOption("worklistId")),isFlowList:this.getOption("isFlowList"),showOwnerDroplist:this.getOption("showOwnerDroplist")}},onRender(){const e=this.getOption("isFlowList")?Ys:Bs;new k.Z({message:(0,g.SM)(e,this.templateContext()),uiView:this,ui:this.ui.tooltip,orientation:"vertical"})}}),oo=p.View.extend({template:eo(),tagName:"tr",templateContext(){return{isFlowList:this.getOption("isFlowList")}}}),ro=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"worklistViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),co=p.CollectionView.extend({className:"table-list",tagName:"table",childView(){return this.isFlowList?Qs:Zs},emptyView(){return this.state.get("searchQuery")?ro:this.isFlowList?Us:Hs},childViewOptions(){return{state:this.state}},childViewTriggers:{render:"listItem:render","click:patientSidebarButton":"click:patientSidebarButton",select:"select"},onListItemRender(e){e.searchString=e.$el.text()},initialize(e){let{state:t}=e;this.state=t,this.isFlowList=t.isFlowType(),this.listenTo(t,"change:searchQuery",this.searchList)},onAttach(){this.triggerMethod("update:listDom",this)},onRenderChildren(){this.isAttached()&&(this.triggerMethod("update:listDom",this),this.triggerMethod("filtered",this.children.map("model")))},onSelect(e,t){const n=this.state.isSelected(e.model),a=this.children.findIndexByView(e),i=this.state.get("lastSelectedIndex");!t||null===i||n?this.state.toggleSelected(e.model,!n,a):this.handleClickShiftMultiSelect(a,i)},handleClickShiftMultiSelect(e,t){const n=Math.min(e,t),a=Math.max(e,t),i=this.children.map((e=>e.model.id)).slice(n,a+1);this.state.selectMultiple(i,e)},searchList(e,t){if(!t)return void this.removeFilter();const n=qs(t);this.setFilter((function(e){let{searchString:t}=e;return(0,a.yW)(n,(function(e){return e.test(t)}))}))}}),uo=[{id:"sortDueAsc",text:to.sortDueOptions.asc,comparator(e,t){const n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,Oe.XQ)("asc",e.model.get("due_time"),t.model.get("due_time")):(0,Oe.XQ)("asc",n,a)}},{id:"sortDueDesc",text:to.sortDueOptions.desc,comparator(e,t){const n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,Oe.XQ)("desc",e.model.get("due_time"),t.model.get("due_time")):(0,Oe.XQ)("desc",n,a)}}],ho=[{id:"sortPatientAsc",text:to.sortPatientOptions.asc,comparator:(e,t)=>(0,Oe.XQ)("asc",e.model.getPatient().getSortName(),t.model.getPatient().getSortName())},{id:"sortPatientDesc",text:to.sortPatientOptions.desc,comparator:(e,t)=>(0,Oe.XQ)("desc",e.model.getPatient().getSortName(),t.model.getPatient().getSortName())}],mo=[{id:"sortUpdateAsc",text:to.sortUpdateOptions.asc,comparator:(e,t)=>(0,Oe.XQ)("asc",e.model.get("updated_at"),t.model.get("updated_at"))},{id:"sortUpdateDesc",text:to.sortUpdateOptions.desc,comparator:(e,t)=>(0,Oe.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))}],po=[{id:"sortCreatedAsc",text:to.sortCreatedOptions.asc,comparator:(e,t)=>(0,Oe.XQ)("asc",e.model.get("created_at"),t.model.get("created_at"))},{id:"sortCreatedDesc",text:to.sortCreatedOptions.desc,comparator:(e,t)=>(0,Oe.XQ)("desc",e.model.get("created_at"),t.model.get("created_at"))}],go=T.Z.extend({align:"right",popWidth:248,picklistOptions:{headingText:to.sortDroplist.headingText},viewOptions:{className:"button-filter",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"arrow-down-arrow-up",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:29}}}))+r("function"==typeof(l=null!=(l=c(n,"text")||(null!=t?c(t,"text"):t))?l:o)?l.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:29},end:{line:1,column:37}}}):l)+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:37},end:{line:1,column:57}}}))},useData:!0})}}),fo=g.ZP.patients.worklist.filtersApp,wo=s.Z.extend({StateModel:ls,childApps:{filters:{AppClass:ds,regionName:"filters",restartWithParent:!1,getOptions:["currentClinician"]},bulkEditActions:cl,bulkEditFlows:hs},stateEvents:{"change:listType change:clinicianId change:teamId change:noOwner change:filters":"restart","change:actionsDateFilters change:flowsDateFilters":"restart","change:actionsSortId":"onChangeStateSort","change:flowsSortId":"onChangeStateSort","change:selectedFlows":"onChangeSelected","change:selectedActions":"onChangeSelected"},onChangeStateSort(){this.getChildView("list").setComparator(this.getComparator())},onChangeSelected(){this.toggleBulkSelect()},initListState(){const e=l().request("bootstrap","currentUser"),t=gi().get(`${this.worklistId}_${e.id}-v3`),n=this.getState("filters");t&&(t.filters=(0,a.l7)({},n,t.filters),t.lastSelectedIndex=null),this.setState((0,a.l7)({id:this.worklistId},t))},onBeforeStart(e){let{worklistId:t}=e;const n=this.getState("isFiltering");if(this.isRestarting())return n||l().request("sidebar","close"),this.showListTitle(),this.showTypeToggleView(),this.showSortDroplist(),this.showTableHeaders(),this.showDateFilter(),void this.getRegion("list").startPreloader();this.worklistId=t,this.initListState();const a=l().request("bootstrap","currentUser");this.shouldShowClinician="shared-by"!==this.getState().id,this.shouldShowTeam="owned-by"!==this.getState().id,this.canViewAssignedActions=a.can("app:worklist:clinician_filter"),this.groups=a.getGroups(),this.showView(new no({worklistId:this.worklistId,state:this.getState()})),this.getRegion("list").startPreloader(),this.showDisabledSelectAll(),this.showSortDroplist(),this.showTableHeaders(),this.showListTitle(),this.showTypeToggleView(),this.showSearchView(),this.showDateFilter(),this.startFiltersApp()},beforeStart(){const e=this.getState().getEntityFilter();return l().request("entities",`fetch:${this.getState().getType()}:collection`,{filter:e})},onStart(e,t){this.collection=t,this.filteredCollection=t.clone();const n=new co({collection:this.collection,state:this.getState(),viewComparator:this.getComparator()});this.listenTo(n,"filtered",(e=>{this.filteredCollection.reset(e),this.toggleBulkSelect()})),this.listenTo(n,"click:patientSidebarButton",(e=>{let{model:t}=e;const n=t.getPatient();l().request("sidebar","start","patient",{patient:n})})),this.showChildView("list",n),this.showSearchView(),this.toggleBulkSelect()},startFiltersApp(){const e=this.startChildApp("filters",{state:this.getState().getFilters()});this.listenTo(e.getState(),"change",(e=>{let{attributes:t}=e;this.setState({filters:(0,a.d9)(t)})})),this.listenTo(e,"toggle:filtersSidebar",(e=>{this.setState("isFiltering",e)}))},toggleBulkSelect(){if(this.selected=this.getState().getSelected(this.filteredCollection),this.showSelectAll(),this.selected.length)return this.getChildApp("filters").stop(),void this.showBulkEditButtonView();this.startFiltersApp()},onClickBulkCancel(){this.getState().clearSelected()},onClickBulkEdit(){const e=this.getState().isFlowType()?"bulkEditFlows":"bulkEditActions",t=this.startChildApp(e,{state:{collection:this.selected}});this.listenTo(t,{applyOwner(e){this.selected.applyOwner(e)},save(e){this.selected.save(e).done((()=>{this.showUpdateSuccess(this.selected.length),t.stop(),this.getState().clearSelected()})).fail((()=>{l().request("alert","show:error",g.ZP.patients.worklist.worklistApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const e=this.selected.length;this.selected.destroy().then((()=>{this.showDeleteSuccess(e),t.stop(),this.getState().clearSelected()}))}})},showDisabledSelectAll(){this.showChildView("selectAll",new ao({isDisabled:!0}))},showSelectAll(){if(!this.filteredCollection.length)return void this.showDisabledSelectAll();const e=this.selected.length===this.filteredCollection.length,t=!this.selected.length,n=new ao({isSelectAll:e,isSelectNone:t});this.listenTo(n,"click",this.onClickBulkSelect),this.showChildView("selectAll",n)},onClickBulkSelect(){this.selected.length!==this.filteredCollection.length?this.getState().selectMultiple(this.filteredCollection.map("id")):this.getState().clearSelected()},getComparator(){const e=this.getState().getSort();return this.sortOptions.get(e).get("comparator")},getSortOptions(){return this.getState().isFlowType()?(0,a.G0)(ho,po,mo):(0,a.G0)(ho,uo,po,mo)},showDeleteSuccess(e){this.getState().isFlowType()?l().request("alert","show:success",(0,g.SM)(sl,{itemCount:e})):l().request("alert","show:success",(0,g.SM)(ol,{itemCount:e}))},showUpdateSuccess(e){this.getState().isFlowType()?l().request("alert","show:success",(0,g.SM)(il,{itemCount:e})):l().request("alert","show:success",(0,g.SM)(ll,{itemCount:e}))},showDateFilter(){if("shared-by"!==this.getState().id&&"owned-by"!==this.getState().id)return;const e=this.getState(),t=e.isFlowType()?["created_at","updated_at"]:["created_at","updated_at","due_date"],n=new Es({dateTypes:t,state:e.getDateFilters(),region:this.getRegion("dateFilter")});this.listenTo(n.getState(),{change(t){let{attributes:n}=t;e.setDateFilters(n)}}),n.show()},showSortDroplist(){this.sortOptions=new(r().Collection)(this.getSortOptions());const e=new go({collection:this.sortOptions,state:{selected:this.sortOptions.get(this.getState().getSort())}});this.listenTo(e.getState(),"change:selected",((e,t)=>{this.getState().setSort(t.id)})),this.showChildView("sort",e)},showTableHeaders(){const e=new oo({isFlowList:this.getState().isFlowType()});this.showChildView("table",e)},showListTitle(){const e=l().request("entities","clinicians:model",this.getState("clinicianId")),t=l().request("entities","teams:model",this.getState("teamId")),n=this.shouldShowClinician&&this.canViewAssignedActions||this.shouldShowTeam,a="shared-by"===this.getState().id&&this.canViewAssignedActions,i=this.showChildView("title",new so({owner:e,team:t,worklistId:this.worklistId,isFlowList:this.getState().isFlowType(),showOwnerDroplist:n}));n&&this.showOwnerDroplist(i,e,t),a&&this.showOwnerToggle(i)},showOwnerDroplist(e,t,n){const a=new L(this.getOwnerFilterOptions(t,n));this.listenTo(a,{"change:owner"(e){let{id:t,type:n}=e;"teams"===n?this.setState({teamId:t,clinicianId:null}):this.setState({clinicianId:t,teamId:null})}}),e.showChildView("owner",a)},showOwnerToggle(e){const t=new lo({model:this.getState()});this.listenTo(t,"click",(()=>{this.toggleState("noOwner")})),e.showChildView("ownerToggle",t)},getOwnerFilterOptions(e,t){const n=this.getState("clinicianId"),a={owner:this.shouldShowClinician&&n?e:t,groups:this.shouldShowClinician&&this.canViewAssignedActions?this.groups:null,isTitleFilter:!0,headingText:this.shouldShowClinician?fo.ownerFilterHeadingText:fo.teamsFilterHeadingText,hasTeams:this.shouldShowTeam,hasCurrentClinician:this.shouldShowClinician,align:"right"};return this.shouldShowClinician||(a.placeholderText=fo.teamsFilterPlaceholderText),a},showTypeToggleView(){const e=new io({isFlowList:"flows"===this.getState("listType")});this.listenTo(e,"toggle:listType",(e=>{this.setState({listType:e,lastSelectedIndex:null})})),this.showChildView("toggle",e)},showSearchView(){const e=this.showChildView("search",new Fs({state:{query:this.getState("searchQuery"),isDisabled:!this.collection||!this.collection.length}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},showBulkEditButtonView(){const e=this.showChildView("filters",new Ki({isFlowType:this.getState().isFlowType(),collection:this.selected}));this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit})},setSearchState(e,t){this.setState({searchQuery:t.length>2?t:"",lastSelectedIndex:null})}}),vo=new(r().Collection)(u.cB),bo=r().Model.extend({defaults(){return{isFiltering:!1,filters:{},clinicianId:this.currentClinician.id,dateFilters:{dateType:"due_date",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},selectedActions:{},searchQuery:""}},preinitialize(){this.currentClinician=l().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups()},initialize(){this.on("change",this.onChange)},onChange(){gi().set(`schedule_${this.currentClinician.id}-v3`,(0,a.CE)(this.attributes,"searchQuery","isFiltering"))},getFilters(){return(0,a.d9)(this.get("filters"))},getDateFilters(){return(0,a.d9)(this.get("dateFilters"))},getEntityDateFilter(){const{selectedDate:e,selectedMonth:t,selectedWeek:n,relativeDate:a}=this.getDateFilters();if(e)return{due_date:this.formatDateRange(e,"day")};if(t)return{due_date:this.formatDateRange(t,"month")};if(n)return{due_date:this.formatDateRange(n,"week")};const{prev:i,unit:l}=vo.get(a||"thismonth").pick("prev","unit"),s=d()().subtract(i,l);return{due_date:this.formatDateRange(s,l)}},getEntityFilter(){const e=this.getFilters(),t=this.get("clinicianId"),n=(0,a.CE)(e,"groupId"),i=[u.lO.QUEUED,u.lO.STARTED].join(","),l=this.getEntityDateFilter(),s=(0,a.l7)({clinician:t,status:i},l);return this.groups.length&&(s.group=e.groupId||this.groups.pluck("id").join(",")),(0,a.S6)(n,((e,t)=>{null!==e&&(s[`@${t}`]=e)})),s},formatDateRange(e,t){const n="YYYY-MM-DD";return`${d()(e).startOf(t).format(n)},${d()(e).endOf(t).format(n)}`},toggleSelected(e,t){const n=(0,a.d9)(this.get("selectedActions"));this.set("selectedActions",(0,a.l7)(n,{[e.id]:t}))},isSelected(e){return!!this.get("selectedActions")[e.id]},getSelected(e){const t=this.get("selectedActions"),n=(0,a.u4)((0,a.XP)(t),((n,a)=>(t[a]&&e.get(a)&&n.push({id:a}),n)),[]);return l().request("entities","actions:collection",n)},clearSelected(){this.set("selectedActions",{}),this.trigger("select:none")},selectAll(e){const t=e.reduce(((e,t)=>(e[t.id]=!0,e)),{});this.set("selectedActions",t),this.trigger("select:all")}}),yo=p.View.extend({className:"schedule__filters",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="schedule__all-filters" data-all-filters-region></div>\n    <div class="schedule__filter" data-group-filter-region></div>\n  '},useData:!0}),regions:{allFilters:"[data-all-filters-region]",group:"[data-group-filter-region]"}}),_o=p.View.extend({modelEvents:{change:"render"},className:"button--link-large",tagName:"button",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:1,column:111},end:{line:1,column:127}}}):l)+")"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"filtersViews"))&&r(l,"allFiltersButton"),t))+"</span> "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"filtersCount"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:90},end:{line:1,column:135}}}))?l:"")},useData:!0}),triggers:{click:"click"},templateContext(){return{filtersCount:(0,a.dp)(this.model.omit(a.Ft))}}}),xo=T.Z.extend({viewOptions:{className:"button-filter",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:30}}}))},useData:!0})},picklistOptions:{attr:"name"}}),ko=s.Z.extend({childApps:{allFilters:Na},stateEvents:{"change:groupId":"showGroupsFilterView"},onStart(){const e=l().request("bootstrap","currentUser");this.groups=e.getGroups(),this.showView(new yo),this.showFilters()},showFilters(){this.showAllFiltersButtonView(),this.showGroupsFilterView()},showAllFiltersButtonView(){if(!l().request("bootstrap","currentOrg:directories").length)return;const e=this.showChildView("allFilters",new _o({model:this.getState()}));this.listenTo(e,"click",this.showFiltersSidebar)},showFiltersSidebar(){if(this.isFiltering)return;this.isFiltering=!0,this.trigger("toggle:filtersSidebar",!0);const e=this.getState(),t=l().request("sidebar","start","filters",{state:e.attributes}),n=t.getState();t.listenTo(n,"change",((t,a)=>{let{unset:i}=a;i?e.clear():e.set(n.attributes)})),t.listenTo(e,"change",(()=>{n.set(e.attributes)})),this.listenTo(t,"stop",(()=>{this.isFiltering=!1,this.trigger("toggle:filtersSidebar",!1)}))},showGroupsFilterView(){if(this.groups.length<2)return;const e=this._getGroups(),t=e.get(this.getState("groupId"))||e.at(0),n=new xo({collection:e,state:{selected:t}});this.listenTo(n.getState(),"change:selected",((e,t)=>{let{id:n}=t;this.setState("groupId",n)})),this.showChildView("group",n)},_getGroups(){const e=this.groups.clone();return e.unshift({id:null,name:g.ZP.patients.schedule.filtersApp.allGroupsName}),e}});var Co=n(3538),Oo=n.n(Co);const To=p.View.extend({className:"flex-region",template:Oo(),regions:{filters:"[data-filters-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:y.Z},selectAll:"[data-select-all-region]",title:{el:"[data-title-region]",replaceElement:!0},dateFilter:"[data-date-filter-region]",search:"[data-search-region]"}}),So=p.View.extend({regions:{owner:"[data-owner-filter-region]"},className:"flex list-page__title-filter",template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="u-text--nowrap">\n        '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"scheduleTitleView"))&&s(l,"label"),t))+"\n      </div>\n      <div data-owner-filter-region></div>\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.schedule.scheduleViews.scheduleTitleView.title",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:22},end:{line:9,column:89}}}),{name:"formatMessage",hash:{owner:null!=t?o(t,"name"):t},data:i,loc:{start:{line:9,column:6},end:{line:9,column:102}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="list-page__title-icon">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"calendar-star",{name:"far",hash:{},data:i,loc:{start:{line:2,column:40},end:{line:2,column:63}}}))+"</span>\n"+(null!=(l=c(n,"if").call(s,null!=t?c(t,"showOwnerDroplist"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:4},end:{line:10,column:11}}}))?l:"")+'    <span class="list-page__header-icon js-title-info">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:11,column:55},end:{line:11,column:76}}}))+"</span>\n  "},useData:!0}),ui:{tooltip:".js-title-info"},templateContext(){return{showOwnerDroplist:this.getOption("showOwnerDroplist")}},onRender(){new k.Z({message:g.ZP.patients.schedule.scheduleViews.scheduleTitleView.tooltip,uiView:this,ui:this.ui.tooltip,orientation:"vertical"})}}),Do=p.View.extend({tagName:"button",className:"button--checkbox",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),Vo=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__header schedule-list__header-due-date">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"dueDateHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-state-patient">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"patientHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-action">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"actionHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-form">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"formheader"),t))+"</td>\n  "},useData:!0}),tagName:"tr"}),Po=p.View.extend({tagName:"tr",className(){const e="schedule-list__day-list-row";return this.getOption("state").get("isReduced")?`${e} is-reduced`:e},template:m().template({1:function(e,t,n,a,i){return"is-overdue"},3:function(e,t,n,a,i){return'<span class="u-margin--r-8" data-check-region></span>'},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_time"):t,"TIME",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:8},end:{line:5,column:65}}}))+"&#8203;\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="schedule-list__no-time">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"dayItemView"))&&s(l,"noTime"),t))+"</span>&#8203;\n"},9:function(e,t,n,a,i){return"is-reduced"},11:function(e,t,n,a,i){return"js-patient"},13:function(e,t,n,a,i){return"js-action"},15:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-form schedule-list__action-form-icon">'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasOutreach"):t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i,loc:{start:{line:29,column:72},end:{line:29,column:165}}}))?l:"")+"</span>"},16:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"share-from-square",{name:"far",hash:{},data:i,loc:{start:{line:29,column:91},end:{line:29,column:118}}}))},18:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:29,column:126},end:{line:29,column:158}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__action-list-cell schedule-list__due-time '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:71},end:{line:2,column:105}}}))?l:"")+'">\n      '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isReduced"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:3,column:91}}}))?l:"")+"\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"due_time"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:4,column:6},end:{line:8,column:13}}}))?l:"")+'    </td>\n    <td class="schedule-list__action-list-cell schedule-list__patient">\n      <div class="schedule-list__patient-details">\n        <span class="schedule-list__patient-sidebar-icon">\n          <button class="js-patient-sidebar-button">\n            '+c((h(n,"far")||t&&h(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:14,column:12},end:{line:14,column:34}}}))+"\n          </button>\n        </span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:22},end:{line:16,column:47}}}):s)+'<span class="schedule-list__patient-name '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isReduced"):t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i,loc:{start:{line:17,column:49},end:{line:17,column:101}}}))?l:"")+'">'+c(u(null!=(l=null!=t?h(t,"patient"):t)?h(l,"first_name"):l,t))+" "+c(u(null!=(l=null!=t?h(t,"patient"):t)?h(l,"last_name"):l,t))+'</span>&#8203;\n      </div>\n    </td>\n    <td class="schedule-list__action-list-cell">\n      <div class="schedule-list__action-state-name">\n        <span class="schedule-list__action-state action--'+c(u(null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"color"):l,t))+'">'+c((h(n,"fa")||t&&h(t,"fa")||r).call(o,null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"iconType"):l,null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:22,column:83},end:{line:22,column:129}}}))+'</span><span class="schedule-list__search-helper">'+c(typeof(s=null!=(s=h(n,"state")||(null!=t?h(t,"state"):t))?s:r)===d?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:22,column:179},end:{line:22,column:190}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:204},end:{line:22,column:229}}}):s)+'<span class="'+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isReduced"):t,{name:"unless",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i,loc:{start:{line:23,column:21},end:{line:23,column:62}}}))?l:"")+'">'+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:23,column:64},end:{line:23,column:74}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:23,column:88},end:{line:23,column:113}}}):s)+'<span class="schedule-list__search-helper">'+c(typeof(s=null!=(s=h(n,"flow")||(null!=t?h(t,"flow"):t))?s:r)===d?s.call(o,{name:"flow",hash:{},data:i,loc:{start:{line:24,column:51},end:{line:24,column:61}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:24,column:75},end:{line:24,column:100}}}):s)+'</div>\n    </td>\n    <td class="schedule-list__action-list-cell schedule-list__action-details" data-details-region></td>\n    <td class="schedule-list__action-list-cell schedule-list__action-form">\n      '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"form"):t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i,loc:{start:{line:29,column:6},end:{line:29,column:179}}}))?l:"")+"\n    </td>\n  "},useData:!0}),regions:{check:"[data-check-region]",details:"[data-details-region]"},templateContext(){const e=this.model.getState();return{isOverdue:this.model.isOverdue(),state:e.get("name"),stateOptions:e.get("options"),patient:this.model.getPatient().attributes,form:this.model.getForm(),flow:this.model.getFlow()&&this.model.getFlow().get("name"),hasOutreach:this.model.hasOutreach(),isReduced:this.isReduced}},ui:{actionName:".js-action"},triggers:{"click .js-form":"click:form","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient",click:"click"},modelEvents:{change:"render"},initialize(e){let{state:t}=e;this.state=t,this.flow=this.model.getFlow(),this.isReduced=t.get("isReduced"),this.listenTo(t,{"select:all":this.showCheck,"select:none":this.showCheck})},onRender(){this.showCheck(),this.showDetailsTooltip()},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){if(this.isReduced)return;const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new O({state:{isSelected:e}});this.listenTo(t,{select(){this.state.toggleSelected(this.model,!e)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},onClickPatientSidebarButton(){const e=this.model.getPatient();l().request("sidebar","start","patient",{patient:e})},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onClickForm(){l().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)},onClick(){this.isReduced||(this.flow?l().trigger("event-router","flow:action",this.flow.id,this.model.id):l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id))},showDetailsTooltip(){this.model.get("details")&&this.showChildView("details",new se({model:this.model}))}}),Mo=p.CollectionView.extend({childView:Po,childViewOptions(){return{state:this.state}},tagName:"tr",className:"schedule-list__list-row",template:m().template({1:function(e,t,n,a,i){return"is-today"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__list-cell">\n      <div class="schedule-list__row-header">\n        <span class="schedule-list__date '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isToday"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:41},end:{line:4,column:71}}}))?l:"")+'">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,"D",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:4,column:73},end:{line:4,column:100}}}))+'</span>\n        <span class="schedule-list__month-day">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,"MMM, ddd",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:47},end:{line:5,column:81}}}))+'</span>\n      </div>\n      <div class="schedule-list__day-list">\n        <table class="schedule-list__day-list-table w-100" data-actions-region></table>\n      </div>\n    </td>\n  '},useData:!0}),templateContext(){const e=d()(this.model.get("date")),t=d()();return{isToday:e.isSame(t,"day")}},childViewContainer:"[data-actions-region]",viewComparator:(e,t)=>(0,Oe.XQ)("asc",e.model.get("due_time"),t.model.get("due_time"),"24"),initialize(e){let{state:t}=e;this.state=t,this.listenTo(t,"change:searchQuery",this.searchList)},childViewTriggers:{render:"listItem:render"},onListItemRender(e){const t=d()(this.model.get("date"));e.searchString=`${t.format("D")} ${t.format("MMM, ddd")} ${e.$el.text()}`},searchList(e,t){if(!t)return void this.removeFilter();const n=qs(t);this.setFilter((function(e){let{searchString:t}=e;return(0,a.yW)(n,(function(e){return e.test(t)}))}))}}),Eo=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"emptyView"))&&s(l,"noScheduledActions"),t))+"</h2>\n    </td>\n  "},useData:!0})}),jo=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Ao=p.CollectionView.extend({tagName:"table",className:"schedule-list__table",childView:Mo,childViewOptions(e){if(e)return{collection:e.get("actions"),state:this.state}},childViewEvents:{"render:children":"onChildFilter"},emptyView(){return this.state.get("searchQuery")?jo:Eo},viewComparator:(e,t)=>(0,Oe.XQ)("asc",e.model.get("date"),t.model.get("date")),viewFilter(e){return this.state.get("searchQuery")?!e.isEmpty():"null"!==e.model.get("date")},initialize(e){let{state:t}=e;this.state=t},onRenderChildren(){this.setVisibleChildren()},onChildFilter:(0,a.Ds)((function(){this.filter()}),10),setVisibleChildren(){const e=this.children.reduce(((e,t)=>e.concat(t.children.pluck("model"))),[]);this.triggerMethod("filtered",e)}}),No=s.Z.extend({StateModel:bo,childApps:{filters:{AppClass:ko,regionName:"filters",restartWithParent:!1,getOptions:["currentClinician"]},bulkEditActions:cl},stateEvents:{"change:filters change:clinicianId change:dateFilters":"restart","change:selectedActions":"onChangeSelected"},initListState(){const e=l().request("bootstrap","currentUser"),t=gi().get(`schedule_${e.id}-v3`),n=this.getState("filters");t&&(t.filters=(0,a.l7)({},n,t.filters)),this.setState((0,a.l7)({id:`schedule_${e.id}`},t))},onBeforeStart(){if(this.isRestarting())return this.getState("isFiltering")||l().request("sidebar","close"),this.showScheduleTitle(),this.showDateFilter(),void this.getRegion("list").startPreloader();this.initListState();const e=l().request("bootstrap","currentUser");this.canViewAssignedActions=e.can("app:schedule:clinician_filter"),this.groups=e.getGroups(),this.showView(new To({state:this.getState()})),this.getRegion("list").startPreloader(),this.showScheduleTitle(),this.showSearchView(),this.showDisabledSelectAll(),this.startFiltersApp(),this.showDateFilter(),this.showTableHeaders()},beforeStart(){const e=this.getState().getEntityFilter();return l().request("entities","fetch:actions:collection",{filter:e})},onStart(e,t){this.collection=t,this.filteredCollection=t.clone(),this.showScheduleList(),this.showSearchView(),this.toggleBulkSelect()},onChangeSelected(){this.toggleBulkSelect()},onClickBulkSelect(){this.selected.length!==this.filteredCollection.length?this.getState().selectAll(this.filteredCollection):this.getState().clearSelected()},onClickBulkEdit(){const e=this.startChildApp("bulkEditActions",{state:{collection:this.selected}});this.listenTo(e,{save(t){this.selected.save(t).done((()=>{if(l().request("alert","show:success",(0,g.SM)(ll,{itemCount:this.selected.length})),e.stop(),t.due_date&&this.selected.some((e=>e.changed.due_date)))return this.getState().clearSelected(),void this.restart();this.getState().clearSelected()})).fail((()=>{l().request("alert","show:error",g.ZP.patients.schedule.scheduleApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const t=this.selected.length;this.selected.destroy().then((()=>{l().request("alert","show:success",(0,g.SM)(ol,{itemCount:t})),e.stop(),this.getState().clearSelected(),this.showScheduleList()}))}})},onClickBulkCancel(){this.getState().clearSelected()},showScheduleList(){const e=new Ao({collection:this.collection.groupByDate(),state:this.getState()});this.listenTo(e,"filtered",(e=>{this.filteredCollection.reset(e),this.toggleBulkSelect()})),this.showChildView("list",e)},showScheduleTitle(){const e=this.getState("clinicianId"),t=l().request("entities","clinicians:model",e),n=this.showChildView("title",new So({model:t,showOwnerDroplist:this.canViewAssignedActions}));this.canViewAssignedActions&&this.showOwnerDroplist(n,t)},showOwnerDroplist(e,t){const n=new L(this.getOwnerFilterOptions(t));this.listenTo(n,{"change:owner"(e){let{id:t}=e;this.setState({clinicianId:t})}}),e.showChildView("owner",n)},getOwnerFilterOptions(e){return{owner:e,groups:this.groups,isTitleFilter:!0,headingText:g.ZP.patients.schedule.filtersApp.ownerFilterHeadingText,hasTeams:!1,align:"right"}},showSearchView(){const e=this.showChildView("search",new Fs({state:{query:this.getState("searchQuery"),isDisabled:!this.collection||!this.collection.length}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},startFiltersApp(){const e=this.startChildApp("filters",{state:this.getState().getFilters()});this.listenTo(e.getState(),"change",(e=>{let{attributes:t}=e;this.setState({filters:(0,a.d9)(t)})})),this.listenTo(e,"toggle:filtersSidebar",(e=>{this.setState("isFiltering",e)}))},showDateFilter(){const e=new Es({dateTypes:["due_date"],state:this.getState().getDateFilters(),region:this.getRegion("dateFilter")});this.listenTo(e.getState(),{change(e){let{attributes:t}=e;this.setState({dateFilters:(0,a.d9)(t)})}}),e.show()},showTableHeaders(){const e=new Vo;this.showChildView("table",e)},showSelectAll(){if(!this.filteredCollection.length)return void this.showDisabledSelectAll();const e=this.selected.length===this.filteredCollection.length,t=!this.selected.length,n=new Do({isSelectAll:e,isSelectNone:t});this.listenTo(n,"click",this.onClickBulkSelect),this.showChildView("selectAll",n)},showDisabledSelectAll(){this.showChildView("selectAll",new Do({isDisabled:!0}))},showBulkEditButtonView(){const e=this.showChildView("filters",new Ki({collection:this.selected}));this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit})},toggleBulkSelect(){if(this.selected=this.getState().getSelected(this.filteredCollection),this.showSelectAll(),this.selected.length)return this.getChildApp("filters").stop(),void this.showBulkEditButtonView();this.startFiltersApp()},setSearchState(e,t){this.setState({searchQuery:t.length>2?t:""})}}),Fo=mi.Z.extend({routerAppName:"PatientsApp",childApps:()=>({flow:Cl,patient:ns,ownedBy:wo,forTeam:wo,newPastDay:wo,pastThree:wo,lastThirty:wo,schedule:No}),defaultRoute(){const e="worklist",t="owned-by";this.routeAction(e,(()=>{(0,a.PQ)((()=>{this.navigateRoute(e,t),l().request("nav","select",this.routerAppName,e,[t]),this.setLatestList(e,[t]),this.showPatientsWorklist(t)}))}))},eventRoutes:()=>({default:{action:"defaultRoute",route:""},worklist:{action:"showPatientsWorklist",route:"worklist/:id",isList:!0},"patient:dashboard":{action:"showPatient",route:"patient/dashboard/:id"},"patient:archive":{action:"showPatient",route:"patient/archive/:id"},"patient:action":{action:"showPatient",route:"patient/:id/action/:id"},"patient:action:new":{action:"showPatient",route:"patient/:id/action"},flow:{action:"showFlow",route:"flow/:id"},"flow:action":{action:"showFlow",route:"flow/:id/action/:id"},schedule:{action:"showSchedule",route:"schedule",isList:!0}}),showPatient(e){this.startRoute("patient",{patientId:e})},showPatientsWorklist(e){const t={"owned-by":"ownedBy","shared-by":"forTeam","new-past-day":"newPastDay","updated-past-three-days":"pastThree","done-last-thirty-days":"lastThirty"};t[e]?this.startCurrent(t[e],{worklistId:e}):l().trigger("event-router","notFound")},showFlow(e){this.startRoute("flow",{flowId:e})},showSchedule(){this.startCurrent("schedule")}}),Io=s.Z.extend({onBeforeStart(){this.setState({isReduced:!0}),this.showView(new To({state:this.getState()})),this.getRegion("list").startPreloader(),this.showScheduleTitle(),this.showSearchView(),this.showTableHeaders()},beforeStart(){const e=l().request("bootstrap","currentUser"),t=e.getGroups(),n={clinician:e.id,status:[u.lO.QUEUED,u.lO.STARTED].join(",")};return t.length&&(n.group=t.pluck("id").join(",")),l().request("entities","fetch:actions:collection",{filter:n})},onStart(e,t){this.collection=t,this.showScheduleList(),this.showSearchView()},showScheduleList(){const e=new Ao({collection:this.collection.groupByDate(),state:this.getState()});this.showChildView("list",e)},showScheduleTitle(){const e=l().request("bootstrap","currentUser"),t=l().request("entities","clinicians:model",e.id);this.showChildView("title",new So({model:t}))},showSearchView(){const e=this.showChildView("search",new Fs({state:{query:this.getState("searchQuery"),isDisabled:!this.collection||!this.collection.length}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},showTableHeaders(){const e=new Vo;this.showChildView("table",e)},setSearchState(e,t){this.setState({searchQuery:t.length>2?t:""})}}),Ro=mi.Z.extend({routerAppName:"PatientsApp",childApps:()=>({flow:Cl,patient:ns,schedule:Io}),defaultRoute(){const e="schedule";this.routeAction(e,(()=>{(0,a.PQ)((()=>{this.navigateRoute(e),l().request("nav","select",this.routerAppName,e),this.setLatestList(e),this.showSchedule()}))}))},eventRoutes:()=>({default:{action:"defaultRoute",route:""},schedule:{action:"showSchedule",route:"schedule",isList:!0},"patient:dashboard":{action:"showPatient",route:"patient/dashboard/:id"},"patient:archive":{action:"showPatient",route:"patient/archive/:id"},"patient:action":{action:"showPatient",route:"patient/:id/action/:id"},"patient:action:new":{action:"showPatient",route:"patient/:id/action"},flow:{action:"showFlow",route:"flow/:id"},"flow:action":{action:"showFlow",route:"flow/:id/action/:id"}}),showPatient(e){this.startRoute("patient",{patientId:e})},showFlow(e){this.startRoute("flow",{flowId:e})},showSchedule(){this.startCurrent("schedule")}}),qo=p.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)}}),Go=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Lo=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Bo=p.View.extend({modelEvents:{"change:enabled":"render"},className:"table-list__item",behaviors:[qo],tagName:"tr",regions:{team:"[data-team-region]",role:"[data-role-region]",state:"[data-state-region]"},triggers:{click:"click"},template:m().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"itemView"))&&s(l,"newClinician"),t))},3:function(e,t,n,a,i){return"table-list__cell--empty"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=s(n,"unless").call(null!=t?t:e.nullContext||{},i&&s(i,"first"),{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:107},end:{line:3,column:138}}}))?l:"")+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))},6:function(e,t,n,a,i){return", "},8:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"itemView"))&&s(l,"noGroups"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-20">'+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:38},end:{line:2,column:128}}}))?l:"")+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:128},end:{line:2,column:138}}}):s)+'&#8203;</td>\n    <td class="table-list__cell w-30 '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"groups"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:37},end:{line:3,column:89}}}))?l:"")+'">'+(null!=(l=u(n,"each").call(o,null!=t?u(t,"groups"):t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:91},end:{line:3,column:162}}}))?l:"")+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"groups"):t,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:162},end:{line:3,column:250}}}))?l:"")+'&#8203;</td>\n    <td class="table-list__cell w-30">\n      <span class="u-margin--r-8" data-state-region></span>&#8203;'+d(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:66},end:{line:5,column:91}}}):s)+'<span class="u-margin--r-8" data-role-region></span>&#8203;'+d(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:65},end:{line:6,column:90}}}):s)+"<span data-team-region></span>&#8203;"+d(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:68}}}):s)+'</td>\n    <td class="table-list__cell w-20 '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"last_active_at"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:37},end:{line:9,column:97}}}))?l:"")+'">'+d((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"last_active_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{defaultHtml:(u(n,"intlGet")||t&&u(t,"intlGet")||r).call(o,"clinicians.cliniciansAllViews.itemView.noLastActive",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:157},end:{line:9,column:220}}})},data:i,loc:{start:{line:9,column:99},end:{line:9,column:222}}}))+"&#8203;</td>\n  "},useData:!0}),templateContext(){return{groups:(0,a.MR)((0,a.UI)(this.model.getGroups().models,"attributes"),"name")}},onRender(){this.showTeam(),this.showRole(),this.showState()},onClick(){l().trigger("event-router","clinician",this.model.id)},showState(){const e=this.model.isActive(),t=this.model.get("enabled")?"enabled":"disabled",n=new Yn({isActive:e,selectedId:t,isCompact:!0});this.listenTo(n,"change:selected",(e=>{this.model.save({enabled:"disabled"!==e.id})})),this.showChildView("state",n)},showRole(){const e=new Nn({role:this.model.getRole(),isCompact:!0,state:{isDisabled:!this.model.get("enabled")}});this.listenTo(e,"change:role",(e=>{this.model.saveRole(e)})),this.showChildView("role",e)},showTeam(){const e=new jt({team:this.model.getTeam(),isCompact:!0,state:{isDisabled:!this.model.get("enabled")}});this.listenTo(e,"change:team",(e=>{this.model.saveTeam(e)})),this.showChildView("team",e)}}),Ho=p.View.extend({className:"flex-region",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="flex list-page__title">\n        <div class="flex list-page__title-filter">\n          <span class="list-page__title-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"users-gear",{name:"far",hash:{},data:i,loc:{start:{line:5,column:46},end:{line:5,column:66}}}))+"</span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"title"),t))+'\n        </div>\n        <div class="clinicians__list-search" data-search-region></div>\n      </div>\n      <button class="u-margin--b-16 button-primary js-add-clinician">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:9,column:69},end:{line:9,column:90}}}))+"<span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"addClinicianButton"),t))+'</span></button>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"clinicianHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"groupsHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"attributesHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"lastActiveHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z},sidebar:"[data-sidebar-region]",addClinician:{el:"[data-add-region]",replaceElement:!0},search:"[data-search-region]"},triggers:{"click .js-add-clinician":"click:addClinician"}}),Zo=p.CollectionView.extend({className:"table-list",tagName:"table",childView:Bo,emptyView(){return this.state.get("searchQuery")?Lo:Go},collectionEvents:{"change:name":"sort"},childViewTriggers:{render:"listItem:render"},viewComparator(e){let{model:t}=e;return String(t.get("name")).toLowerCase()},initialize(e){let{state:t}=e;this.state=t,this.listenTo(t,"change:searchQuery",this.searchList)},onListItemRender(e){e.searchString=e.$el.text()},onRenderChildren(){this.triggerMethod("filtered",this.children.pluck("model"))},searchList(e,t){if(!t)return void this.removeFilter();const n=qs(t);this.setFilter((function(e){let{searchString:t}=e;return(0,a.yW)(n,(function(e){return e.test(t)}))}))}});var $o=n(5808),Wo=n.n($o);const Yo=g.ZP.clinicians.clinicianModal.clinicianModalViews,Uo=p.View.extend({behaviors(){if(this.getOption("shouldFocus"))return[{behaviorClass:Ra.Z,selector:".js-input"}]},className:"pos--relative",template:m().template({1:function(e,t,n,a,i){return"has-error"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasError"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:47},end:{line:2,column:79}}}))?l:"")+'" placeholder="'+d(typeof(s=null!=(s=u(n,"placeholder")||(null!=t?u(t,"placeholder"):t))?s:r)===c?s.call(o,{name:"placeholder",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:111}}}):s)+'" value="'+d(typeof(s=null!=(s=u(n,"value")||(null!=t?u(t,"value"):t))?s:r)===c?s.call(o,{name:"value",hash:{},data:i,loc:{start:{line:2,column:120},end:{line:2,column:131}}}):s)+'" />\n  '},useData:!0}),templateContext(){const e=this.getOption("state").get("errors");return{hasError:e&&e[this.getOption("attr")],placeholder:this.getOption("placeholder"),value:this.model.get(this.getOption("attr"))}},ui:{input:".js-input"},events:{"input @ui.input":"onChange"},initialize(e){let{state:t}=e;this.listenTo(t,"change:errors",this.render)},onChange(){const e=this.ui.input.val();this.model.set(this.getOption("attr"),(0,v.Z)(e))},onDomRefresh(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),zo=p.View.extend({className:"modal__content",regions:{name:"[data-name-region]",email:"[data-email-region]",role:"[data-role-region]",team:"[data-team-region]",groups:"[data-groups-region]"},modelEvents:{change:"onChange"},template:Wo(),initialize(e){let{state:t}=e;this.initState({state:t})},onRender(){this.showNameView(),this.showEmailView(),this.showRole(),this.showTeam(),this.showGroupsComponent()},showNameView(){this.showChildView("name",new Uo({model:this.model,state:this.getState(),attr:"name",placeholder:Yo.clinicianModal.name,shouldFocus:!0}))},showEmailView(){this.showChildView("email",new Uo({model:this.model,state:this.getState(),attr:"email",placeholder:Yo.clinicianModal.email}))},showRole(){const e=new Nn({role:this.model.getRole(),className:"modal__form-component"});this.listenTo(e,"change:role",(e=>{this.model.set("_role",e.id)})),this.showChildView("role",e)},showTeam(){const e=new jt({team:this.model.get("_team"),className:"modal__form-component"});this.listenTo(e,"change:team",(e=>{this.model.set("_team",e.id)})),this.showChildView("team",e)},showGroupsComponent(){const e=this.showChildView("groups",new Ln({className:"modal__form-component",member:this.model}));this.listenTo(e,{"add:member"(e,t){this.model.addGroup(t)},"remove:member"(e,t){this.model.removeGroup(t)}})}});(0,C.j_)(zo);const Qo=Bi.extend({routerAppName:"CliniciansApp",eventRoutes:{clinician:"showClinicianSidebar"},viewEvents:{"click:addClinician":"onClickAddClinician"},onBeforeStart(){this.showView(new Ho),this.getRegion("list").startPreloader(),this.showSearchView(),this.clinicians=l().request("entities","clinicians:collection")},beforeStart:()=>l().request("entities","fetch:clinicians:collection"),onStart(e,t){let{currentRoute:n}=e;this.collection=t,this.clinicians.add(t.models),this.showChildView("list",new Zo({collection:this.clinicians,state:this.getState()})),this.showSearchView(),this.startRoute(n)},_getClinician(e){return e?this.clinicians.get(e):l().request("entities","clinicians:model",{enabled:!0,disabled_at:null})},showSearchView(){const e=this.showChildView("search",new Fs({state:{query:this.getState("searchQuery"),isDisabled:!this.collection||!this.collection.length}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},setSearchState(e,t){this.setState({searchQuery:t.length>2?t:""})},showClinicianSidebar(e){const t=this._getClinician(e);if(!t)return l().request("alert","show:error",g.ZP.clinicians.cliniciansAllApp.notFound),void l().trigger("event-router","clinicians:all");l().request("sidebar","start","clinician",{clinician:t}),t.trigger("editing",!0)},onClickAddClinician(){this.showAddModal()},showAddModal(){const e=this._getClinician(),t=e.clone(),n=l().request("modal","show",function(e){const t=new zo({model:e.clinician});return(0,a.l7)({bodyView:t,headerIcon:"users-gear"},Yo.clinicianModal,e)}({clinician:t,onSubmit:()=>{n.disableSubmit(),e.saveAll(t.attributes).then((t=>{let{data:a}=t;this.clinicians.add(e),l().trigger("event-router","clinician",a.id),n.destroy()})).fail((t=>{let{responseJSON:i}=t;n.disableSubmit();const s=e.parseErrors(i);n.getChildView("body").setState({errors:s}),l().request("alert","show:error",(0,a.VO)(s).join(", "))}))}}));n.disableSubmit(),n.listenTo(t,{change(){n.disableSubmit(!t.isValid())}})}}),Xo=mi.Z.extend({routerAppName:"CliniciansApp",childApps:{cliniciansAll:Qo},eventRoutes:{"clinicians:all":{action:"showCliniciansAll",route:"clinicians",isList:!0},clinician:{action:"showCliniciansAll",route:"clinicians/:id"},"clinician:new":{action:"showCliniciansAll",route:"clinicians/new"}},showCliniciansAll(){this.startRoute("cliniciansAll")}}),Ko=p.View.extend({template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-100">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:49}}}):l)+"</td>\n  "},useData:!0}),className:"table-list__item",tagName:"tr",triggers:{click:"click"},onClick(){l().trigger("event-router","dashboard",this.model.id)}}),Jo=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"dashboards"))&&s(l,"dashboardsAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),er=p.CollectionView.extend({childView:Ko,className:"table-list",tagName:"table",emptyView:Jo}),tr=p.View.extend({className:"flex-region",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="list-page__header">\n    <div class="flex list-page__title">\n      <div class="flex list-page__title-filter">\n        <span class="list-page__title-icon">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"gauge",{name:"far",hash:{},data:i,loc:{start:{line:5,column:44},end:{line:5,column:59}}}))+"</span>"+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"dashboards"))&&r(l,"dashboardsAllViews"))&&r(l,"layoutView"))&&r(l,"title"),t))+'\n      </div>\n    </div>\n  </div>\n  <div class="flex-region list-page__list">\n    <table class="w-100"><tr>\n      <td class="table-list__header w-100">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"dashboards"))&&r(l,"dashboardsAllViews"))&&r(l,"layoutView"))&&r(l,"nameHeader"),t))+'</td>\n    </tr></table>\n    <div class="flex-region" data-list-region></div>\n  </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z}}}),nr=s.Z.extend({onBeforeStart(){this.showView(new tr),this.getRegion("list").startPreloader()},beforeStart:()=>l().request("entities","fetch:dashboards:collection"),onStart(e,t){this.programs=t,this.showChildView("list",new er({collection:t}))}}),ar=p.View.extend({className:"dashboard__context-trail",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a class="js-back dashboard__context-link">\n      '+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:28}}}))+c(e.lambda((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"dashboards"))&&d(l,"dashboardViews"))&&d(l,"contextTrailView"))&&d(l,"contextBackBtn"),t))+"\n    </a>\n    "+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:27}}}))+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:5,column:27},end:{line:5,column:37}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().trigger("event-router","dashboards:all")}}),ir=p.View.extend({className:"flex-grow",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe src="'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"embed_url")||(null!=t?s(t,"embed_url"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"embed_url",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'"></iframe>'},useData:!0})}),lr=p.View.extend({className:"dashboard__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n  <div class="dashboard__layout">\n    <div data-context-trail-region></div>\n    <div class="dashboard__iframe flex" data-dashboard-region></div>\n  </div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},dashboard:{el:"[data-dashboard-region]",regionClass:y.Z}}}),sr=s.Z.extend({onBeforeStart(){this.showView(new lr),this.getRegion("dashboard").startPreloader()},beforeStart(e){let{dashboardId:t}=e;return l().request("entities","fetch:dashboards:model",t)},onStart(e,t){this.showChildView("contextTrail",new ar({model:t})),this.showChildView("dashboard",new ir({model:t}))},onFail(){l().request("alert","show:error",g.ZP.dashboards.dashboardApp.notFound),l().trigger("event-router","dashboards:all"),this.stop()}}),or=mi.Z.extend({routerAppName:"DashboardsApp",childApps:{dashboardsAll:nr,dashboard:sr},eventRoutes:{"dashboards:all":{action:"showDashboardsAll",route:"dashboards",isList:!0},dashboard:{action:"showDashboard",route:"dashboards/:id"}},showDashboardsAll(){this.startCurrent("dashboardsAll")},showDashboard(e){this.startCurrent("dashboard",{dashboardId:e})}}),rr=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"programsAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),cr=p.View.extend({className:"table-list__item",tagName:"tr",template:m().template({1:function(e,t,n,a,i){return" is-published"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:23},end:{line:4,column:42}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:4,column:50},end:{line:4,column:70}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-60">'+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:38},end:{line:2,column:48}}}):s)+'</td>\n    <td class="table-list__cell w-20 programs-list__published'+(null!=(l=d(n,"if").call(o,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:61},end:{line:3,column:98}}}))?l:"")+'">\n      '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:4,column:6},end:{line:4,column:77}}}))?l:"")+"\n      "+c((d(n,"formatMessage")||t&&d(t,"formatMessage")||r).call(o,(d(n,"intlGet")||t&&d(t,"intlGet")||r).call(o,"programs.programsAllViews.itemView.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:78}}}),{name:"formatMessage",hash:{published:null!=t?d(t,"published"):t},data:i,loc:{start:{line:5,column:6},end:{line:5,column:100}}}))+'\n    </td>\n    <td class="table-list__cell w-20 programs-list__updated-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(o,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:64},end:{line:7,column:107}}}))+"</td>\n  "},useData:!0}),triggers:{click:"click"},onClick(){l().trigger("event-router","program:details",this.model.id)}}),dr=p.View.extend({className:"flex-region",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="flex list-page__title">\n        <div class="flex list-page__title-filter">\n          <span class="list-page__title-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"screwdriver-wrench",{name:"far",hash:{},data:i,loc:{start:{line:5,column:46},end:{line:5,column:74}}}))+"</span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"title"),t))+'\n        </div>\n      </div>\n      <button class="u-margin--b-16 button-primary js-add">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:8,column:59},end:{line:8,column:80}}}))+"<span>"+r(c((l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"addProgramBtn"),t))+'</span></button>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-60">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"programHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"stateHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"updatedHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z}},triggers:{"click .js-add":"click:add"}}),ur=p.CollectionView.extend({className:"table-list",tagName:"table",childView:cr,viewComparator:(e,t)=>(0,Oe.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at")),emptyView:rr}),hr=s.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart(){this.showView(new dr),this.getRegion("list").startPreloader()},beforeStart:()=>l().request("entities","fetch:programs:collection"),onStart(e,t){this.programs=t,this.showChildView("list",new ur({collection:t}))},onClickAdd(){const e=l().request("entities","programs:model",{}),t=l().request("sidebar","start","program",{program:e});this.listenTo(t,"stop",(()=>{e.isNew()||this.programs.add(e)}))}});var mr=n(6260),pr=n.n(mr),gr=n(9090),fr=n.n(gr),wr=n(1428),vr=n.n(wr);const br=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="workflows__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"workflowsViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),yr=p.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)},onInitialize(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),_r=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[yr],regions:{published:"[data-published-region]",owner:"[data-owner-region]",due:"[data-due-region]"},template:pr(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick(){this.model.isNew()?l().trigger("event-router","program:action:new",this.model.get("_program")):l().trigger("event-router","program:action",this.model.get("_program"),this.model.id)},onClickForm(){const e=this.model.getForm();l().trigger("event-router","form:preview",e.id)},onRender(){this.showPublished(),this.showOwner(),this.showDue()},showPublished(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new Vt({isConditionalAvailable:t,status:this.model.get("status"),isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:status",(e=>{this.model.save({status:e})})),this.showChildView("published",n)},showOwner(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new pn({owner:this.model.getOwner(),isFromFlow:t,isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",n)},showDue(){const e=this.model.isNew(),t=new hn({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.model.save({days_until_due:e})})),this.showChildView("due",t)}}),xr=p.View.extend({className:"table-list__item",tagName:"tr",behaviors:[yr],regions:{owner:"[data-owner-region]"},template:fr(),templateContext(){return{isPublished:this.model.get("status")===u.t0.PUBLISHED}},triggers:{click:"click"},onClick(){this.model.isNew()?l().trigger("event-router","programFlow:new",this.model.get("_program")):l().trigger("event-router","programFlow",this.model.id)},onRender(){this.showOwner()},showOwner(){const e=this.model.isNew(),t=new Ft({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)}}),kr=p.CollectionView.extend({className:"table-list workflows__list",tagName:"table",childView:e=>"program-flows"===e.type?xr:_r,emptyView:br,viewComparator:(e,t)=>(0,Oe.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))}),Cr=p.View.extend({className:"flex-region workflows__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0},add:"[data-add-region]"},template:vr()}),Or=T.Z.extend({popWidth:248,picklistOptions:()=>({headingText:g.ZP.programs.program.workflows.workflowsViews.addActionHeading,itemClassName:"u-text--italic"}),viewOptions:{className:"button-primary",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+"<span>"+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"workflows"))&&c(l,"workflowsViews"))&&c(l,"addAction"),t))+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{classes:"workflows__arrow"},data:i,loc:{start:{line:1,column:97},end:{line:1,column:144}}}))},useData:!0})},picklistEvents:{"picklist:item:select":"onSelect"},onSelect(e){let{model:t}=e;t.get("onSelect")()}}),Tr=s.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart(e){let{program:t}=e;this.program=t,this.showView(new Cr({model:t})),this.getRegion("content").startPreloader()},beforeStart(e){let{program:t}=e;return[l().request("entities","fetch:programActions:collection:byProgram",{programId:t.id}),l().request("entities","fetch:programFlows:collection:byProgram",{programId:t.id})]},onStart(e,t,n){let{program:a}=e,[i]=t,[s]=n;this.collection=new(r().Collection)([...i.models,...s.models]),this.showChildView("content",new kr({collection:this.collection}));const o=new(r().Collection)([{onSelect:()=>{l().trigger("event-router","program:action:new",this.program.id)},icon:{type:"far",icon:"file-lines",classes:"workflows--add-action"},text:g.ZP.programs.program.workflows.workflowsApp.newAction},{onSelect:()=>{l().trigger("event-router","programFlow:new",this.program.id)},icon:{type:"fas",icon:"folder",classes:"workflows--add-flow"},text:g.ZP.programs.program.workflows.workflowsApp.newFlow}]);this.showChildView("add",new Or({collection:o}))},onEditItem(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}}),Sr=s.Z.extend({beforeStart(e){let{actionId:t,programId:n,flowId:a}=e;return t?l().request("entities","fetch:programActions:model",t):l().request("entities","programActions:model",{_program:n,_program_flow:a,_owner:null,days_until_due:null,status:u.t0.DRAFT,outreach:u.Ww.DISABLED})},onFail(){l().request("alert","show:error",g.ZP.programs.program.action.actionApp.notFound),this.stop()},onStart(e,t){const n=l().request("sidebar","start","programAction",{action:t});this.listenTo(n,"stop",this.stop)}}),Dr=p.View.extend({modelEvents:{"change:name":"render"},className:"program__context-trail",template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"programViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=r(n,"if").call(o,null!=t?r(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+e.escapeExpression("function"==typeof(s=null!=(s=r(n,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:21}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().request("history","go:latestList")},templateContext:()=>({hasLatestList:l().request("history","has:latestList")})}),Vr=p.View.extend({className:"program__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="program__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},onRender(){this.showChildView("contextTrail",new Dr({model:this.model}))}});var Pr=n(8553),Mr=n.n(Pr);const Er=g.ZP.programs.program.sidebar.sidebarViews,jr=p.View.extend({className:"program-sidebar",template:Mr(),regionClass:p.Region.extend({replaceElement:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(r().Collection)([{onSelect:(0,a.ak)(this.triggerMethod,this,"edit"),icon:"pen-to-square",className:"program-sidebar__edit",text:Er.menuOptions.edit}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:Er.menuOptions.headingText,itemTemplate:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span class="+c(typeof(l=null!=(l=d(n,"className")||(null!=t?d(t,"className"):t))?l:o)===r?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:12},end:{line:1,column:27}}}):l)+">"+c((d(n,"far")||t&&d(t,"far")||o).call(s,null!=t?d(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:28},end:{line:1,column:40}}}))+c(typeof(l=null!=(l=d(n,"text")||(null!=t?d(t,"text"):t))?l:o)===r?l.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:50}}}):l)+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()}}),Ar=Bi.extend({eventRoutes(){return{"program:details":(0,a.r$)(this.startCurrent,"workflows"),"program:action":this.startProgramAction,"program:action:new":this.startProgramAction,"programFlow:new":this.startFlowSidebar}},childApps:{workflows:Tr,action:Sr},currentAppOptions(){return{region:this.getRegion("content"),program:this.getOption("program")}},onBeforeStart(){this.getRegion().startPreloader()},beforeStart(e){let{programId:t}=e;return l().request("entities","fetch:programs:model",t)},onStart(e,t){let{currentRoute:n}=e;this.program=t,this.setView(new Vr({model:t})),this.showSidebar(),this.listenTo(l().channel("sidebar"),{show:this.emptySidebar,close:this.showSidebar}),this.startRoute(n),this.showView()},startProgramAction(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editList(t)},fail(){this.startCurrent("workflows")}}),this.startChildApp("action",{actionId:t,programId:e})},editList(e){const t=this.getCurrent()||this.startCurrent("workflows");t.isRunning()?t.triggerMethod("edit:item",e):this.listenToOnce(t,"start",(()=>{t.triggerMethod("edit:item",e)}))},startFlowSidebar(e){const t=l().request("entities","programFlows:model",{_program:e,_owner:null,status:u.t0.DRAFT});l().request("sidebar","start","programFlow",{flow:t}),this.editList(t)},showSidebar(){const e=new jr({model:this.program});this.listenTo(e,{edit:this.onEdit}),this.showChildView("sidebar",e)},emptySidebar(){this.getRegion("sidebar").empty()},onEdit(){l().request("sidebar","start","program",{program:this.program})}});var Nr=n(6675);const Fr=p.Behavior.extend({options:{handle:".js-sort",item:".js-draggable"},initialize(){this.shouldDisable=this.getOption("shouldDisable")},shouldDisable(){return this.view.collection.length<2},collectionEvents:{"update change:id":"updateDisabled"},updateDisabled(){const e=this.shouldDisable();this.view.$el.toggleClass("is-draggable",!e),this.sortable.option("disabled",e)},onRender(){this.sortable&&this.sortable.destroy(),this.sortable=Nr.ZP.create(this.el,{handle:this.getOption("handle"),item:this.getOption("item"),direction:"vertical",onEnd:this.onEnd.bind(this),onStart:this.onStart.bind(this)}),this.updateDisabled()},onBeforeDestroy(){this.sortable.destroy()},onEnd(e){let{oldIndex:t,newIndex:n}=e;const a=this.view.collection.models[t];this.view.$el.removeClass("is-dragging"),this.view.collection.models.splice(t,1),this.view.collection.models.splice(n,0,a),this.view.triggerMethod("drag:end",a)},onStart(e){let{oldIndex:t}=e;const n=this.view.collection.models[t];this.view.$el.addClass("is-dragging"),this.view.triggerMethod("drag:start",n)}});var Ir=n(8520),Rr=n.n(Ir),qr=n(8420),Gr=n.n(qr);const Lr=p.View.extend({modelEvents:{"change:name":"render"},initialize(e){let{program:t}=e;this.program=t,this.listenTo(this.program,"change:name",this.render)},className:"program-flow__context-trail",template:m().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"flow"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-program program-flow__context-link">'+d(typeof(s=null!=(s=u(n,"programName")||(null!=t?u(t,"programName"):t))?s:r)===c?s.call(o,{name:"programName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:70}}}):s)+"</a>"+d((u(n,"fas")||t&&u(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:74},end:{line:8,column:97}}}))+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:8,column:97},end:{line:8,column:107}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-program":"click:program"},onClickBack(){l().request("history","go:latestList")},onClickProgram(){l().trigger("event-router","program:details",this.program.id)},templateContext(){return{hasLatestList:l().request("history","has:latestList"),programName:this.program.get("name")}}}),Br=p.View.extend({modelEvents:{editing:"onEditing",change:"render"},onEditing(e){this.ui.flow.toggleClass("is-selected",e)},template:Gr(),regions:{published:"[data-published-region]",owner:"[data-owner-region]"},triggers:{"click @ui.flow":"edit","click .js-add-action":"click:addAction"},ui:{flow:".js-flow"},onRender(){this.showPublished(),this.showOwner()},showPublished(){const e=new At({flow:this.model,status:this.model.get("status"),isCompact:!0});this.listenTo(e,"change:status",(e=>{this.model.save({status:e})})),this.showChildView("published",e)},showOwner(){const e=new Ft({owner:this.model.getOwner(),isCompact:!0});this.listenTo(e,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",e)}}),Hr=p.View.extend({tagName:"tr",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="program-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"flow"))&&s(l,"flowViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Zr=p.View.extend({modelEvents:{change:"render",editing:"onEditing"},className(){const e="table-list__item program-flow__action-item js-draggable";return this.model.isNew()?`${e} is-selected`:e},template:Rr(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},tagName:"tr",regions:{published:"[data-published-region]",owner:"[data-owner-region]",due:"[data-due-region]"},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick(){this.model.isNew()?l().trigger("event-router","programFlow:action:new",this.model.get("_program_flow")):l().trigger("event-router","programFlow:action",this.model.get("_program_flow"),this.model.id)},onClickForm(){const e=this.model.getForm();l().trigger("event-router","form:preview",e.id)},onEditing(e){this.$el.toggleClass("is-selected",e)},onRender(){this.showPublished(),this.showOwner(),this.showDue()},showDue(){const e=this.model.isNew(),t=new hn({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.model.save({days_until_due:e})})),this.showChildView("due",t)},showPublished(){const e=this.model.isNew(),t=new Vt({status:this.model.get("status"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:status",(e=>{this.model.save({status:e})})),this.showChildView("published",t)},showOwner(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new pn({owner:this.model.getOwner(),isFromFlow:t,isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",n)}}),$r=p.CollectionView.extend({behaviors:[{behaviorClass:Fr,shouldDisable(){return this.view.collection.length<2||this.view.collection.last().isNew()}}],collectionEvents:{"change:id":"onChangeId"},className:"table-list program-flow__list",tagName:"table",childView:Zr,emptyView:Hr,onDragEnd(){this.collection.updateSequences()},onChangeId(){this.collection.updateSequences()}}),Wr=p.View.extend({className:"program-flow__frame",template:m().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="program-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:y.Z,replaceElement:!0}}}),Yr=Bi.extend({routerAppName:"ProgramFlowApp",childApps:{action:Sr},eventRoutes:{"programFlow:action":"showActionSidebar","programFlow:action:new":"showActionSidebar"},onBeforeStart(){this.showView(new Wr)},beforeStart(e){let{flowId:t}=e;return[l().request("entities","fetch:programs:model:byProgramFlow",t),l().request("entities","fetch:programFlows:model",t),l().request("entities","fetch:programActions:collection:byProgramFlow",t)]},onFail(){l().trigger("event-router","notFound"),this.stop()},onStart(e,t,n,a){let{currentRoute:i}=e,[l]=t,[s]=n,[o]=a;this.program=l,this.flow=s,this.actions=o,this.maintainFlowActions(),this.showChildView("contextTrail",new Lr({model:this.flow,program:this.program})),this.showHeader(),this.showActionList(),this.showProgramSidebar()},maintainFlowActions(){this.listenTo(this.actions,"change:id destroy",(()=>{const e=this.actions.map((e=>{let{id:t}=e;return{id:t}}));this.flow.set("_program_actions",e)}))},showHeader(){const e=new Br({model:this.flow});this.listenTo(e,{edit:this.onEditFlow,"click:addAction":()=>{l().trigger("event-router","programFlow:action:new",this.flow.id)}}),this.showChildView("header",e)},showActionList(){this.showChildView("actionList",new $r({collection:this.actions}))},showProgramSidebar(){const e=new jr({model:this.program});this.listenTo(e,{edit:this.onEditProgram}),this.showChildView("sidebar",e)},showActionSidebar(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editAction(t)}}),this.startChildApp("action",{actionId:t,flowId:e})},editAction(e){if(e.isNew())return e.set({sequence:this.actions.length}),void this.actions.add(e);e.trigger("editing",!0)},onEditProgram(){l().request("sidebar","start","program",{program:this.program})},onEditFlow(){l().request("sidebar","start","programFlow",{flow:this.flow})}}),Ur=mi.Z.extend({routerAppName:"ProgramsApp",childApps:{programsAll:hr,program:Ar,programflow:Yr},eventRoutes:{"programs:all":{action:"showProgramsAll",route:"programs",isList:!0},"program:details":{action:"showProgram",route:"program/:id"},"program:action":{action:"showProgram",route:"program/:id/action/:id"},"program:action:new":{action:"showProgram",route:"program/:id/action"},"programFlow:new":{action:"showProgram",route:"program/:id/flow"},programFlow:{action:"showProgramFlow",route:"program-flow/:id"},"programFlow:action":{action:"showProgramFlow",route:"program-flow/:id/action/:id"},"programFlow:action:new":{action:"showProgramFlow",route:"program-flow/:id/action"}},showProgramsAll(){this.startCurrent("programsAll")},showProgram(e){this.startRoute("program",{programId:e})},showProgramFlow(e){this.startRoute("programflow",{flowId:e})}}),zr=s.Z.extend({onStart(){const e=l().request("bootstrap","currentUser");new Fa({region:this.getRegion("sidebar")}),new hi({region:this.getRegion("nav")}),this.startPatientsMain(e),e.can("dashboards:view")&&new or({region:this.getRegion("content")}),e.can("clinicians:manage")&&new Xo({region:this.getRegion("content")}),e.can("programs:manage")&&new Ur({region:this.getRegion("content")}),this.initFormsApp()},startPatientsMain(e){e.can("app:schedule:reduced")?new Ro({region:this.getRegion("content")}):new Fo({region:this.getRegion("content")})},initFormsApp(){const e=new Li({region:this.getRegion("content")});this.listenTo(e,{start:(0,a.r$)(this.toggleNav,!1),stop:(0,a.r$)(this.toggleNav,!0)})},toggleNav(e){this.getView().toggleNav(!!e)}})},5808:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"name"),t))+'</div><div class="flex-grow" data-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"email"),t))+'</div><div class="flex-grow" data-email-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"role"),t))+'</div><div class="modal__form-component" data-role-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"team"),t))+'</div><div class="modal__form-component" data-team-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"groups"),t))+'</div><div class="modal__form-component groups-manager__wrapper" data-groups-region></div></div>\n'},useData:!0})},6467:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">Clinician</h3>\n    </div>\n    <div>\n      <button class="button--icon js-close">'+s((r(n,"fas")||t&&r(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-email-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"state"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"role"),t))+'</h4><div class="flex-grow" data-role-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"team"),t))+'</h4><div class="flex-grow" data-team-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"groups"),t))+'</h4><div class="flex-grow clinician-sidebar__groups" data-groups-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-info-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},5616:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"firstName"),t))+'</div><div class="flex-grow" data-first-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"lastName"),t))+'</div><div class="flex-grow" data-last-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"dateOfBirth"),t))+'</div><div data-dob-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"sex"),t))+'</div><div data-sex-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"groups"),t))+'</div><div class="modal__form-component" data-groups-region></div></div>\n'},useData:!0})},1184:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,null!=t?d(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:49}}}))+"</span>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:81}}}):l)+'<span class="patient__action-name">'+r(typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:o)===c?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):l)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:58},end:{line:6,column:83}}}):l)+'<span class="table-list__meta" data-owner-region></span>'+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:58},end:{line:7,column:83}}}):l)+'<span class="table-list__meta">'+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:33},end:{line:8,column:58}}}):l)+"<span data-due-day-region></span>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:37},end:{line:9,column:62}}}):l)+"<span data-due-time-region></span>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:63}}}):l)+"</span>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:9},end:{line:11,column:34}}}):l)+'<span class="table-list__meta" data-form-region></span>'+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:57},end:{line:12,column:82}}}):l)+'<span class="patient__action-ts">'+r((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||o).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:13,column:35},end:{line:13,column:78}}}))+"</span>"+r(typeof(l=null!=(l=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?l:o)===c?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:85},end:{line:13,column:110}}}):l)+"</td>\n"},useData:!0})},2337:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <td class="table-list__cell">\n      <span class="patient__flow-icon">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:55}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):s)+'<span class="patient__action-name">'+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:41},end:{line:3,column:51}}}):s)+'</span>\n    </td>\n    <td class="table-list__cell patient__list-meta">\n      <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:62},end:{line:6,column:87}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:62},end:{line:7,column:87}}}):s)+'<progress class="progress-bar patient__flow-progress" value='+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"complete"):l,t))+" max="+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:128},end:{line:8,column:153}}}):s)+'<span class="patient__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:9,column:39},end:{line:9,column:82}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:89},end:{line:9,column:114}}}):s)+"</td>\n"},useData:!0})},947:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"newAction"),t))+"</em>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:49}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:81}}}):s)+'<span class="patient__action-name">\n    '+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:33},end:{line:11,column:58}}}):s)+"<span data-due-day-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:37},end:{line:12,column:62}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:38},end:{line:13,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:9},end:{line:14,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:57},end:{line:15,column:82}}}):s)+'<span class="patient__action-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:16,column:35},end:{line:16,column:78}}}))+"</span>\n</td>\n"},useData:!0})},7405:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__flow-icon">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:35},end:{line:2,column:51}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:83}}}):s)+'<span class="patient__action-name">'+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):s)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:33},end:{line:6,column:58}}}):s)+'<span class="patient__flow-status action--'+c(u(null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"color"):l,t))+'">'+c((h(n,"fa")||t&&h(t,"fa")||r).call(o,null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"iconType"):l,null!=(l=null!=t?h(t,"stateOptions"):t)?h(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:7,column:72},end:{line:7,column:118}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:125},end:{line:7,column:150}}}):s)+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:9},end:{line:8,column:34}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):s)+'<progress class="progress-bar patient__flow-progress" value='+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"complete"):l,t))+" max="+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:124},end:{line:10,column:149}}}):s)+'<span class="patient__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:11,column:35},end:{line:11,column:78}}}))+"</span>\n</td>\n"},useData:!0})},1412:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="patient__tab--selected">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"dashboardBtn"),t))+'</span>\n  <button class="patient__tab js-archive">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"archiveBtn"),t))+'</button>\n</div>\n<div class="patient__actions" data-add-workflow-region>\n  <span class="button-primary">\n    <span class="js-loading">'+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:11,column:29},end:{line:11,column:50}}}))+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"actionLoading"),t))+"</span>\n  </span>\n</div>\n<div data-content-region></div>\n"},useData:!0})},3754:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"newAction"),t))+"</em>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:49}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:56},end:{line:3,column:81}}}):s)+'<span class="patient__action-name">\n    '+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:14}}}):s)+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:14},end:{line:5,column:39}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:4},end:{line:6,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:58},end:{line:11,column:83}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:33},end:{line:12,column:58}}}):s)+"<span data-due-day-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:37},end:{line:13,column:62}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:38},end:{line:14,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:9},end:{line:15,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:57},end:{line:16,column:82}}}):s)+'<span class="patient__action-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},4486:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="patient-flow__name">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:31},end:{line:1,column:52}}}))+" "+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:53},end:{line:1,column:63}}}):s)+'</h1>\n<table class="table-list">\n  <td class="patient-flow__details">'+c(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:r)===d?s.call(o,{name:"details",hash:{},data:i,loc:{start:{line:3,column:36},end:{line:3,column:49}}}):s)+"</td>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:54},end:{line:3,column:79}}}):s)+'<td class="patient-flow__meta">\n    <span class="table-list__meta" data-state-region></span>\n    <span class="table-list__meta" data-owner-region></span>\n    <progress class="js-progress progress-bar patient-flow__progress" value='+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"complete"):l,t))+" max="+c(u(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:138},end:{line:7,column:163}}}):s)+"</td>\n</table>\n"},useData:!0})},3538:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="list-page__header">\n  <div class="flex list-page__title">\n    <div data-title-region></div>\n    <div class="schedule__list-search" data-search-region></div>\n  </div>\n  <div class="list-page__filters flex">\n    <div class="flex u-margin--r-24" data-select-all-region></div>\n    <div class="flex flex-align-center w-100" data-filters-region></div>\n    <div class="flex u-text--nowrap" data-date-filter-region></div>\n  </div>\n  <table class="w-100" data-table-region></table>\n</div>\n<div class="flex-region list-page__list" data-list-region></div>\n'},useData:!0})},9584:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"bulkEdit"))&&h(l,"bulkEditViews"))&&h(l,"bulkEditActionBodyTemplate"))&&h(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"bulkEdit"))&&h(l,"bulkEditViews"))&&h(l,"bulkEditActionBodyTemplate"))&&h(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"bulkEdit"))&&h(l,"bulkEditViews"))&&h(l,"bulkEditActionBodyTemplate"))&&h(l,"dueDateLabel"),t))+'</h4>\n  <div class="flex flex-grow">'+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:d)===u?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:30},end:{line:4,column:55}}}):s)+'<div class="flex-grow" data-due-date-region></div>'+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:d)===u?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:54},end:{line:5,column:79}}}):s)+'<div class="flex-grow" data-due-time-region></div>'+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:d)===u?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:54},end:{line:6,column:79}}}):s)+'</div>\n</div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"bulkEdit"))&&h(l,"bulkEditViews"))&&h(l,"bulkEditActionBodyTemplate"))&&h(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'},useData:!0})},330:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n<div class="flex u-margin--t-8 u-margin--b-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-apply-owner-region></div></div>\n'},useData:!0})},3948:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionDetailsTemplate"))&&u(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},8862:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:61},end:{line:2,column:95}}}))?l:"")+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:95},end:{line:2,column:196}}}))?l:"")+">"+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:197},end:{line:2,column:207}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:62},end:{line:3,column:72}}}):s)+" </div>\n"},2:function(e,t,n,a,i){return" disabled"},4:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionNameTemplate"))&&s(l,"placeholder"),t))+'"'},6:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="action-sidebar__name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:5,column:34},end:{line:5,column:44}}}):l)+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isAdHoc"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:1,column:0},end:{line:6,column:7}}}))?l:""},useData:!0})},3855:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarTemplate"))&&s(l,"formLabel"),t))+'</h4><div class="flex-grow" data-form-region></div></div>\n    <div class="flex'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasOutreach"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:27,column:20},end:{line:27,column:61}}}))?l:"")+'" data-form-sharing-region></div>\n'},2:function(e,t,n,a,i){return" u-margin--t-24"},4:function(e,t,n,a,i){return"    <div data-form-region></div>\n    <div data-form-sharing-region></div>\n"},6:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="u-margin--t-24">\n    <h3 class="sidebar__heading">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarTemplate"))&&s(l,"activityHeadingText"),t))+'</h3>\n    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>\n  </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+c((h(n,"formatMessage")||t&&h(t,"formatMessage")||r).call(o,(h(n,"intlGet")||t&&h(t,"intlGet")||r).call(o,"patients.sidebar.action.actionSidebarTemplate.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:51},end:{line:4,column:120}}}),{name:"formatMessage",hash:{outreach:null!=t?h(t,"outreach"):t},data:i,loc:{start:{line:4,column:35},end:{line:4,column:140}}}))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionSidebarTemplate"))&&h(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionSidebarTemplate"))&&h(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionSidebarTemplate"))&&h(l,"dueDayLabel"),t))+'</h4>\n      <div class="flex flex-grow">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:34},end:{line:19,column:59}}}):s)+'<div class="flex-grow" data-due-day-region></div>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:57},end:{line:20,column:82}}}):s)+'<div class="flex-grow" data-due-time-region></div>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:58},end:{line:21,column:83}}}):s)+'</div>\n    </div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionSidebarTemplate"))&&h(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(4,i,0),data:i,loc:{start:{line:25,column:4},end:{line:31,column:11}}}))?l:"")+"  </div>\n"+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:33,column:2},end:{line:38,column:13}}}))?l:"")+'</div>\n<div class="u-margin--t-16" data-comment-region></div>\n<div data-timestamps-region></div>\n'},useData:!0})},2266:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8 u-text-align--right">\n  <button class="button--link js-response">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonResponseText"),t))+"</button>\n</div>\n"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8">\n  <button class="button--link js-undo-cancel"'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:24,column:45},end:{line:24,column:75}}}))?l:"")+">"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonUndoText"),t))+"</button>\n</div>\n"},4:function(e,t,n,a,i){return" disabled"},6:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8">\n  <button class="button--link js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonCancelText"),t))+"</button>\n</div>\n"},8:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lambda,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex u-margin--t-8">\n  <div class="flex-grow">\n    <button class="button--link js-cancel"'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:37,column:42},end:{line:37,column:72}}}))?l:"")+">"+r(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"action"))&&c(l,"formSharingTemplate"))&&c(l,"buttonCancelText"),t))+'</button>\n  </div>\n  <button class="button--link js-share"'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:39,column:39},end:{line:39,column:69}}}))?l:"")+">"+r(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"action"))&&c(l,"formSharingTemplate"))&&c(l,"buttonShareText"),t))+"</button>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex">\n  <h3 class="sidebar__heading flex-grow">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:i,loc:{start:{line:2,column:41},end:{line:2,column:92}}}))+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"label"),t))+'</h3>\n</div>\n<div class="flex u-margin--t-16">\n  <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"recipientLabel"),t))+'</h4>\n  <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"user-plus",{name:"far",hash:{},data:i,loc:{start:{line:6,column:73},end:{line:6,column:92}}}))+"<span>"+r(c(null!=(l=null!=t?d(t,"patient"):t)?d(l,"first_name"):l,t))+" "+r(c(null!=(l=null!=t?d(t,"patient"):t)?d(l,"last_name"):l,t))+'</span></button></div>\n</div>\n<div class="flex u-margin--t-8">\n  <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"stateLabel"),t))+'</h4>\n  <div class="flex-grow action-sidebar__sharing-state">\n    <span class="action--'+r(c(null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"color"):l,t))+'">'+r((d(n,"fa")||t&&d(t,"fa")||o).call(s,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"iconType"):l,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:11,column:51},end:{line:11,column:98}}}))+"<span>"+r((d(n,"formatMessage")||t&&d(t,"formatMessage")||o).call(s,(d(n,"intlGet")||t&&d(t,"intlGet")||o).call(s,"patients.sidebar.action.formSharingTemplate.stateText",{name:"intlGet",hash:{},data:i,loc:{start:{line:12,column:28},end:{line:12,column:93}}}),{name:"formatMessage",hash:{sharing:null!=t?d(t,"sharing"):t},data:i,loc:{start:{line:12,column:12},end:{line:12,column:111}}}))+"</span>\n    </span>\n  </div>\n</div>"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isResponded"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:0},end:{line:20,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isCanceled"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:22,column:0},end:{line:26,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isWaiting"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:0},end:{line:32,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isError"):t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:34,column:0},end:{line:41,column:8}}}))?l:"")},useData:!0})},8327:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex flex-align-center">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">\n        <span class="u-margin--r-8">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:5,column:36},end:{line:5,column:53}}}))+'</span>All Filters\n        <span data-count-region></span>\n      </h3>\n    </div>\n    <div class="flex flex-align-center">\n      <button class="filters-sidebar__clear-filters u-margin--r-16 js-clear-filters">Clear Filters</button>\n      <button class="filters-sidebar__close button--icon js-close">'+o((r(n,"fas")||t&&r(t,"fas")||s).call(l,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:11,column:67},end:{line:11,column:82}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-32" data-custom-filters-region>\n  </div>\n</div>\n'},useData:!0})},2888:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar--no-results">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowSidebarTemplate"))&&s(l,"noDetails"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"flow"))&&h(l,"flowSidebarTemplate"))&&h(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+r((h(n,"far")||t&&h(t,"far")||d).call(c,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+r((h(n,"fas")||t&&h(t,"fas")||d).call(c,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div class="patient-flow-sidebar__name">'+r(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:d)===u?s.call(c,{name:"name",hash:{},data:i,loc:{start:{line:12,column:44},end:{line:12,column:54}}}):s)+'</div>\n    <div class="sidebar__details">'+r(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:d)===u?s.call(c,{name:"details",hash:{},data:i,loc:{start:{line:13,column:34},end:{line:13,column:47}}}):s)+(null!=(l=h(n,"unless").call(c,null!=t?h(t,"details"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:47},end:{line:13,column:181}}}))?l:"")+'</div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"flow"))&&h(l,"flowSidebarTemplate"))&&h(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"flow"))&&h(l,"flowSidebarTemplate"))&&h(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n  </div>\n  <div class="u-margin--t-24">\n    <h3 class="sidebar__heading">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"flow"))&&h(l,"flowSidebarTemplate"))&&h(l,"activityHeadingText"),t))+'</h3>\n    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},4059:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <span class="worklist-patient-sidebar__user-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:4,column:56},end:{line:4,column:78}}}))+'</span>\n    </div>\n    <div class="worklist-patient-sidebar__close-icon">\n      <button class="button--icon js-close">'+r((d(n,"fas")||t&&d(t,"fas")||o).call(s,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="worklist-patient-sidebar__patient-info js-patient">\n    <div class="worklist-patient-sidebar__patient-name">'+r(typeof(l=null!=(l=d(n,"first_name")||(null!=t?d(t,"first_name"):t))?l:o)===c?l.call(s,{name:"first_name",hash:{},data:i,loc:{start:{line:11,column:56},end:{line:11,column:72}}}):l)+" "+r(typeof(l=null!=(l=d(n,"last_name")||(null!=t?d(t,"last_name"):t))?l:o)===c?l.call(s,{name:"last_name",hash:{},data:i,loc:{start:{line:11,column:73},end:{line:11,column:88}}}):l)+'</div>\n    <div>\n      <button class="button--link">View Patient Dashboard</button>\n    </div>\n  </div>\n  <div class="worklist-patient-sidebar__widgets" data-widgets-region></div>\n</div>\n'},useData:!0})},9565:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"flowName")||(null!=t?s(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:72}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell w-15">\n  <span class="worklist-list__patient-sidebar-icon">\n    <button class="button-secondary--compact js-patient-sidebar-button">\n      '+c((h(n,"far")||t&&h(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:5,column:6},end:{line:5,column:28}}}))+'&#8203;\n    </button>\n  </span>\n  <div class="worklist-list__patient-name js-patient">\n    '+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"last_name"):l,t))+'&#8203;\n  </div>\n</td>\n<td class="table-list__cell worklist-list__item-name">\n  <span class="worklist-list__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:13,column:43},end:{line:13,column:55}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:62},end:{line:13,column:87}}}):s)+'<div class="worklist-list__name">\n    '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:15,column:4},end:{line:15,column:85}}}))?l:"")+"&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:92},end:{line:15,column:117}}}):s)+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===u?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:16,column:4},end:{line:16,column:14}}}):s)+"&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:21},end:{line:16,column:46}}}):s)+'</div>\n</td>\n<td class="table-list__cell worklist-list__meta">\n  <span class="worklist-list__details" data-details-region></span>&#8203;'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:73},end:{line:20,column:98}}}):s)+'<span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=h(n,"state")||(null!=t?h(t,"state"):t))?s:r)===u?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:21,column:108},end:{line:21,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:133},end:{line:21,column:158}}}):s)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=h(n,"owner")||(null!=t?h(t,"owner"):t))?s:r)===u?s.call(o,{name:"owner",hash:{},data:i,loc:{start:{line:22,column:108},end:{line:22,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:133},end:{line:22,column:158}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:23,column:33},end:{line:23,column:58}}}):s)+"<span data-due-date-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:24,column:38},end:{line:24,column:63}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:25,column:38},end:{line:25,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:26,column:9},end:{line:26,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:27,column:57},end:{line:27,column:82}}}):s)+'&#8203;\n</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:29,column:60},end:{line:29,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:30,column:60},end:{line:30,column:103}}}))+"&#8203;</td>\n"},useData:!0})},178:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"flowName")||(null!=t?s(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:72}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell w-15">\n  <span class="worklist-list__patient-sidebar-icon">\n    <button class="button-secondary--compact js-patient-sidebar-button">\n      '+c((h(n,"far")||t&&h(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:5,column:6},end:{line:5,column:28}}}))+'&#8203;\n    </button>\n  </span>\n  <div class="worklist-list__patient-name js-patient">\n    '+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"last_name"):l,t))+'&#8203;\n  </div>\n</td>\n<td class="table-list__cell w-30">\n  <span class="worklist-list__flow-icon">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:13,column:41},end:{line:13,column:57}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:64},end:{line:13,column:89}}}):s)+'<div class="worklist-list__name">\n    '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:15,column:4},end:{line:15,column:85}}}))?l:"")+"&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:92},end:{line:15,column:117}}}):s)+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===u?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:16,column:4},end:{line:16,column:14}}}):s)+"&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:21},end:{line:16,column:46}}}):s)+'</div>\n</td>\n<td class="table-list__cell w-40">\n  <span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=h(n,"state")||(null!=t?h(t,"state"):t))?s:r)===u?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:20,column:108},end:{line:20,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:133},end:{line:20,column:158}}}):s)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=h(n,"owner")||(null!=t?h(t,"owner"):t))?s:r)===u?s.call(o,{name:"owner",hash:{},data:i,loc:{start:{line:21,column:108},end:{line:21,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:133},end:{line:21,column:158}}}):s)+'<progress class="progress-bar worklist-list__flow-progress" value='+c(d(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"complete"):l,t))+" max="+c(d(null!=(l=null!=t?h(t,"_progress"):t)?h(l,"total"):l,t))+"></progress>&#8203;"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===u?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:137},end:{line:22,column:162}}}):s)+'</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:24,column:60},end:{line:24,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:25,column:60},end:{line:25,column:103}}}))+"&#8203;</td>\n"},useData:!0})},2855:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="list-page__header">\n  <div class="flex list-page__title">\n    <div data-title-region></div>\n    <div class="worklist-list__toggle" data-toggle-region></div>\n    <div class="u-margin--l-16" data-search-region></div>\n  </div>\n  <div class="list-page__filters flex">\n    <div class="flex u-margin--r-24" data-select-all-region></div>\n    <div class="flex flex-align-center w-100" data-filters-region></div>\n    <div class="flex">\n      <span class="u-margin--r-16 u-text--nowrap" data-date-filter-region></span>\n      <span class="worklist-list__filter-sort" data-sort-region></span>\n    </div>\n  </div>\n  <table class="worklist__header w-100 js-list-header" data-table-region></table>\n</div>\n<div class="flex-region list-page__list js-list" data-list-region></div>\n'},useData:!0})},2016:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"flowHeader"),t))+"\n"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"actionHeader"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"flowAttrHeader"),t))+"\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"actionAttrHeader"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__header table-list__item-check"></td>\n<td class="table-list__header w-15">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"patientHeader"),t))+'</td>\n<td class="table-list__header worklist-list__name-header">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:2},end:{line:8,column:9}}}))?l:"")+'</td>\n<td class="table-list__header worklist-list__meta-header">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:11,column:2},end:{line:15,column:9}}}))?l:"")+'</td>\n<td class="table-list__header w-7-5">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"createdHeader"),t))+'</td>\n<td class="table-list__header w-7-5">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"updatedHeader"),t))+"</td>\n"},useData:!0})},8520:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"flow"))&&s(l,"actionItemTemplate"))&&s(l,"newProgramFlowAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button class="js-form button-secondary--compact">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:90}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="program-flow__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:42},end:{line:2,column:54}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:61},end:{line:2,column:86}}}):s)+'<span class="program-flow__action-name">\n    '+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:115}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <div class="pos--relative">\n    <span class="table-list__meta" data-published-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:64},end:{line:10,column:89}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:60},end:{line:11,column:85}}}):s)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:58},end:{line:12,column:83}}}):s)+'<span class="table-list__meta">\n'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:6},end:{line:16,column:14}}}))?l:"")+"    </span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:17,column:11},end:{line:17,column:36}}}):s)+'<span class="program-flow__action-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:18,column:42},end:{line:18,column:85}}}))+'</span>\n    <span class="program-flow__sort-handle js-sort">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"grip-vertical",{name:"fas",hash:{},data:i,loc:{start:{line:19,column:52},end:{line:19,column:75}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:82},end:{line:19,column:107}}}):s)+"</div>\n</td>\n"},useData:!0})},8420:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"details")||(null!=t?s(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:19}}}):l)+"\n"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="program-flow__meta button-secondary">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen-to-square",{name:"far",hash:{},data:i,loc:{start:{line:8,column:58},end:{line:8,column:81}}}))+" Add Details</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="program-flow__header js-flow">\n  <h1 class="program-flow__name">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:33},end:{line:2,column:54}}}))+" "+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:55},end:{line:2,column:65}}}):s)+'</h1>\n  <div>\n    <p class="program-flow__details">\n'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:5,column:4},end:{line:9,column:11}}}))?l:"")+"    </p>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:8},end:{line:10,column:33}}}):s)+'<span class="program-flow__meta" data-published-region></span>\n    <span class="program-flow__meta" data-owner-region></span>\n  </div>\n</div>\n<div class="program-flow__actions">\n  <button class="button-primary js-add-action">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:16,column:47},end:{line:16,column:68}}}))+"<span>"+c(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"program"))&&u(l,"flow"))&&u(l,"headerTemplate"))&&u(l,"action"),t))+"</span></button>\n</div>\n"},useData:!0})},8553:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"details")||(null!=t?s(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:35}}}):l)},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-text--italic">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"sidebar"))&&s(l,"sidebarLayoutTemplate"))&&s(l,"noDetails"),t))+"</span>"},5:function(e,t,n,a,i){return" is-published"},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:21},end:{line:8,column:40}}}))},9:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:8,column:48},end:{line:8,column:68}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="program-sidebar__name">'+c("function"==typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:34},end:{line:1,column:44}}}):s)+'</h1>\n<button class="button--icon program-sidebar__context-menu js-menu">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:2,column:67},end:{line:2,column:85}}}))+'</button>\n<div class="u-margin--t-16">\n  <div class="program-sidebar__heading">'+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"program"))&&u(l,"sidebar"))&&u(l,"sidebarLayoutTemplate"))&&u(l,"details"),t))+"</div>\n  <div>"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:5,column:7},end:{line:5,column:154}}}))?l:"")+'</div>\n  <div class="program-sidebar__heading">'+c(d((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"program"))&&u(l,"sidebar"))&&u(l,"sidebarLayoutTemplate"))&&u(l,"state"),t))+'</div>\n  <div class="program-sidebar__published'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"published"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:40},end:{line:7,column:77}}}))?l:"")+'">\n    '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"published"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i,loc:{start:{line:8,column:4},end:{line:8,column:75}}}))?l:"")+"\n    "+c((u(n,"formatMessage")||t&&u(t,"formatMessage")||r).call(o,(u(n,"intlGet")||t&&u(t,"intlGet")||r).call(o,"programs.program.sidebar.sidebarLayoutTemplate.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:20},end:{line:9,column:88}}}),{name:"formatMessage",hash:{published:null!=t?u(t,"published"):t},data:i,loc:{start:{line:9,column:4},end:{line:9,column:110}}}))+"\n  </div>\n</div>\n"},useData:!0})},6260:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"actionItemTemplate"))&&s(l,"newProgramAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="js-form button-secondary--compact">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:14,column:56},end:{line:14,column:88}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:51}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:83}}}):s)+'<span class="workflows__action-name">\n    '+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:116}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta" data-published-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:62},end:{line:9,column:87}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:56},end:{line:11,column:81}}}):s)+'<span class="table-list__meta">\n'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:4},end:{line:15,column:12}}}))?l:"")+"  </span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:9},end:{line:16,column:34}}}):s)+'<span class="workflows__item-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},9090:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"flowItemTemplate"))&&s(l,"newProgramFlow"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="workflows-action--published">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-play",{name:"far",hash:{},data:i,loc:{start:{line:11,column:48},end:{line:11,column:69}}}))+"</span>\n"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="workflows-action--draft">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen-to-square",{name:"far",hash:{},data:i,loc:{start:{line:13,column:44},end:{line:13,column:67}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__flow-icon">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:53}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:60},end:{line:2,column:85}}}):s)+'<span class="workflows__flow-name">\n    '+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:112}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta workflows__flow-status">\n'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isPublished"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:10,column:4},end:{line:14,column:11}}}))?l:"")+"  </span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:9},end:{line:15,column:34}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:58},end:{line:16,column:83}}}):s)+'<span class="workflows__item-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},1428:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="workflows__tab--selected">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"layoutTemplate"))&&s(l,"workflowsLabel"),t))+'</span>\n</div>\n<div class="workflows__actions" data-add-region></div>\n<div data-content-region></div>\n'},useData:!0})},5487:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionDetailsTemplate"))&&u(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},7160:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionNameTemplate"))&&s(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:162}}}))?l:"")+">"+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:163},end:{line:1,column:173}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):s)+" </div>\n"},useData:!0})},9271:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading" data-heading-region>'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+o((d(n,"far")||t&&d(t,"far")||c).call(r,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+o((d(n,"fas")||t&&d(t,"fas")||c).call(r,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"publishedLabel"),t))+'</h4><div class="flex-grow" data-published-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"dueDayLabel"),t))+'</h4><div class="flex-grow" data-due-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"formLabel"),t))+'</h4><div class="flex-grow" data-form-region></div></div>\n    <div class="flex u-margin--t-24" data-form-sharing-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},8223:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowDetailsTemplate"))&&u(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:144},end:{line:1,column:157}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},7665:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowNameTemplate"))&&s(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:158}}}))?l:"")+">"+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:159},end:{line:1,column:169}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):s)+" </div>\n"},useData:!0})},8698:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+o((d(n,"far")||t&&d(t,"far")||c).call(r,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+o((d(n,"fas")||t&&d(t,"fas")||c).call(r,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"publishedLabel"),t))+'</h4><div class="flex-grow" data-published-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},4974:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"programs"))&&u(l,"sidebar"))&&u(l,"program"))&&u(l,"programDetailsTemplate"))&&u(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:150},end:{line:1,column:163}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},2476:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"program"))&&s(l,"programNameTemplate"))&&s(l,"placeholder"),t))+'"'},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:5,column:51},end:{line:5,column:62}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="pos--relative">\n  <textarea class="input-primary textarea-flex__input js-input'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:62},end:{line:2,column:92}}}))?l:"")+'"'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:93},end:{line:2,column:196}}}))?l:"")+">"+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:197},end:{line:2,column:207}}}):s)+'</textarea>\n  <div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:74}}}):s)+" </div>\n</div>\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"error"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:0},end:{line:5,column:75}}}))?l:"")+"\n"},useData:!0})},3742:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"program"))&&o(l,"programSidebarTemplate"))&&o(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon js-close">'+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n    <div class="u-margin--t-16" data-state-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},5070:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" is-published"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:21},end:{line:4,column:40}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:4,column:48},end:{line:4,column:68}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-4 u-float--left">\n  <div class="programs-sidebar__label">'+s(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"sidebar"))&&c(l,"program"))&&c(l,"programStateTemplate"))&&c(l,"stateLabel"),t))+'</div>\n  <div class="programs-sidebar__published'+(null!=(l=c(n,"if").call(o,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:41},end:{line:3,column:78}}}))?l:"")+'">\n    '+(null!=(l=c(n,"if").call(o,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:4,column:4},end:{line:4,column:75}}}))?l:"")+"\n    "+s((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(o,"programs.sidebar.program.programStateTemplate.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:20},end:{line:5,column:87}}}),{name:"formatMessage",hash:{published:null!=t?c(t,"published"):t},data:i,loc:{start:{line:5,column:4},end:{line:5,column:109}}}))+'\n  </div>\n</div>\n<button class="js-state-toggle button-secondary programs-sidebar__state-toggle '+(null!=(l=c(n,"unless").call(o,null!=t?c(t,"published"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:79},end:{line:8,column:124}}}))?l:"")+'">\n  '+(null!=(l=c(n,"if").call(o,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:9,column:2},end:{line:9,column:73}}}))?l:"")+"\n  "+s((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(o,"programs.sidebar.program.programStateTemplate.toggle",{name:"intlGet",hash:{},data:i,loc:{start:{line:10,column:18},end:{line:10,column:82}}}),{name:"formatMessage",hash:{published:null!=t?c(t,"published"):t},data:i,loc:{start:{line:10,column:2},end:{line:10,column:104}}}))+"\n</button>\n"},useData:!0})}}]);