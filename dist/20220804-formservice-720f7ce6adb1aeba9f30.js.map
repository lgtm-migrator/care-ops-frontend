{"version":3,"file":"20220804-formservice-720f7ce6adb1aeba9f30.js","mappings":"8OASA,MAAMA,EAAcC,EAAAA,EAAAA,OAAW,CAC7BC,YAAY,GAAmC,IAAnC,OAAEC,EAAF,UAAUC,EAAV,WAAqBC,GAAc,EAC7C,MAAO,CACLC,IAAAA,QAAc,WAAY,oBAAqBH,GAC/CG,IAAAA,QAAc,WAAY,yBAA0BH,GACpDG,IAAAA,QAAc,WAAY,qBAAsB,KAAMF,EAAWD,GACjEG,IAAAA,QAAc,WAAY,iCAAkCD,KAGhEE,QAAQC,EAAD,SAAmD,IAA3CC,GAA2C,GAAnCC,GAAmC,GAArBC,GAAqB,GAAXC,GAAW,EACxDC,OAAOC,YAAY,CAAEC,QAAS,WAAYC,KAAM,CAC9CN,aACAO,SAAUN,EAAOO,KAAKC,YAAc,GACpCC,eAAgBR,EAASM,KACzBG,eAAgBZ,EAAKa,oBACrBC,SAAUd,EAAKe,gBACZC,OAAOC,WAIVC,EAASC,IAAAA,OAAAA,OAAuB,CACpCC,OAAQ,CACN,+CAAgD,oBAElDC,iBAAiB3B,EAAQC,EAAWC,IACtB,IAAIL,GAEZ+B,MAAM,CAAE5B,SAAQC,YAAWC,kBAInC,SAAS2B,IACP,IAAIL,EACJC,IAAAA,QAAAA,MAAuB,CAAEK,WAAW","sources":["webpack://care-ops-frontend/./src/js/formservice.js"],"sourcesContent":["import 'js/base/setup';\n\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nimport 'js/entities-service';\n\nconst Application = App.extend({\n  beforeStart({ formId, patientId, responseId }) {\n    return [\n      Radio.request('entities', 'fetch:forms:model', formId),\n      Radio.request('entities', 'fetch:forms:definition', formId),\n      Radio.request('entities', 'fetch:forms:fields', null, patientId, formId),\n      Radio.request('entities', 'fetch:formResponses:submission', responseId),\n    ];\n  },\n  onStart(opts, [form], [definition], [fields], [response]) {\n    parent.postMessage({ message: 'form:pdf', args: {\n      definition,\n      formData: fields.data.attributes || {},\n      formSubmission: response.data,\n      contextScripts: form.getContextScripts(),\n      reducers: form.getReducers(),\n    } }, window.origin);\n  },\n});\n\nconst Router = Backbone.Router.extend({\n  routes: {\n    'formservice/:formId/:patientId(/:responseId)': 'startFormService',\n  },\n  startFormService(formId, patientId, responseId) {\n    const app = new Application();\n\n    app.start({ formId, patientId, responseId });\n  },\n});\n\nfunction startFormServiceApp() {\n  new Router();\n  Backbone.history.start({ pushState: true });\n}\n\nexport {\n  startFormServiceApp,\n};\n"],"names":["Application","App","beforeStart","formId","patientId","responseId","Radio","onStart","opts","form","definition","fields","response","parent","postMessage","message","args","formData","data","attributes","formSubmission","contextScripts","getContextScripts","reducers","getReducers","window","origin","Router","Backbone","routes","startFormService","start","startFormServiceApp","pushState"],"sourceRoot":""}